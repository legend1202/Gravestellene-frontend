import{u as p}from"./index-R3sdzr18.js";import{bZ as u,r as j,b_ as g,aV as P,j as s,S as a,h as v,am as S,A as L,ap as z,B as R,b$ as k,p as U,T as C,b9 as E,L as G,R as T,d,G as f,y as M}from"./index-_tg0Vjne.js";import{b as w}from"./format-number-x-XRdvJl.js";import{I as V}from"./image-SDlH-Y9m.js";import{T as A}from"./text-max-line-M5WjMaF2.js";import{C as y}from"./Card-SUD4YaWI.js";import{C as B}from"./CardContent-RBQyJkrP.js";import{S as c}from"./Skeleton-DE5mqhd_.js";function Q(){const o=g.post.list,{data:e,isLoading:t,error:r,isValidating:n}=p(o,u);return j.useMemo(()=>({posts:(e==null?void 0:e.posts)||[],postsLoading:t,postsError:r,postsValidating:n,postsEmpty:!t&&!(e!=null&&e.posts.length)}),[e==null?void 0:e.posts,r,t,n])}function X(o){const e=o?[g.post.details,{params:{title:o}}]:"",{data:t,isLoading:r,error:n,isValidating:i}=p(e,u);return j.useMemo(()=>({post:t==null?void 0:t.post,postLoading:r,postError:n,postValidating:i}),[t==null?void 0:t.post,n,r,i])}function Y(o){const e=o?[g.post.latest,{params:{title:o}}]:"",{data:t,isLoading:r,error:n,isValidating:i}=p(e,u);return j.useMemo(()=>({latestPosts:(t==null?void 0:t.latestPosts)||[],latestPostsLoading:r,latestPostsError:n,latestPostsValidating:i,latestPostsEmpty:!r&&!(t!=null&&t.latestPosts.length)}),[t==null?void 0:t.latestPosts,n,r,i])}function q(o){const e=o?[g.post.search,{params:{query:o}}]:"",{data:t,isLoading:r,error:n,isValidating:i}=p(e,u,{keepPreviousData:!0});return j.useMemo(()=>({searchResults:(t==null?void 0:t.results)||[],searchLoading:r,searchError:n,searchValidating:i,searchEmpty:!r&&!(t!=null&&t.results.length)}),[t==null?void 0:t.results,n,r,i])}function D({variant:o="vertical",sx:e,...t}){const r=P("up","sm");return o==="horizontal"?s.jsxs(a,{component:v,direction:"row",variant:"outlined",sx:{borderRadius:2,...e},...t,children:[s.jsxs(a,{spacing:2,flexGrow:1,sx:{p:3},children:[s.jsxs(a,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[s.jsx(c,{variant:"circular",sx:{width:40,height:40}}),s.jsx(c,{sx:{width:24,height:12}})]}),s.jsx(c,{sx:{width:1,height:10}}),s.jsx(c,{sx:{width:"calc(100% - 40px)",height:10}}),s.jsx(c,{sx:{width:"calc(100% - 80px)",height:10}})]}),r&&s.jsx(a,{sx:{p:1},children:s.jsx(c,{sx:{width:170,height:240,flexShrink:0}})})]}):s.jsxs(a,{component:v,variant:"outlined",sx:{borderRadius:2,...e},...t,children:[s.jsx(a,{sx:{p:1},children:s.jsx(c,{sx:{paddingTop:"100%"}})}),s.jsxs(a,{spacing:2,direction:"row",alignItems:"center",sx:{p:3,pt:2},children:[s.jsx(c,{variant:"circular",sx:{width:40,height:40,flexShrink:0}}),s.jsxs(a,{flexGrow:1,spacing:1,children:[s.jsx(c,{sx:{height:10}}),s.jsx(c,{sx:{width:.5,height:10}})]})]})]})}function ss({...o}){return s.jsxs(a,{...o,children:[s.jsx(c,{variant:"rectangular",sx:{height:480}}),s.jsxs(a,{sx:{width:1,maxWidth:720,mx:"auto"},children:[s.jsxs(a,{spacing:1,sx:{my:8},children:[s.jsx(c,{height:10}),s.jsx(c,{height:10,sx:{width:.9}}),s.jsx(c,{height:10,sx:{width:.8}})]}),s.jsx(c,{sx:{height:720}})]})]})}function F({post:o,index:e}){const t=S(),r=P("up","md"),{coverUrl:n,title:i,totalViews:l,totalComments:m,totalShares:x,author:h,createdAt:b}=o;return r&&(e===0||e===1||e===2)?s.jsxs(y,{children:[s.jsx(L,{alt:h.name,src:h.avatarUrl,sx:{top:24,left:24,zIndex:9,position:"absolute"}}),s.jsx(I,{title:i,createdAt:b,totalViews:l,totalShares:x,totalComments:m,index:e}),s.jsx(V,{alt:i,src:n,overlay:z(t.palette.grey[900],.48),sx:{width:1,height:360}})]}):s.jsxs(y,{children:[s.jsxs(R,{sx:{position:"relative"},children:[s.jsx(k,{sx:{left:0,zIndex:9,width:88,height:36,bottom:-16,position:"absolute"}}),s.jsx(L,{alt:h.name,src:h.avatarUrl,sx:{left:24,zIndex:9,bottom:-24,position:"absolute"}}),s.jsx(V,{alt:i,src:n,ratio:"4/3"})]}),s.jsx(I,{title:i,totalViews:l,totalComments:m,totalShares:x,createdAt:b})]})}function I({title:o,createdAt:e,totalViews:t,totalShares:r,totalComments:n,index:i}){const l=P("up","md"),m=U.post.details(o),x=i===0,h=i===1||i===2;return s.jsxs(B,{sx:{pt:6,width:1,...(x||h)&&{pt:0,zIndex:9,bottom:0,position:"absolute",color:"common.white"}},children:[s.jsx(C,{variant:"caption",component:"div",sx:{mb:1,color:"text.disabled",...(x||h)&&{opacity:.64,color:"common.white"}},children:E(e)}),s.jsx(G,{color:"inherit",component:T,href:m,children:s.jsx(A,{variant:l&&x?"h5":"subtitle2",line:2,persistent:!0,children:o})}),s.jsxs(a,{spacing:1.5,direction:"row",justifyContent:"flex-end",sx:{mt:3,typography:"caption",color:"text.disabled",...(x||h)&&{opacity:.64,color:"common.white"}},children:[s.jsxs(a,{direction:"row",alignItems:"center",children:[s.jsx(d,{icon:"eva:message-circle-fill",width:16,sx:{mr:.5}}),w(n)]}),s.jsxs(a,{direction:"row",alignItems:"center",children:[s.jsx(d,{icon:"solar:eye-bold",width:16,sx:{mr:.5}}),w(t)]}),s.jsxs(a,{direction:"row",alignItems:"center",children:[s.jsx(d,{icon:"solar:share-bold",width:16,sx:{mr:.5}}),w(r)]})]})]})}function ts({posts:o,loading:e,disabledIndex:t}){const r=s.jsx(s.Fragment,{children:[...Array(16)].map((i,l)=>s.jsx(f,{xs:12,sm:6,md:3,children:s.jsx(D,{})},l))}),n=s.jsx(s.Fragment,{children:o.map((i,l)=>s.jsx(f,{xs:12,sm:6,md:!t&&l===0?6:3,children:s.jsx(F,{post:i,index:t?void 0:l})},i.id))});return s.jsxs(s.Fragment,{children:[s.jsx(f,{container:!0,spacing:3,children:e?r:n}),o.length>8&&s.jsx(a,{alignItems:"center",sx:{mt:8,mb:{xs:10,md:15}},children:s.jsx(M,{size:"large",variant:"outlined",startIcon:s.jsx(d,{icon:"svg-spinners:12-dots-scale-rotate",width:24}),children:"Load More"})})]})}export{ts as P,q as a,X as b,Y as c,ss as d,Q as u};
