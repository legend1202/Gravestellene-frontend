import{U as R,V as A,r as i,W as g,X as D,j as e,Y as y,S as E,Z as I,v as U,M as N,G,_ as T,C as k,J as V,p as O,K as v,g as d,H as P}from"./index-CunmLLou.js";import{E as f}from"./empty-content-NdHJ5ZV0.js";import{D as z}from"./DataGrid-RTr-U8F3.js";import{G as W,a as F}from"./GridToolbarQuickFilter-bp48NLEh.js";import{G as c}from"./GridActionsCellItem-Nemqnii8.js";import"./index-jGaRA_M3.js";import"./Autocomplete-s1YegUFl.js";import"./Chip-BVGf60xL.js";import"./ClickAwayListener-4HsEc99k.js";import"./Checkbox-oddwhIQJ.js";import"./SwitchBase-hAFlUYrk.js";import"./Switch-bFYH9Y2J.js";import"./Skeleton-SbcBrwyf.js";import"./TablePagination-v6AtQ65M.js";import"./FirstPage-jMewCZH7.js";import"./TableCell-Gj9JH0iU.js";import"./FormControlLabel-L6vUYbWe.js";function H(){const o=g.admin.userList,{data:s,isLoading:a,error:r,isValidating:n}=R(o,A);return i.useMemo(()=>({users:s==null?void 0:s.result.users,usersLoading:a,usersError:r,usersValidating:n}),[s==null?void 0:s.result,r,a,n])}const _=async o=>{const s=await D.put(g.admin.userRoleUpdate,{user:o});return{data:(s==null?void 0:s.data)||[]}};function B({params:o}){return e.jsx(y,{primary:o.row.role,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function Y({params:o}){return e.jsxs(E,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(I,{alt:o.row.name,src:o.row.coverUrl,variant:"rounded",sx:{width:24,height:24,mr:2}}),e.jsx(y,{disableTypography:!0,primary:e.jsx(U,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:o.row.name})})]})}const q={category:!1},J=["category","actions"];function K(){const{t:o}=N(),s=G(),{enqueueSnackbar:a}=T(),{users:r,usersLoading:n}=H(),[p,x]=i.useState([]),[b,C]=i.useState(!1),[j,w]=i.useState(q);i.useEffect(()=>{r&&x(r)},[r]);const l=async(t,M)=>{const u=await _({id:t,role:M});if(u.data.success){a(o("update_success"));const S=r.map(m=>m.id===u.data.result.id?{...m,role:u.data.result.role}:m);x([...S]),C(!b)}else a("Update did not success")},h=[{field:"name",headerName:"Name",flex:1,minWidth:280,hideable:!1,disableColumnMenu:!0,renderCell:t=>e.jsx(Y,{params:t})},{field:"role",headerName:"Role",minWidth:280,disableColumnMenu:!0,renderCell:t=>e.jsx(B,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(c,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:eye-bold"}),label:"ADMIN",onClick:()=>l(t.row.id,"ADMIN")}),e.jsx(c,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"FELLESRAAD",onClick:()=>l(t.row.id,"FELLESRAAD")}),e.jsx(c,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"COMPANY",onClick:()=>l(t.row.id,"COMPANY")}),e.jsx(c,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"CLIENT",onClick:()=>l(t.row.id,"CLIENT")})]}],L=()=>h.filter(t=>!J.includes(t.field)).map(t=>t.field);return e.jsxs(k,{maxWidth:s.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(V,{heading:"List",links:[{name:"User",href:O.dashboard.root},{name:"List"}],sx:{mb:{xs:3,md:5}}}),e.jsx(v,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:e.jsx(z,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:p,columns:h,loading:n,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},columnVisibilityModel:j,onColumnVisibilityModelChange:t=>w(t),slots:{toolbar:()=>e.jsx(e.Fragment,{children:e.jsx(W,{children:e.jsx(F,{})})}),noRowsOverlay:()=>e.jsx(f,{title:"No Data"}),noResultsOverlay:()=>e.jsx(f,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:L}}})})]})}function xe(){return e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx("title",{children:" Admin: List of Users"})}),e.jsx(K,{})]})}export{xe as default};
