import{ay as k,j as e,B as F,g as c,v,aA as L,a6 as y,i as T,c1 as U,d1 as H,q as G,I as N,dR as V,dS as K,r as p,Z as A,L as B,T as M,b7 as Q,S as d,K as _,x as O,b5 as $,R,p as f,f as q,av as J,G as Z,C as X,J as Y,bs as D,bt as ee,H as se}from"./index-CunmLLou.js";import{o as S}from"./orderBy-iJGlJDDC.js";import{u as te}from"./use-debounce-Uz_8PNVX.js";import{P as oe,a as ne}from"./post-skeleton-1QeAaTFq.js";import{u as re,a as ie}from"./blog-Sd64g8Li.js";import{A as ae}from"./Autocomplete-s1YegUFl.js";import{c as P}from"./format-number-MlCsyGQp.js";import{T as I}from"./text-max-line-rWKJ23ZW.js";import{P as le,p as ce}from"./Pagination-2TMqmsDd.js";import"./styles-7oBl_VkY.js";import"./_baseToString-4ZcLi7aA.js";import"./_baseIteratee-7bY-_Gok.js";import"./_baseEach-dSq5AhtX.js";import"./Skeleton-SbcBrwyf.js";import"./Chip-BVGf60xL.js";import"./FirstPage-jMewCZH7.js";function de({sort:s,sortOptions:n,onSort:l}){const r=k();return e.jsxs(e.Fragment,{children:[e.jsxs(F,{disableRipple:!0,color:"inherit",onClick:r.onOpen,endIcon:e.jsx(c,{icon:r.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort By:",e.jsx(v,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:s})]}),e.jsx(L,{open:r.open,onClose:r.onClose,sx:{width:140},children:n.map(t=>e.jsx(y,{selected:s===t.value,onClick:()=>{r.onClose(),l(t.value)},children:t.label},t.value))})]})}function he({query:s,results:n,onSearch:l,hrefItem:r,loading:t}){const h=T(),x=o=>{h.push(r(o))},j=o=>{s&&o.key==="Enter"&&x(s)};return e.jsx(ae,{sx:{width:{xs:1,sm:260}},loading:t,autoHighlight:!0,popupIcon:null,options:n,onInputChange:(o,a)=>l(a),getOptionLabel:o=>o.title,noOptionsText:e.jsx(U,{query:s,sx:{bgcolor:"unset"}}),isOptionEqualToValue:(o,a)=>o.id===a.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${H.option}`]:{pl:.75}}}},renderInput:o=>e.jsx(G,{...o,placeholder:"Search...",onKeyUp:j,InputProps:{...o.InputProps,startAdornment:e.jsx(N,{position:"start",children:e.jsx(c,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[t?e.jsx(c,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,o.InputProps.endAdornment]})}}),renderOption:(o,a,{inputValue:g})=>{const b=V(a.title,g),C=K(a.title,b);return p.createElement("li",{...o,key:a.id},e.jsx(A,{alt:a.title,src:a.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},a.id),e.jsx(B,{underline:"none",onClick:()=>x(a.title),children:C.map((m,w)=>e.jsx(M,{component:"span",color:m.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:m.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:m.text},w))},g))}})}function pe({post:s}){const n=k(),l=T(),r=Q("up","sm"),{title:t,author:h,publish:x,coverUrl:j,createdAt:o,totalViews:a,totalShares:g,totalComments:b,description:C}=s;return e.jsxs(e.Fragment,{children:[e.jsxs(d,{component:_,direction:"row",children:[e.jsxs(d,{sx:{p:m=>m.spacing(3,3,2,3)},children:[e.jsxs(d,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[e.jsx(O,{variant:"soft",color:x==="published"&&"info"||"default",children:x}),e.jsx(v,{component:"span",sx:{typography:"caption",color:"text.disabled"},children:$(o)})]}),e.jsxs(d,{spacing:1,flexGrow:1,children:[e.jsx(B,{color:"inherit",component:R,href:f.dashboard.post.details(t),children:e.jsx(I,{variant:"subtitle2",line:2,children:t})}),e.jsx(I,{variant:"body2",sx:{color:"text.secondary"},children:C})]}),e.jsxs(d,{direction:"row",alignItems:"center",children:[e.jsx(q,{color:n.open?"inherit":"default",onClick:n.onOpen,children:e.jsx(c,{icon:"eva:more-horizontal-fill"})}),e.jsxs(d,{spacing:1.5,flexGrow:1,direction:"row",flexWrap:"wrap",justifyContent:"flex-end",sx:{typography:"caption",color:"text.disabled"},children:[e.jsxs(d,{direction:"row",alignItems:"center",children:[e.jsx(c,{icon:"eva:message-circle-fill",width:16,sx:{mr:.5}}),P(b)]}),e.jsxs(d,{direction:"row",alignItems:"center",children:[e.jsx(c,{icon:"solar:eye-bold",width:16,sx:{mr:.5}}),P(a)]}),e.jsxs(d,{direction:"row",alignItems:"center",children:[e.jsx(c,{icon:"solar:share-bold",width:16,sx:{mr:.5}}),P(g)]})]})]})]}),r&&e.jsxs(v,{sx:{width:180,height:240,position:"relative",flexShrink:0,p:1},children:[e.jsx(A,{alt:h.name,src:h.avatarUrl,sx:{position:"absolute",top:16,right:16,zIndex:9}}),e.jsx(J,{alt:t,src:j,sx:{height:1,borderRadius:1.5}})]})]}),e.jsxs(L,{open:n.open,onClose:n.onClose,arrow:"bottom-center",sx:{width:140},children:[e.jsxs(y,{onClick:()=>{n.onClose(),l.push(f.dashboard.post.details(t))},children:[e.jsx(c,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(y,{onClick:()=>{n.onClose(),l.push(f.dashboard.post.edit(t))},children:[e.jsx(c,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(y,{onClick:()=>{n.onClose()},sx:{color:"error.main"},children:[e.jsx(c,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})]})}function xe({posts:s,loading:n}){const l=e.jsx(e.Fragment,{children:[...Array(16)].map((t,h)=>e.jsx(oe,{variant:"horizontal"},h))}),r=e.jsx(e.Fragment,{children:s.map(t=>e.jsx(pe,{post:t},t.id))});return e.jsxs(e.Fragment,{children:[e.jsx(v,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:n?l:r}),s.length>8&&e.jsx(le,{count:8,sx:{mt:8,[`& .${ce.ul}`]:{justifyContent:"center"}}})]})}const me={publish:"all"};function ue(){const s=Z(),[n,l]=p.useState("latest"),[r,t]=p.useState(me),[h,x]=p.useState(""),j=te(h),{posts:o,postsLoading:a}=re(),{searchResults:g,searchLoading:b}=ie(j),C=fe({inputData:o,filters:r,sortBy:n}),m=p.useCallback(i=>{l(i)},[]),w=p.useCallback((i,u)=>{t(E=>({...E,[i]:u}))},[]),W=p.useCallback(i=>{x(i)},[]),z=p.useCallback((i,u)=>{w("publish",u)},[w]);return e.jsxs(X,{maxWidth:s.themeStretch?!1:"lg",children:[e.jsx(Y,{heading:"List",links:[{name:"Dashboard",href:f.dashboard.root},{name:"Blog",href:f.dashboard.post.root},{name:"List"}],action:e.jsx(F,{component:R,href:f.dashboard.post.new,variant:"contained",startIcon:e.jsx(c,{icon:"mingcute:add-line"}),children:"New Post"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(d,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},sx:{mb:{xs:3,md:5}},children:[e.jsx(he,{query:j,results:g,onSearch:W,loading:b,hrefItem:i=>f.dashboard.post.details(i)}),e.jsx(de,{sort:n,onSort:m,sortOptions:ne})]}),e.jsx(D,{value:r.publish,onChange:z,sx:{mb:{xs:3,md:5}},children:["all","published","draft"].map(i=>e.jsx(ee,{iconPosition:"end",value:i,label:i,icon:e.jsxs(O,{variant:(i==="all"||i===r.publish)&&"filled"||"soft",color:i==="published"&&"info"||"default",children:[i==="all"&&o.length,i==="published"&&o.filter(u=>u.publish==="published").length,i==="draft"&&o.filter(u=>u.publish==="draft").length]}),sx:{textTransform:"capitalize"}},i))}),e.jsx(xe,{posts:C,loading:a})]})}const fe=({inputData:s,filters:n,sortBy:l})=>{const{publish:r}=n;return l==="latest"&&(s=S(s,["createdAt"],["desc"])),l==="oldest"&&(s=S(s,["createdAt"],["asc"])),l==="popular"&&(s=S(s,["totalViews"],["desc"])),r!=="all"&&(s=s.filter(t=>t.publish===r)),s};function Oe(){return e.jsxs(e.Fragment,{children:[e.jsx(se,{children:e.jsx("title",{children:" Dashboard: Post List"})}),e.jsx(ue,{})]})}export{Oe as default};
