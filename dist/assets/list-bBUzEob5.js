import{j as e,S as w,Y as B,X as s,Z as O,u as A,b as H,k as z,G as V,r as n,c as _,d as q,e as U,o as Q,p as $,h as m,C as K,F as X,a5 as Y,K as Z,B as b,H as J}from"./index-F58UWM6d.js";import{b as ee}from"./graveyard-fuRNBAw2.js";import{G as re,d as te}from"./gravestone-gi_0JvRh.js";import{E as C}from"./empty-content-cu3d-hY6.js";import{C as ae}from"./confirm-dialog-Eyd0MEzy.js";import{R as oe}from"./rhf-select-CZ3P8hHA.js";import{G as j}from"./GridActionsCellItem-ZjyDAvNv.js";import{D as ne}from"./DataGrid-Qd0gu4hV.js";import{G as se,a as ie}from"./GridToolbarQuickFilter-cyoWmbS9.js";import"./DialogTitle-Yv6DKYq6.js";import"./dialogTitleClasses-fTeeAY48.js";import"./DialogContent-sEfmhfdt.js";import"./DialogActions-qDclrG3N.js";import"./Checkbox-LoW-zYTz.js";import"./SwitchBase-QO7WNYjK.js";import"./Chip-Bf9OfEDF.js";import"./index-AQ_QNN8Z.js";import"./Autocomplete--E0PVWeu.js";import"./ClickAwayListener-FZVsDqfR.js";import"./Switch-mI38wMsz.js";import"./Skeleton-UqJgurFx.js";import"./TablePagination-boMs0Lib.js";import"./KeyboardArrowRight-nt3KTS5I.js";import"./FirstPage-LKd4WdE0.js";import"./TableCell-6a7cWiGU.js";import"./FormControlLabel-yEUOmb-6.js";function le({params:t}){return e.jsxs(w,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(B,{alt:t.row.name,src:t.row.coverUrl,variant:"rounded",sx:{width:24,height:24,mr:2}}),e.jsx(s,{primary:t.row.name,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})]})}function de({params:t}){return e.jsx(s,{primary:t.row.birthday,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function pe({params:t}){return e.jsx(s,{primary:t.row.deceasedDate,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function ce({params:t}){return e.jsx(s,{primary:t.row.ageOnDeath,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function me({params:t}){return e.jsx(s,{primary:t.row.field,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function ue({params:t}){return e.jsx(s,{primary:t.row.row,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function ye({params:t}){return e.jsx(s,{primary:t.row.place,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function he({params:t}){return e.jsx(s,{primary:t.row.burriedWith,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}const ge={category:!1},xe=["category","actions"];function fe(){const{enqueueSnackbar:t}=O(),{t:a}=A(),l=H(),u=z(),T=V(),{graveyards:y,graveyardsLoading:h}=ee(),[d,g]=n.useState([]),[D,p]=n.useState(!1),[c,G]=n.useState([]),[P,R]=n.useState(ge),S=_().shape({id:q().required("Please select Graveyard!")}),W=n.useMemo(()=>({id:""}),[]),x=U({resolver:Q(S),defaultValues:W}),{watch:v}=x,o=v();n.useEffect(()=>{p(h)},[h]),n.useEffect(()=>{o!=null&&o.id&&I(o==null?void 0:o.id)},[o==null?void 0:o.id]);const M=async r=>{try{if((await te(r)).success){const E=d.filter(F=>F.id!==r);t("Delete success!"),g(E)}}catch(i){console.error(i)}},N=n.useCallback(()=>{console.log("delete id")},[]),k=n.useCallback(r=>{u.push($.fellesraad.gravestone.edit(r))},[u]),f=[{field:"name",headerName:a("Name"),flex:1,minWidth:220,hideable:!1,disableColumnMenu:!0,renderCell:r=>e.jsx(le,{params:r})},{field:"birthday",headerName:a("Birthday"),minWidth:150,disableColumnMenu:!0,renderCell:r=>e.jsx(de,{params:r})},{field:"deceasedDate",headerName:a("deceased_date"),minWidth:150,disableColumnMenu:!0,renderCell:r=>e.jsx(pe,{params:r})},{field:"buriedDate",headerName:a("Death Age"),minWidth:150,disableColumnMenu:!0,renderCell:r=>e.jsx(ce,{params:r})},{field:"homeTown",headerName:a("Field"),minWidth:180,disableColumnMenu:!0,renderCell:r=>e.jsx(me,{params:r})},{field:"graveSiteNumber",headerName:a("Row"),minWidth:110,disableColumnMenu:!0,renderCell:r=>e.jsx(ue,{params:r})},{field:"quarter",headerName:a("Place"),minWidth:110,disableColumnMenu:!0,renderCell:r=>e.jsx(ye,{params:r})},{field:"buriedWith",headerName:a("Buried With"),minWidth:280,disableColumnMenu:!0,renderCell:r=>e.jsx(he,{params:r})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",minWidth:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:r=>[e.jsx(j,{showInMenu:!0,icon:e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),label:a("delete"),onClick:()=>M(r.row.id)}),e.jsx(j,{showInMenu:!0,icon:e.jsx(m,{icon:"solar:pen-bold"}),label:a("Edit"),onClick:()=>k(r.row.id)})]}],I=async r=>{p(!0);const i=await re(r);i&&g(i==null?void 0:i.gravestones),p(!1)},L=()=>f.filter(r=>!xe.includes(r.field)).map(r=>r.field);return e.jsxs(e.Fragment,{children:[e.jsxs(K,{maxWidth:T.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[y&&e.jsx(X,{methods:x,children:e.jsx(oe,{fullWidth:!0,name:"id",label:a("Graveyard"),InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},sx:{mb:1},children:y.map(r=>(r==null?void 0:r.approved)&&e.jsx(Y,{value:r==null?void 0:r.id,children:r==null?void 0:r.name},r.id))})}),e.jsx(Z,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:d&&e.jsx(ne,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:d,columns:f,loading:D,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:r=>{G(r)},columnVisibilityModel:P,onColumnVisibilityModelChange:r=>R(r),slots:{toolbar:()=>e.jsxs(se,{children:[e.jsx(ie,{}),e.jsx(w,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:!!c.length&&e.jsxs(b,{size:"small",color:"error",startIcon:e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),onClick:l.onTrue,children:["Delete (",c.length,")"]})})]}),noRowsOverlay:()=>e.jsx(C,{title:"No Data"}),noResultsOverlay:()=>e.jsx(C,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:L}}})})]}),e.jsx(ae,{open:l.value,onClose:l.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",c.length," "]})," items?"]}),action:e.jsx(b,{variant:"contained",color:"error",onClick:()=>{N(),l.onFalse()},children:"Delete"})})]})}function qe(){return e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx("title",{children:" Dashboard: Gravestone List"})}),e.jsx(fe,{})]})}export{qe as default};
