import{j as e,S as C,s as F,q as i,w as H,t as B,a as _,i as A,v as q,r as n,c as z,b as Q,d as U,o as V,p as y,g as c,C as $,x as J,J as u,R as K,F as X,Q as Y,y as Z,H as ee}from"./index-6zkZJZ_0.js";import{G as re}from"./gravestone--dwTcB2E.js";import{u as te,f as ae}from"./graveyard-bFbxtmTr.js";import{E as w}from"./empty-content-HvT411P_.js";import{C as oe}from"./confirm-dialog-6QspZdBX.js";import{R as se}from"./rhf-select-pfcwEhwZ.js";import{G as j}from"./GridActionsCellItem-4URAVLzW.js";import{D as ne}from"./DataGrid-0oOUlr-i.js";import{G as ie,a as le}from"./GridToolbarQuickFilter-iJy9M-GH.js";import"./DialogTitle-3doVjUE3.js";import"./dialogTitleClasses-baFG-5F_.js";import"./DialogContent-tTgirbD6.js";import"./DialogActions-5QtUG1M-.js";import"./Checkbox-17oiO5Jt.js";import"./SwitchBase-h1P8VXs0.js";import"./Chip-_NPTmUIn.js";import"./index-vZ0e5K7Y.js";import"./Autocomplete-FLEbJoTZ.js";import"./ClickAwayListener-HHCnqjVS.js";import"./Switch-pw_Y52P_.js";import"./Skeleton-hlsj9s3X.js";import"./TablePagination-wOOsGPl3.js";import"./FirstPage-iqsUhMfo.js";import"./TableCell-3UvXiDOO.js";import"./FormControlLabel-hLKdCECC.js";function de({params:t}){return e.jsxs(C,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(F,{alt:t.row.name,src:t.row.coverUrl,variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(i,{primary:t.row.name,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})]})}function ce({params:t}){return e.jsx(i,{primary:t.row.birthday,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function pe({params:t}){return e.jsx(i,{primary:t.row.deceasedDate,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function me({params:t}){return e.jsx(i,{primary:t.row.buriedDate,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function ye({params:t}){return e.jsx(i,{primary:t.row.homeTown,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function ue({params:t}){return e.jsx(i,{primary:t.row.graveSiteNumber,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function he({params:t}){return e.jsx(i,{primary:t.row.quarter,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}const l=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],ge={category:!1},xe=["category","actions"];function fe(){const{enqueueSnackbar:t}=H(),{t:a}=B(),d=_(),h=A(),v=q(),{graveyards:g,graveyardsLoading:S}=te(),[p,x]=n.useState([]),[m,T]=n.useState([]),[D,G]=n.useState(ge),P=z().shape({id:Q().required("Please select Graveyard!")}),R=n.useMemo(()=>({id:""}),[]),f=U({resolver:V(P),defaultValues:R}),{watch:I}=f,o=I();n.useEffect(()=>{o!=null&&o.id&&O(o==null?void 0:o.id)},[o==null?void 0:o.id]);const N=async r=>{try{if((await ae(r)).success){const W=p.filter(E=>E.id!==r);t("Delete success!"),x(W)}}catch(s){console.error(s)}},k=n.useCallback(()=>{console.log("delete id")},[]),L=n.useCallback(r=>{h.push(y.fellesraad.gravestone.edit(r))},[h]),b=[{field:"name",headerName:a("Name"),flex:1,minWidth:220,hideable:!1,renderCell:r=>e.jsx(de,{params:r})},{field:"birthday",headerName:a("Birthday"),minWidth:150,renderCell:r=>e.jsx(ce,{params:r})},{field:"deceasedDate",headerName:a("deceased_date"),width:150,type:"singleSelect",editable:!0,valueOptions:l,renderCell:r=>e.jsx(pe,{params:r})},{field:"buriedDate",headerName:a("buried_date"),width:150,type:"singleSelect",editable:!0,valueOptions:l,renderCell:r=>e.jsx(me,{params:r})},{field:"homeTown",headerName:a("Hometown"),width:180,type:"singleSelect",editable:!0,valueOptions:l,renderCell:r=>e.jsx(ye,{params:r})},{field:"graveSiteNumber",headerName:a("gravesite_number"),width:110,type:"singleSelect",editable:!0,valueOptions:l,renderCell:r=>e.jsx(ue,{params:r})},{field:"quarter",headerName:a("Quarter"),width:110,type:"singleSelect",editable:!0,valueOptions:l,renderCell:r=>e.jsx(he,{params:r})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:r=>[e.jsx(j,{showInMenu:!0,icon:e.jsx(c,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>N(r.row.id)}),e.jsx(j,{showInMenu:!0,icon:e.jsx(c,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>L(r.row.id)})]}],O=async r=>{const s=await re(r);s&&x(s==null?void 0:s.gravestones)},M=()=>b.filter(r=>!xe.includes(r.field)).map(r=>r.field);return e.jsxs(e.Fragment,{children:[e.jsxs($,{maxWidth:v.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(J,{heading:a("List"),links:[{name:a("Gravestone"),href:y.fellesraad.gravestone.create},{name:a("List")}],action:e.jsx(u,{component:K,href:y.fellesraad.gravestone.create,variant:"contained",startIcon:e.jsx(c,{icon:"mingcute:add-line"}),children:a("new_gravestone")}),sx:{mb:{xs:3,md:5}}}),g&&e.jsx(X,{methods:f,children:e.jsx(se,{fullWidth:!0,name:"id",label:a("Graveyard"),InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},sx:{mb:1},children:g.map(r=>(r==null?void 0:r.approved)&&e.jsx(Y,{value:r==null?void 0:r.id,children:r==null?void 0:r.name},r.id))})}),e.jsx(Z,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:p&&e.jsx(ne,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:p,columns:b,loading:S,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:r=>{T(r)},columnVisibilityModel:D,onColumnVisibilityModelChange:r=>G(r),slots:{toolbar:()=>e.jsxs(ie,{children:[e.jsx(le,{}),e.jsx(C,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:!!m.length&&e.jsxs(u,{size:"small",color:"error",startIcon:e.jsx(c,{icon:"solar:trash-bin-trash-bold"}),onClick:d.onTrue,children:["Delete (",m.length,")"]})})]}),noRowsOverlay:()=>e.jsx(w,{title:"No Data"}),noResultsOverlay:()=>e.jsx(w,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:M}}})})]}),e.jsx(oe,{open:d.value,onClose:d.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",m.length," "]})," items?"]}),action:e.jsx(u,{variant:"contained",color:"error",onClick:()=>{k(),d.onFalse()},children:"Delete"})})]})}function ze(){return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx("title",{children:" Dashboard: Gravestone List"})}),e.jsx(fe,{})]})}export{ze as default};
