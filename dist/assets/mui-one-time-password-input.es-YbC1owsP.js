import{t as Y,bO as g,j as b,B as _}from"./index-tv0ZIiTC.js";import{T as ee}from"./TextField-MR0F-eFr.js";const te=Y(ee)`
  input {
    text-align: center;
  }
`,ne={TextFieldStyled:te},re=r=>b.jsx(ne.TextFieldStyled,{...r}),v={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",home:"Home",end:"End"};function ae(r,l){return r<=0?[]:Array.from({length:r},l)}function le(r,l,i){return r.map((o,h)=>l===h?i:o)}function $(r){return r.join("")}function L(r,l){return[...r,l]}function ce(r,l,i){return r.reduce((o,h,c)=>{const{characters:C,restArrayMerged:s}=o;if(c<i)return{restArrayMerged:s,characters:L(C,h)};const[R,...F]=s;return{restArrayMerged:F,characters:L(C,R||"")}},{restArrayMerged:l,characters:[]}).characters}function oe(r){return r.split("")}function q(r){const l=g.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return g.useInsertionEffect(()=>{l.current=r}),g.useCallback((...i)=>{var o;return(o=l.current)==null?void 0:o.call(l,...i)},[])}const se=()=>!0;g.forwardRef((r,l)=>{const{value:i="",length:o=4,autoFocus:h=!1,onChange:c,TextFieldsProps:C,onComplete:s,validateChar:R=se,className:F,onBlur:k,...z}=r,G=g.useRef(i),B=q(s),m=q(e=>{const t=e.slice(0,o);return{isCompleted:t.length===o,finalValue:t}}),{onPaste:w,onFocus:I,onKeyDown:T,className:J,placeholder:A,onBlur:M,...K}=C||{};g.useEffect(()=>{const{isCompleted:e,finalValue:t}=m(G.current);e&&B(t)},[o,B,m]);const f=ae(o,(e,t)=>({character:i[t]||"",inputRef:g.createRef()})),E=e=>f.findIndex(({inputRef:t})=>t.current===e),N=()=>f.map(({character:e})=>e),O=(e,t)=>{const n=le(N(),e,t);return $(n)},Q=e=>{var t,n;(n=(t=f[e])==null?void 0:t.inputRef.current)==null||n.focus()},u=e=>{var t,n;(n=(t=f[e])==null?void 0:t.inputRef.current)==null||n.select()},P=e=>{e+1!==o&&(f[e+1].character?u(e+1):Q(e+1))},S=(e,t)=>typeof R!="function"?!0:R(e,t),U=e=>{const t=E(e.target);if(t===0&&e.target.value.length>1){const{finalValue:y,isCompleted:j}=m(e.target.value);c==null||c(y),j&&(s==null||s(y)),u(y.length-1);return}const n=e.target.value[0]||"";let p=n;p&&!S(p,t)&&(p="");const a=O(t,p);c==null||c(a);const{isCompleted:x,finalValue:d}=m(a);x&&(s==null||s(d)),p!==""?a.length-1<t?u(a.length):P(t):n===""&&a.length<=t&&u(t-1)},X=e=>{e.preventDefault(),e.target.select(),I==null||I(e)},H=e=>{const t=e.target,n=t.selectionStart,p=t.selectionEnd,a=E(t),x=n===0&&p===0;if(t.value===e.key)e.preventDefault(),P(a);else if(v.backspace===e.key){if(!t.value)e.preventDefault(),u(a-1);else if(x){e.preventDefault();const d=O(a,"");c==null||c(d),d.length<=a&&u(a-1)}}else v.left===e.key?(e.preventDefault(),u(a-1)):v.right===e.key?(e.preventDefault(),u(a+1)):v.home===e.key?(e.preventDefault(),u(0)):v.end===e.key&&(e.preventDefault(),u(f.length-1));T==null||T(e)},Z=e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain"),n=e.target,p=f.findIndex(({character:D,inputRef:V})=>D===""||V.current===n),a=N(),x=ce(a,oe(t),p).map((D,V)=>S(D,V)?D:""),d=$(x);c==null||c(d);const{isCompleted:y,finalValue:j}=m(d);y?(s==null||s(j),u(o-1)):u(d.length),w==null||w(e)},W=e=>{if(M==null||M(e),!f.some(({inputRef:t})=>t.current===e.relatedTarget)){const{isCompleted:t,finalValue:n}=m(i);k==null||k(n,t)}};return b.jsx(_,{display:"flex",gap:"20px",alignItems:"center",ref:l,className:`MuiOtpInput-Box ${F||""}`,...z,children:f.map(({character:e,inputRef:t},n)=>b.jsx(re,{autoFocus:h?n===0:!1,autoComplete:"one-time-code",value:e,inputRef:t,className:`MuiOtpInput-TextField MuiOtpInput-TextField-${n+1} ${J||""}`,onPaste:Z,onFocus:X,onChange:U,onKeyDown:H,onBlur:W,placeholder:typeof A=="function"?A(n):A,...K},n))})});
