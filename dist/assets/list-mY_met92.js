import{ax as k,j as e,B as T,h as c,v,az as F,a5 as y,k as L,bT as U,c_ as H,s as G,I as N,dO as V,dP as _,r as p,Y as B,L as O,T as K,b2 as M,S as d,K as Q,x as A,R,p as f,g as $,au as J,G as Y,C as q,J as X,H as Z}from"./index-HKvYvq3j.js";import{o as S}from"./orderBy-IT5A0BSA.js";import{u as D}from"./use-debounce-N1XFoyE6.js";import{P as ee,a as se}from"./post-skeleton-zebmaFoK.js";import{u as te,a as oe}from"./blog-9rPbcuP9.js";import{A as ne}from"./Autocomplete-pGPdnYFd.js";import{c as re}from"./format-time-nXOmxoul.js";import{c as P}from"./format-number-atgkyq5m.js";import{T as I}from"./text-max-line-zI3ZlCg5.js";import{P as ie,p as ae}from"./Pagination-VC71Jdfi.js";import{T as le,a as ce}from"./Tabs-QqpgItPJ.js";import"./styles-8o45jqZe.js";import"./_baseToString-Sg5xqm4i.js";import"./_baseIteratee-iidIzD2y.js";import"./_baseEach-cAnoUAeb.js";import"./Skeleton-yXkKr8fp.js";import"./Chip-0IbGJdtD.js";import"./FirstPage-DSIFeLwz.js";import"./KeyboardArrowRight-bbyronaV.js";function de({sort:s,sortOptions:n,onSort:l}){const r=k();return e.jsxs(e.Fragment,{children:[e.jsxs(T,{disableRipple:!0,color:"inherit",onClick:r.onOpen,endIcon:e.jsx(c,{icon:r.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort By:",e.jsx(v,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:s})]}),e.jsx(F,{open:r.open,onClose:r.onClose,sx:{width:140},children:n.map(t=>e.jsx(y,{selected:s===t.value,onClick:()=>{r.onClose(),l(t.value)},children:t.label},t.value))})]})}function he({query:s,results:n,onSearch:l,hrefItem:r,loading:t}){const h=L(),x=o=>{h.push(r(o))},j=o=>{s&&o.key==="Enter"&&x(s)};return e.jsx(ne,{sx:{width:{xs:1,sm:260}},loading:t,autoHighlight:!0,popupIcon:null,options:n,onInputChange:(o,a)=>l(a),getOptionLabel:o=>o.title,noOptionsText:e.jsx(U,{query:s,sx:{bgcolor:"unset"}}),isOptionEqualToValue:(o,a)=>o.id===a.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${H.option}`]:{pl:.75}}}},renderInput:o=>e.jsx(G,{...o,placeholder:"Search...",onKeyUp:j,InputProps:{...o.InputProps,startAdornment:e.jsx(N,{position:"start",children:e.jsx(c,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[t?e.jsx(c,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,o.InputProps.endAdornment]})}}),renderOption:(o,a,{inputValue:g})=>{const b=V(a.title,g),C=_(a.title,b);return p.createElement("li",{...o,key:a.id},e.jsx(B,{alt:a.title,src:a.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},a.id),e.jsx(O,{underline:"none",onClick:()=>x(a.title),children:C.map((m,w)=>e.jsx(K,{component:"span",color:m.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:m.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:m.text},w))},g))}})}function pe({post:s}){const n=k(),l=L(),r=M("up","sm"),{title:t,author:h,publish:x,coverUrl:j,createdAt:o,totalViews:a,totalShares:g,totalComments:b,description:C}=s;return e.jsxs(e.Fragment,{children:[e.jsxs(d,{component:Q,direction:"row",children:[e.jsxs(d,{sx:{p:m=>m.spacing(3,3,2,3)},children:[e.jsxs(d,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[e.jsx(A,{variant:"soft",color:x==="published"&&"info"||"default",children:x}),e.jsx(v,{component:"span",sx:{typography:"caption",color:"text.disabled"},children:re(o)})]}),e.jsxs(d,{spacing:1,flexGrow:1,children:[e.jsx(O,{color:"inherit",component:R,href:f.dashboard.post.details(t),children:e.jsx(I,{variant:"subtitle2",line:2,children:t})}),e.jsx(I,{variant:"body2",sx:{color:"text.secondary"},children:C})]}),e.jsxs(d,{direction:"row",alignItems:"center",children:[e.jsx($,{color:n.open?"inherit":"default",onClick:n.onOpen,children:e.jsx(c,{icon:"eva:more-horizontal-fill"})}),e.jsxs(d,{spacing:1.5,flexGrow:1,direction:"row",flexWrap:"wrap",justifyContent:"flex-end",sx:{typography:"caption",color:"text.disabled"},children:[e.jsxs(d,{direction:"row",alignItems:"center",children:[e.jsx(c,{icon:"eva:message-circle-fill",width:16,sx:{mr:.5}}),P(b)]}),e.jsxs(d,{direction:"row",alignItems:"center",children:[e.jsx(c,{icon:"solar:eye-bold",width:16,sx:{mr:.5}}),P(a)]}),e.jsxs(d,{direction:"row",alignItems:"center",children:[e.jsx(c,{icon:"solar:share-bold",width:16,sx:{mr:.5}}),P(g)]})]})]})]}),r&&e.jsxs(v,{sx:{width:180,height:240,position:"relative",flexShrink:0,p:1},children:[e.jsx(B,{alt:h.name,src:h.avatarUrl,sx:{position:"absolute",top:16,right:16,zIndex:9}}),e.jsx(J,{alt:t,src:j,sx:{height:1,borderRadius:1.5}})]})]}),e.jsxs(F,{open:n.open,onClose:n.onClose,arrow:"bottom-center",sx:{width:140},children:[e.jsxs(y,{onClick:()=>{n.onClose(),l.push(f.dashboard.post.details(t))},children:[e.jsx(c,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(y,{onClick:()=>{n.onClose(),l.push(f.dashboard.post.edit(t))},children:[e.jsx(c,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(y,{onClick:()=>{n.onClose()},sx:{color:"error.main"},children:[e.jsx(c,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})]})}function xe({posts:s,loading:n}){const l=e.jsx(e.Fragment,{children:[...Array(16)].map((t,h)=>e.jsx(ee,{variant:"horizontal"},h))}),r=e.jsx(e.Fragment,{children:s.map(t=>e.jsx(pe,{post:t},t.id))});return e.jsxs(e.Fragment,{children:[e.jsx(v,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:n?l:r}),s.length>8&&e.jsx(ie,{count:8,sx:{mt:8,[`& .${ae.ul}`]:{justifyContent:"center"}}})]})}const me={publish:"all"};function ue(){const s=Y(),[n,l]=p.useState("latest"),[r,t]=p.useState(me),[h,x]=p.useState(""),j=D(h),{posts:o,postsLoading:a}=te(),{searchResults:g,searchLoading:b}=oe(j),C=fe({inputData:o,filters:r,sortBy:n}),m=p.useCallback(i=>{l(i)},[]),w=p.useCallback((i,u)=>{t(E=>({...E,[i]:u}))},[]),W=p.useCallback(i=>{x(i)},[]),z=p.useCallback((i,u)=>{w("publish",u)},[w]);return e.jsxs(q,{maxWidth:s.themeStretch?!1:"lg",children:[e.jsx(X,{heading:"List",links:[{name:"Dashboard",href:f.dashboard.root},{name:"Blog",href:f.dashboard.post.root},{name:"List"}],action:e.jsx(T,{component:R,href:f.dashboard.post.new,variant:"contained",startIcon:e.jsx(c,{icon:"mingcute:add-line"}),children:"New Post"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(d,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},sx:{mb:{xs:3,md:5}},children:[e.jsx(he,{query:j,results:g,onSearch:W,loading:b,hrefItem:i=>f.dashboard.post.details(i)}),e.jsx(de,{sort:n,onSort:m,sortOptions:se})]}),e.jsx(le,{value:r.publish,onChange:z,sx:{mb:{xs:3,md:5}},children:["all","published","draft"].map(i=>e.jsx(ce,{iconPosition:"end",value:i,label:i,icon:e.jsxs(A,{variant:(i==="all"||i===r.publish)&&"filled"||"soft",color:i==="published"&&"info"||"default",children:[i==="all"&&o.length,i==="published"&&o.filter(u=>u.publish==="published").length,i==="draft"&&o.filter(u=>u.publish==="draft").length]}),sx:{textTransform:"capitalize"}},i))}),e.jsx(xe,{posts:C,loading:a})]})}const fe=({inputData:s,filters:n,sortBy:l})=>{const{publish:r}=n;return l==="latest"&&(s=S(s,["createdAt"],["desc"])),l==="oldest"&&(s=S(s,["createdAt"],["asc"])),l==="popular"&&(s=S(s,["totalViews"],["desc"])),r!=="all"&&(s=s.filter(t=>t.publish===r)),s};function ze(){return e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx("title",{children:" Dashboard: Post List"})}),e.jsx(ue,{})]})}export{ze as default};
