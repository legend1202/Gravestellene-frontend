import{b as S,j as e,Y as I,S as d,T as j,v,s as T,B as w,h as a,c as y,d as g,e as B,o as D,F as $,f as A,g as p,i as F,ax as E,R as b,q as C,az as U,a5 as q,r as P,p as f,be as G,m as W,C as H,N as O,H as z}from"./index-HKvYvq3j.js";import"./_baseToString-Sg5xqm4i.js";import"./text-max-line-zI3ZlCg5.js";import"./styles-8o45jqZe.js";import{c as N}from"./format-number-atgkyq5m.js";import{b as M}from"./blog-9rPbcuP9.js";import{b as R,c as V}from"./post-skeleton-zebmaFoK.js";import{M as _}from"./markdown-ERj8TT6_.js";import{E as Y}from"./empty-content-ikLVFtYm.js";import{P as J}from"./post-details-hero-PgRVdCSY.js";import{c as K}from"./format-time-nXOmxoul.js";import{L as Q}from"./ListItem-oJEZ1nrI.js";import{P as X}from"./Pagination-VC71Jdfi.js";import{C as Z}from"./Chip-0IbGJdtD.js";import{F as ee}from"./FormControlLabel-AwOrzazp.js";import{C as se}from"./Checkbox-vB-XJoJj.js";import{A as te}from"./AvatarGroup-mER8leOs.js";import"./Skeleton-yXkKr8fp.js";import"./Fab-bPlp_NfZ.js";import"./FirstPage-DSIFeLwz.js";import"./SwitchBase-dhyrm6Co.js";function k({name:r,avatarUrl:n,message:l,tagUser:s,postedAt:x,hasReply:o}){const c=S();return e.jsxs(Q,{sx:{p:0,pt:3,alignItems:"flex-start",...o&&{pl:8}},children:[e.jsx(I,{alt:r,src:n,sx:{mr:2,width:48,height:48}}),e.jsxs(d,{flexGrow:1,sx:{pb:3,borderBottom:h=>`solid 1px ${h.palette.divider}`},children:[e.jsx(j,{variant:"subtitle2",sx:{mb:.5},children:r}),e.jsx(j,{variant:"caption",sx:{color:"text.disabled"},children:K(x)}),e.jsxs(j,{variant:"body2",sx:{mt:1},children:[s&&e.jsxs(v,{component:"strong",sx:{mr:.5},children:["@",s]}),l]}),c.value&&e.jsx(v,{sx:{mt:2},children:e.jsx(T,{fullWidth:!0,autoFocus:!0,placeholder:"Write comment..."})})]}),!o&&e.jsx(w,{size:"small",color:c.value?"primary":"inherit",startIcon:e.jsx(a,{icon:"solar:pen-bold",width:16}),onClick:c.onToggle,sx:{right:0,position:"absolute"},children:"Reply"})]})}function re({comments:r}){return e.jsxs(e.Fragment,{children:[e.jsx(e.Fragment,{children:r.map(n=>{const{id:l,replyComment:s,name:x,users:o,message:c,avatarUrl:h,postedAt:i}=n,m=!!s.length;return e.jsxs(v,{children:[e.jsx(k,{name:x,message:c,postedAt:i,avatarUrl:h}),m&&s.map(t=>{const u=o.find(L=>L.id===t.userId);return e.jsx(k,{name:(u==null?void 0:u.name)||"",message:t.message,postedAt:t.postedAt,avatarUrl:(u==null?void 0:u.avatarUrl)||"",tagUser:t.tagUser,hasReply:!0},t.id)})]},l)})}),e.jsx(X,{count:8,sx:{my:5,mx:"auto"}})]})}function oe(){const r=y().shape({comment:g().required("Comment is required"),name:g().required("Name is required"),email:g().required("Email is required").email("Email must be a valid email address")}),n={comment:"",name:"",email:""},l=B({resolver:D(r),defaultValues:n}),{reset:s,handleSubmit:x,formState:{isSubmitting:o}}=l,c=x(async h=>{try{await new Promise(i=>setTimeout(i,500)),s(),console.info("DATA",h)}catch(i){console.error(i)}});return e.jsx($,{methods:l,onSubmit:c,children:e.jsxs(d,{spacing:3,children:[e.jsx(A,{name:"comment",placeholder:"Write some of your comments...",multiline:!0,rows:4}),e.jsxs(d,{direction:"row",alignItems:"center",children:[e.jsxs(d,{direction:"row",alignItems:"center",flexGrow:1,children:[e.jsx(p,{children:e.jsx(a,{icon:"solar:gallery-add-bold"})}),e.jsx(p,{children:e.jsx(a,{icon:"eva:attach-2-fill"})}),e.jsx(p,{children:e.jsx(a,{icon:"eva:smiling-face-fill"})})]}),e.jsx(F,{type:"submit",variant:"contained",loading:o,children:"Post comment"})]})]})})}function ae({publish:r,backLink:n,editLink:l,liveLink:s,publishOptions:x,onChangePublish:o,sx:c,...h}){const i=E();return e.jsxs(e.Fragment,{children:[e.jsxs(d,{spacing:1.5,direction:"row",sx:{mb:{xs:3,md:5},...c},...h,children:[e.jsx(w,{component:b,href:n,startIcon:e.jsx(a,{icon:"eva:arrow-ios-back-fill",width:16}),children:"Back"}),e.jsx(v,{sx:{flexGrow:1}}),r==="published"&&e.jsx(C,{title:"Go Live",children:e.jsx(p,{component:b,href:s,children:e.jsx(a,{icon:"eva:external-link-fill"})})}),e.jsx(C,{title:"Edit",children:e.jsx(p,{component:b,href:l,children:e.jsx(a,{icon:"solar:pen-bold"})})}),e.jsx(F,{color:"inherit",variant:"contained",loading:!r,loadingIndicator:"Loadingâ€¦",endIcon:e.jsx(a,{icon:"eva:arrow-ios-downward-fill"}),onClick:i.onOpen,sx:{textTransform:"capitalize"},children:r})]}),e.jsx(U,{open:i.open,onClose:i.onClose,arrow:"top-right",sx:{width:140},children:x.map(m=>e.jsxs(q,{selected:m.value===r,onClick:()=>{i.onClose(),o(m.value)},children:[m.value==="published"&&e.jsx(a,{icon:"eva:cloud-upload-fill"}),m.value==="draft"&&e.jsx(a,{icon:"solar:file-text-bold"}),m.label]},m.value))})]})}function ie({title:r}){const[n,l]=P.useState(""),{post:s,postLoading:x,postError:o}=M(r),c=P.useCallback(t=>{l(t)},[]);P.useEffect(()=>{s&&l(s==null?void 0:s.publish)},[s]);const h=e.jsx(V,{}),i=e.jsx(Y,{filled:!0,title:`${o==null?void 0:o.message}`,action:e.jsx(w,{component:b,href:f.dashboard.post.root,startIcon:e.jsx(a,{icon:"eva:arrow-ios-back-fill",width:16}),sx:{mt:3},children:"Back to List"}),sx:{py:20}}),m=s&&e.jsxs(e.Fragment,{children:[e.jsx(ae,{backLink:f.dashboard.post.root,editLink:f.dashboard.post.edit(`${s==null?void 0:s.title}`),liveLink:f.post.details(`${s==null?void 0:s.title}`),publish:n||"",onChangePublish:c,publishOptions:R}),e.jsx(J,{title:s.title,coverUrl:s.coverUrl}),e.jsxs(d,{sx:{maxWidth:720,mx:"auto",mt:{xs:5,md:10}},children:[e.jsx(j,{variant:"subtitle1",sx:{mb:5},children:s.description}),e.jsx(_,{children:s.content}),e.jsxs(d,{spacing:3,sx:{py:3,borderTop:t=>`dashed 1px ${t.palette.divider}`,borderBottom:t=>`dashed 1px ${t.palette.divider}`},children:[e.jsx(d,{direction:"row",flexWrap:"wrap",spacing:1,children:s.tags.map(t=>e.jsx(Z,{label:t,variant:"soft"},t))}),e.jsxs(d,{direction:"row",alignItems:"center",children:[e.jsx(ee,{control:e.jsx(se,{defaultChecked:!0,size:"small",color:"error",icon:e.jsx(a,{icon:"solar:heart-bold"}),checkedIcon:e.jsx(a,{icon:"solar:heart-bold"})}),label:N(s.totalFavorites),sx:{mr:1}}),e.jsx(te,{sx:{[`& .${G.avatar}`]:{width:32,height:32}},children:s.favoritePerson.map(t=>e.jsx(I,{alt:t.name,src:t.avatarUrl},t.name))})]})]}),e.jsxs(d,{direction:"row",sx:{mb:3,mt:5},children:[e.jsx(j,{variant:"h4",children:"Comments"}),e.jsxs(j,{variant:"subtitle2",sx:{color:"text.disabled"},children:["(",s.comments.length,")"]})]}),e.jsx(oe,{}),e.jsx(W,{sx:{mt:5,mb:2}}),e.jsx(re,{comments:s.comments})]})]});return e.jsxs(H,{maxWidth:!1,children:[x&&h,o&&i,s&&m]})}function Se(){const r=O(),{title:n}=r;return e.jsxs(e.Fragment,{children:[e.jsx(z,{children:e.jsx("title",{children:" Dashboard: Post Details"})}),e.jsx(ie,{title:`${n}`})]})}export{Se as default};
