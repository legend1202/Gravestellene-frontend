import{j as e,w as M,m as y,S as b,B as N,z as O,y as j,b as P,k as E,q as B,u as _,x as A,r as i,p as c,h as l,C as H,s as W,t as x,R as z,v as V,D as F,H as U}from"./index-HNXcBFmK.js";import{E as f}from"./empty-content-U1gD0OQx.js";import{f as q}from"./format-number-CyLv55jy.js";import{b as g,D as $,G as Q,a as J}from"./DataGrid-9yObnfmF.js";import"./index-D8YE_QsH.js";import"./Autocomplete-GN7x_yCw.js";import"./Chip-3avuppyl.js";import"./ClickAwayListener-ji-M59rj.js";import"./Checkbox-Ym_NGexD.js";import"./SwitchBase-jg6lkq6c.js";import"./Switch-q0S7btkt.js";import"./Skeleton-sNk2is3Y.js";import"./TablePagination-UIBZQDsN.js";import"./FirstPage-YanvF_fQ.js";import"./TableCell-RPFSynTU.js";import"./FormControlLabel-lt5zSUTX.js";function K({params:s}){return e.jsx(e.Fragment,{children:q(s.row.price)})}function X({params:s}){return e.jsx(M,{variant:"soft",color:s.row.approved&&"info"||"default",children:s.row.approved?"Approved":""})}function Y({params:s}){return e.jsx(y,{primary:s.row.description,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function Z({params:s}){return e.jsx(b,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:e.jsx(y,{disableTypography:!0,primary:e.jsx(N,{component:"div",sx:{typography:"subtitle2"},children:s.row.name}),sx:{display:"flex",flexDirection:"column"}})})}const ee=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],te={category:!1},se=["category","actions"];function re(){const{enqueueSnackbar:s}=O(),{t:r}=j(),C=P(),d=E(),w=B(),{user:o}=_();console.log(o);const{services:n,servicesLoading:v}=A(o==null?void 0:o.userId),[a,u]=i.useState([]),[p,S]=i.useState([]),[R,I]=i.useState(te),D=i.useCallback(t=>{d.push(c.fellesraad.service.edit(t))},[d]);i.useEffect(()=>{n&&n.length>0&&u(n)},[n]);const L=async t=>{try{if((await F(t)).success){const G=a.filter(T=>T.id!==t);u(G),s("Delete success!")}}catch(h){console.error(h)}},m=[{field:"name",headerName:r("service_name"),flex:1,minWidth:100,hideable:!1,renderCell:t=>e.jsx(Z,{params:t})},{field:"description",headerName:r("description"),minWidth:280,renderCell:t=>e.jsx(Y,{params:t})},{field:"price",headerName:r("price"),minWidth:280,renderCell:t=>e.jsx(K,{params:t})},{field:"publish",headerName:r("publish"),width:110,type:"singleSelect",editable:!0,valueOptions:ee,renderCell:t=>e.jsx(X,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(g,{showInMenu:!0,icon:e.jsx(l,{icon:"solar:trash-bin-trash-bold"}),label:r("delete"),onClick:()=>L(t.row.id)}),e.jsx(g,{showInMenu:!0,icon:e.jsx(l,{icon:"solar:pen-bold"}),label:r("edit"),onClick:()=>D(t.row.id)})]}],k=()=>m.filter(t=>!se.includes(t.field)).map(t=>t.field);return e.jsxs(H,{maxWidth:w.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(W,{heading:"List",links:[{name:r("service"),href:c.fellesraad.service.root},{name:r("list")}],action:e.jsx(x,{component:z,href:c.fellesraad.service.create,variant:"contained",startIcon:e.jsx(l,{icon:"mingcute:add-line"}),children:r("new_service")}),sx:{mb:{xs:3,md:5}}}),e.jsx(V,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:a&&a.length>0&&e.jsx($,{disableRowSelectionOnClick:!0,rows:a,columns:m,loading:v,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:t=>{S(t)},columnVisibilityModel:R,onColumnVisibilityModelChange:t=>I(t),slots:{toolbar:()=>e.jsxs(Q,{children:[e.jsx(J,{}),e.jsx(b,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:!!p.length&&e.jsxs(x,{size:"small",color:"error",startIcon:e.jsx(l,{icon:"solar:trash-bin-trash-bold"}),onClick:C.onTrue,children:["Delete (",p.length,")"]})})]}),noRowsOverlay:()=>e.jsx(f,{title:"No Data"}),noResultsOverlay:()=>e.jsx(f,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:k}}})})]})}function je(){const{t:s}=j();return e.jsxs(e.Fragment,{children:[e.jsx(U,{children:e.jsxs("title",{children:[" ",`${s("services")}: ${s("list_of_services")}`]})}),e.jsx(re,{})]})}export{je as default};
