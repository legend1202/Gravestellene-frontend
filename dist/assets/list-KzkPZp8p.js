import{j as e,S,Z as B,Y as n,_ as H,M as A,a as _,i as z,G as U,r as s,c as V,b as q,d as Q,o as $,p as K,g as m,C as Y,F as Z,a6 as J,K as X,B as w,H as ee}from"./index-N8SydwAL.js";import{G as re}from"./gravestone-WpFHd6L4.js";import{b as te,f as ae}from"./graveyard-vLLPM793.js";import{E as j}from"./empty-content-Ttp3qqTd.js";import{C as oe}from"./confirm-dialog-KODWt23J.js";import{R as se}from"./rhf-select-Y9ddv89c.js";import{G as C}from"./GridActionsCellItem-YhCfvTdB.js";import{D as ne}from"./DataGrid-hc9we__K.js";import{G as ie,a as le}from"./GridToolbarQuickFilter-7gGSvQkk.js";import"./DialogTitle-Wi6leAvy.js";import"./dialogTitleClasses-wwJ_Lgyq.js";import"./DialogContent-SHEs2aaE.js";import"./DialogActions-B4SxnogZ.js";import"./Checkbox-aend9-0B.js";import"./SwitchBase-GkPf3Zwx.js";import"./Chip-YnHBPfwg.js";import"./index-dPzt3bTj.js";import"./Autocomplete-pOUHWdGk.js";import"./ClickAwayListener-cYULqw4X.js";import"./Switch--DTMlivf.js";import"./Skeleton-505Etpy4.js";import"./TablePagination-w-y8Ao-s.js";import"./FirstPage-S57-CWai.js";import"./TableCell-KZJaRtgc.js";import"./FormControlLabel-kJYRDF2M.js";function de({params:t}){return e.jsxs(S,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(B,{alt:t.row.name,src:t.row.coverUrl,variant:"rounded",sx:{width:24,height:24,mr:2}}),e.jsx(n,{primary:t.row.name,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})]})}function pe({params:t}){return e.jsx(n,{primary:t.row.birthday,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function ce({params:t}){return e.jsx(n,{primary:t.row.deceasedDate,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function ye({params:t}){return e.jsx(n,{primary:t.row.ageOnDeath,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function me({params:t}){return e.jsx(n,{primary:t.row.field,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function he({params:t}){return e.jsx(n,{primary:t.row.row,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function ue({params:t}){return e.jsx(n,{primary:t.row.place,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function ge({params:t}){return e.jsx(n,{primary:t.row.burriedWith,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}const l=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],fe={category:!1},xe=["category","actions"];function be(){const{enqueueSnackbar:t}=H(),{t:a}=A(),d=_(),h=z(),v=U(),{graveyards:u,graveyardsLoading:g}=te(),[p,f]=s.useState([]),[T,c]=s.useState(!1),[y,P]=s.useState([]),[D,G]=s.useState(fe),R=V().shape({id:q().required("Please select Graveyard!")}),I=s.useMemo(()=>({id:""}),[]),x=Q({resolver:$(R),defaultValues:I}),{watch:N}=x,o=N();s.useEffect(()=>{c(g)},[g]),s.useEffect(()=>{o!=null&&o.id&&L(o==null?void 0:o.id)},[o==null?void 0:o.id]);const O=async r=>{try{if((await ae(r)).success){const E=p.filter(F=>F.id!==r);t("Delete success!"),f(E)}}catch(i){console.error(i)}},W=s.useCallback(()=>{console.log("delete id")},[]),k=s.useCallback(r=>{h.push(K.fellesraad.gravestone.edit(r))},[h]),b=[{field:"name",headerName:a("Name"),flex:1,minWidth:220,hideable:!1,renderCell:r=>e.jsx(de,{params:r})},{field:"birthday",headerName:a("Birthday"),minWidth:150,renderCell:r=>e.jsx(pe,{params:r})},{field:"deceasedDate",headerName:a("deceased_date"),width:150,type:"singleSelect",editable:!0,valueOptions:l,renderCell:r=>e.jsx(ce,{params:r})},{field:"buriedDate",headerName:a("Death Age"),width:150,type:"singleSelect",editable:!0,valueOptions:l,renderCell:r=>e.jsx(ye,{params:r})},{field:"homeTown",headerName:a("Field"),width:180,type:"singleSelect",editable:!0,valueOptions:l,renderCell:r=>e.jsx(me,{params:r})},{field:"graveSiteNumber",headerName:a("Row"),width:110,type:"singleSelect",editable:!0,valueOptions:l,renderCell:r=>e.jsx(he,{params:r})},{field:"quarter",headerName:a("Place"),width:110,type:"singleSelect",editable:!0,valueOptions:l,renderCell:r=>e.jsx(ue,{params:r})},{field:"buriedWith",headerName:a("Buried With"),width:220,type:"singleSelect",editable:!0,valueOptions:l,renderCell:r=>e.jsx(ge,{params:r})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:r=>[e.jsx(C,{showInMenu:!0,icon:e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>O(r.row.id)}),e.jsx(C,{showInMenu:!0,icon:e.jsx(m,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>k(r.row.id)})]}],L=async r=>{c(!0);const i=await re(r);i&&f(i==null?void 0:i.gravestones),c(!1)},M=()=>b.filter(r=>!xe.includes(r.field)).map(r=>r.field);return e.jsxs(e.Fragment,{children:[e.jsxs(Y,{maxWidth:v.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[u&&e.jsx(Z,{methods:x,children:e.jsx(se,{fullWidth:!0,name:"id",label:a("Graveyard"),InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},sx:{mb:1},children:u.map(r=>(r==null?void 0:r.approved)&&e.jsx(J,{value:r==null?void 0:r.id,children:r==null?void 0:r.name},r.id))})}),e.jsx(X,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:p&&e.jsx(ne,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:p,columns:b,loading:T,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:r=>{P(r)},columnVisibilityModel:D,onColumnVisibilityModelChange:r=>G(r),slots:{toolbar:()=>e.jsxs(ie,{children:[e.jsx(le,{}),e.jsx(S,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:!!y.length&&e.jsxs(w,{size:"small",color:"error",startIcon:e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),onClick:d.onTrue,children:["Delete (",y.length,")"]})})]}),noRowsOverlay:()=>e.jsx(j,{title:"No Data"}),noResultsOverlay:()=>e.jsx(j,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:M}}})})]}),e.jsx(oe,{open:d.value,onClose:d.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",y.length," "]})," items?"]}),action:e.jsx(w,{variant:"contained",color:"error",onClick:()=>{W(),d.onFalse()},children:"Delete"})})]})}function Ve(){return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx("title",{children:" Dashboard: Gravestone List"})}),e.jsx(be,{})]})}export{Ve as default};
