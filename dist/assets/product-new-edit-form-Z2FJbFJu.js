import{e as Q,aF as Y,m as Z,r as l,p as J,j as e,G as o,T as p,S as x,B as f,dE as X,dF as P,dG as u,dH as ee,ai as se,D as ae,I as C}from"./index-UlQdJV1P.js";import{c as y,a as j,e as T,d as k,b as r}from"./index.esm-cAEu_E74.js";import{u as ie,F as le}from"./form-provider-8dyUY3gl.js";import{o as ne}from"./yup-Th0LEyqb.js";import{R as me}from"./rhf-upload-A1alQ536.js";import{R as oe,a as w}from"./rhf-select-YWTufHoF.js";import{a as pe}from"./rhf-checkbox-O4e1Smjf.js";import"./mui-one-time-password-input.es-0dNzvKac.js";import{R as I}from"./rhf-switch-eseMfn8F.js";import{R as xe}from"./rhf-editor-ifkf46Xc.js";import{R as n}from"./rhf-text-field-aU6tRkgd.js";import{R as te}from"./rhf-autocomplete-juxHQvjs.js";import{C as L}from"./Card-Tpk2mypx.js";import{C as v}from"./CardHeader-SgRebtzA.js";import{C as he}from"./Chip-hqq7RYII.js";import{F as O}from"./FormControlLabel--JVKjt2-.js";import{S as D}from"./Switch-6V727Xap.js";import{L as be}from"./LoadingButton-HxvkKaQJ.js";function Ae({currentProduct:s}){const A=Q(),t=Y("up","md"),{enqueueSnackbar:E}=Z(),[g,U]=l.useState(!1),N=y().shape({name:j().required("Name is required"),images:T().min(1,"Images is required"),tags:T().min(2,"Must have at least 2 tags"),category:j().required("Category is required"),price:k().moreThan(0,"Price should not be $0.00"),description:j().required("Description is required"),taxes:k(),newLabel:y().shape({enabled:r(),content:j()}),saleLabel:y().shape({enabled:r(),content:j()})}),R=l.useMemo(()=>({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",subDescription:(s==null?void 0:s.subDescription)||"",images:(s==null?void 0:s.images)||[],code:(s==null?void 0:s.code)||"",sku:(s==null?void 0:s.sku)||"",price:(s==null?void 0:s.price)||0,quantity:(s==null?void 0:s.quantity)||0,priceSale:(s==null?void 0:s.priceSale)||0,tags:(s==null?void 0:s.tags)||[],taxes:(s==null?void 0:s.taxes)||0,gender:(s==null?void 0:s.gender)||"",category:(s==null?void 0:s.category)||"",colors:(s==null?void 0:s.colors)||[],sizes:(s==null?void 0:s.sizes)||[],newLabel:(s==null?void 0:s.newLabel)||{enabled:!1,content:""},saleLabel:(s==null?void 0:s.saleLabel)||{enabled:!1,content:""}}),[s]),F=ie({resolver:ne(N),defaultValues:R}),{reset:S,watch:q,setValue:m,handleSubmit:_,formState:{isSubmitting:G}}=F,h=q();l.useEffect(()=>{s&&S(R)},[s,R,S]),l.useEffect(()=>{g?m("taxes",0):m("taxes",(s==null?void 0:s.taxes)||0)},[s==null?void 0:s.taxes,g,m]);const H=_(async a=>{try{await new Promise(i=>setTimeout(i,500)),S(),E(s?"Update success!":"Create success!"),A.push(J.dashboard.product.root),console.info("DATA",a)}catch(i){console.error(i)}}),$=l.useCallback(a=>{const i=h.images||[],b=a.map(d=>Object.assign(d,{preview:URL.createObjectURL(d)}));m("images",[...i,...b],{shouldValidate:!0})},[m,h.images]),z=l.useCallback(a=>{var b;const i=h.images&&((b=h.images)==null?void 0:b.filter(d=>d!==a));m("images",i)},[m,h.images]),c=l.useCallback(()=>{m("images",[])},[m]),M=l.useCallback(a=>{U(a.target.checked)},[]),B=e.jsxs(e.Fragment,{children:[t&&e.jsxs(o,{md:4,children:[e.jsx(p,{variant:"h6",sx:{mb:.5},children:"Details"}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"Title, short description, image..."})]}),e.jsx(o,{xs:12,md:8,children:e.jsxs(L,{children:[!t&&e.jsx(v,{title:"Details"}),e.jsxs(x,{spacing:3,sx:{p:3},children:[e.jsx(n,{name:"name",label:"Product Name"}),e.jsx(n,{name:"subDescription",label:"Sub Description",multiline:!0,rows:4}),e.jsxs(x,{spacing:1.5,children:[e.jsx(p,{variant:"subtitle2",children:"Content"}),e.jsx(xe,{simple:!0,name:"description"})]}),e.jsxs(x,{spacing:1.5,children:[e.jsx(p,{variant:"subtitle2",children:"Images"}),e.jsx(me,{multiple:!0,thumbnail:!0,name:"images",maxSize:3145728,onDrop:$,onRemove:z,onRemoveAll:c,onUpload:()=>console.info("ON UPLOAD")})]})]})]})})]}),V=e.jsxs(e.Fragment,{children:[t&&e.jsxs(o,{md:4,children:[e.jsx(p,{variant:"h6",sx:{mb:.5},children:"Properties"}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"Additional functions and attributes..."})]}),e.jsx(o,{xs:12,md:8,children:e.jsxs(L,{children:[!t&&e.jsx(v,{title:"Properties"}),e.jsxs(x,{spacing:3,sx:{p:3},children:[e.jsxs(f,{columnGap:2,rowGap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(n,{name:"code",label:"Product Code"}),e.jsx(n,{name:"sku",label:"Product SKU"}),e.jsx(n,{name:"quantity",label:"Quantity",placeholder:"0",type:"number",InputLabelProps:{shrink:!0}}),e.jsx(oe,{native:!0,name:"category",label:"Category",InputLabelProps:{shrink:!0},children:X.map(a=>e.jsx("optgroup",{label:a.group,children:a.classify.map(i=>e.jsx("option",{value:i,children:i},i))},a.group))}),e.jsx(w,{checkbox:!0,name:"colors",label:"Colors",options:P}),e.jsx(w,{checkbox:!0,name:"sizes",label:"Sizes",options:u})]}),e.jsx(te,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,options:ee.map(a=>a),getOptionLabel:a=>a,renderOption:(a,i)=>l.createElement("li",{...a,key:i},i),renderTags:(a,i)=>a.map((b,d)=>l.createElement(he,{...i({index:d}),key:b,label:b,size:"small",color:"info",variant:"soft"}))}),e.jsxs(x,{spacing:1,children:[e.jsx(p,{variant:"subtitle2",children:"Gender"}),e.jsx(pe,{row:!0,name:"gender",spacing:2,options:se})]}),e.jsx(ae,{sx:{borderStyle:"dashed"}}),e.jsxs(x,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(I,{name:"saleLabel.enabled",label:null,sx:{m:0}}),e.jsx(n,{name:"saleLabel.content",label:"Sale Label",fullWidth:!0,disabled:!h.saleLabel.enabled})]}),e.jsxs(x,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(I,{name:"newLabel.enabled",label:null,sx:{m:0}}),e.jsx(n,{name:"newLabel.content",label:"New Label",fullWidth:!0,disabled:!h.newLabel.enabled})]})]})]})})]}),W=e.jsxs(e.Fragment,{children:[t&&e.jsxs(o,{md:4,children:[e.jsx(p,{variant:"h6",sx:{mb:.5},children:"Pricing"}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"Price related inputs"})]}),e.jsx(o,{xs:12,md:8,children:e.jsxs(L,{children:[!t&&e.jsx(v,{title:"Pricing"}),e.jsxs(x,{spacing:3,sx:{p:3},children:[e.jsx(n,{name:"price",label:"Regular Price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(C,{position:"start",children:e.jsx(f,{component:"span",sx:{color:"text.disabled"},children:"$"})})}}),e.jsx(n,{name:"priceSale",label:"Sale Price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(C,{position:"start",children:e.jsx(f,{component:"span",sx:{color:"text.disabled"},children:"$"})})}}),e.jsx(O,{control:e.jsx(D,{checked:g,onChange:M}),label:"Price includes taxes"}),!g&&e.jsx(n,{name:"taxes",label:"Tax (%)",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(C,{position:"start",children:e.jsx(f,{component:"span",sx:{color:"text.disabled"},children:"%"})})}})]})]})})]}),K=e.jsxs(e.Fragment,{children:[t&&e.jsx(o,{md:4}),e.jsxs(o,{xs:12,md:8,sx:{display:"flex",alignItems:"center"},children:[e.jsx(O,{control:e.jsx(D,{defaultChecked:!0}),label:"Publish",sx:{flexGrow:1,pl:3}}),e.jsx(be,{type:"submit",variant:"contained",size:"large",loading:G,children:s?"Save Changes":"Create Product"})]})]});return e.jsx(le,{methods:F,onSubmit:H,children:e.jsxs(o,{container:!0,spacing:3,children:[B,V,W,K]})})}export{Ae as P};
