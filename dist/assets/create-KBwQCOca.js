import{l as g,m as A,r as m,e as E,p as b,j as s,G as c,S as I,I as B,B as D,h as H,C as R,H as $}from"./index-UlQdJV1P.js";import{C as v}from"./custom-breadcrumbs-sp1nC4LS.js";import{c as G,a as d}from"./index.esm-cAEu_E74.js";import{u as L,F as M}from"./form-provider-8dyUY3gl.js";import{o as N}from"./yup-Th0LEyqb.js";import{a as T,c as V}from"./service-v7aoay0w.js";import"./image-kA5iJbJO.js";import"./mui-one-time-password-input.es-0dNzvKac.js";import"./styles-OE_XmRMH.js";import{R as l}from"./rhf-text-field-aU6tRkgd.js";import{C as z}from"./Card-Tpk2mypx.js";import{C as W}from"./CardHeader-SgRebtzA.js";import{L as J}from"./LoadingButton-HxvkKaQJ.js";import{A as K}from"./Alert-KuTKY0IR.js";import"./index-xGZjqk4p.js";import"./TextField-M4MWmVkb.js";import"./CircularProgress-Hl3FIq0g.js";import"./Close-F2EcKiHd.js";function O({currentService:e}){const{t}=g(),{enqueueSnackbar:p}=A(),[x,o]=m.useState(""),C=E(),_=G().shape({name:d().required("Name is required"),description:d().required("Description is required"),price:d().required("Price is required")}),n=m.useMemo(()=>({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",price:(e==null?void 0:e.price)||""}),[e]),h=L({resolver:N(_),defaultValues:n}),{reset:i,watch:y,handleSubmit:w,formState:{isSubmitting:q}}=h,u=y();m.useEffect(()=>{e&&i(n)},[e,n,i]);const F=w(async U=>{var f,j;try{if(e){const r={...e,...u},a=await T(r);(f=a.searchResults)!=null&&f.success?(i(),p(t("update_success"))):o(a==null?void 0:a.message)}else{const r={...u,unit:"$"},a=await V(r);(j=a.searchResults)!=null&&j.success?(i(),p(t("create_success"))):o(a==null?void 0:a.message)}C.push(b.fellesraad.service.list)}catch(r){o(r==null?void 0:r.message),console.error(r)}}),P=s.jsx(c,{xs:12,md:12,children:s.jsxs(z,{children:[s.jsx(W,{title:t("details")}),s.jsxs(I,{spacing:3,sx:{p:3},children:[s.jsx(l,{name:"name",label:t("service_name")}),s.jsx(l,{name:"description",label:t("service_description")}),s.jsx(l,{name:"price",label:t("service_price"),placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(D,{component:"span",sx:{color:"text.disabled"},children:"$"})})}})]})]})}),k=s.jsx(c,{xs:12,md:12,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:s.jsx(J,{type:"submit",variant:"contained",size:"large",loading:q,children:t(e?"save_changes":"create_service")})});return s.jsx(M,{methods:h,onSubmit:F,children:s.jsxs(c,{container:!0,spacing:3,children:[!!x&&s.jsx(K,{severity:"error",sx:{mb:3},children:x}),P,k]})})}function Q(){const{t:e}=g(),t=H();return s.jsxs(R,{maxWidth:t.themeStretch?!1:"lg",children:[s.jsx(v,{heading:e("create_my_service"),links:[{name:e("service"),href:b.fellesraad.service.root},{name:e("new_service")}],sx:{mb:{xs:3,md:5}}}),s.jsx(O,{})]})}function hs(){return s.jsxs(s.Fragment,{children:[s.jsx($,{children:s.jsx("title",{children:" Service: Create a new Service"})}),s.jsx(Q,{})]})}export{hs as default};
