import{bm as S,j as e,y,d as f,B as P,bn as v,bo as C,e as I,bp as w,bq as k,I as O,br as A,bs as B,r as c,A as L,L as T,T as j,x as W,C as F,S as R,p as E,H}from"./index-_tg0Vjne.js";import"./_baseToString-DU9o3e3j.js";import"./index-R3sdzr18.js";import"./image-SDlH-Y9m.js";import"./text-max-line-M5WjMaF2.js";import"./index.esm-zORWVp2x.js";import"./styles-GXLlqNmt.js";import"./styles-xjWQ6_Y0.js";import{u as Q,o as g}from"./use-debounce-25l1Xolg.js";import{u as U,a as K,P as M}from"./post-list-rKmllFiy.js";import{A as N}from"./Autocomplete-qcUxFr8Z.js";import{T as V}from"./TextField-ZkEZfJO9.js";import"./_baseIteratee-W96Arp6Y.js";import"./format-number-x-XRdvJl.js";import"./Card-SUD4YaWI.js";import"./CardContent-RBQyJkrP.js";import"./Skeleton-DE5mqhd_.js";import"./Close-50MXt4l6.js";import"./Chip-8y1KTROk.js";const _=[{value:"latest",label:"Latest"},{value:"popular",label:"Popular"},{value:"oldest",label:"Oldest"}];function q({sort:s,sortOptions:r,onSort:l}){const n=S();return e.jsxs(e.Fragment,{children:[e.jsxs(y,{disableRipple:!0,color:"inherit",onClick:n.onOpen,endIcon:e.jsx(f,{icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort By:",e.jsx(P,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:s})]}),e.jsx(v,{open:n.open,onClose:n.onClose,sx:{width:140},children:r.map(i=>e.jsx(C,{selected:s===i.value,onClick:()=>{n.onClose(),l(i.value)},children:i.label},i.value))})]})}function z({query:s,results:r,onSearch:l,hrefItem:n,loading:i}){const p=I(),d=t=>{p.push(n(t))},u=t=>{s&&t.key==="Enter"&&d(s)};return e.jsx(N,{sx:{width:{xs:1,sm:260}},loading:i,autoHighlight:!0,popupIcon:null,options:r,onInputChange:(t,o)=>l(o),getOptionLabel:t=>t.title,noOptionsText:e.jsx(w,{query:s,sx:{bgcolor:"unset"}}),isOptionEqualToValue:(t,o)=>t.id===o.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${k.option}`]:{pl:.75}}}},renderInput:t=>e.jsx(V,{...t,placeholder:"Search...",onKeyUp:u,InputProps:{...t.InputProps,startAdornment:e.jsx(O,{position:"start",children:e.jsx(f,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[i?e.jsx(f,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,t.InputProps.endAdornment]})}}),renderOption:(t,o,{inputValue:m})=>{const h=A(o.title,m),x=B(o.title,h);return c.createElement("li",{...t,key:o.id},e.jsx(L,{alt:o.title,src:o.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},o.id),e.jsx(T,{underline:"none",onClick:()=>d(o.title),children:x.map((a,b)=>e.jsx(j,{component:"span",color:a.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:a.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:a.text},b))},m))}})}function G(){const s=W(),[r,l]=c.useState("latest"),[n,i]=c.useState(""),p=Q(n),{posts:d,postsLoading:u}=U(),{searchResults:t,searchLoading:o}=K(p),m=$({inputData:d,sortBy:r}),h=c.useCallback(a=>{l(a)},[]),x=c.useCallback(a=>{i(a)},[]);return e.jsxs(F,{maxWidth:s.themeStretch?!1:"lg",children:[e.jsx(j,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Blog"}),e.jsxs(R,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},sx:{mb:{xs:3,md:5}},children:[e.jsx(z,{query:p,results:t,onSearch:x,loading:o,hrefItem:a=>E.post.details(a)}),e.jsx(q,{sort:r,onSort:h,sortOptions:_})]}),e.jsx(M,{posts:m,loading:u})]})}const $=({inputData:s,sortBy:r})=>r==="latest"?g(s,["createdAt"],["desc"]):r==="oldest"?g(s,["createdAt"],["asc"]):r==="popular"?g(s,["totalViews"],["desc"]):s;function he(){return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx("title",{children:" Post: List"})}),e.jsx(G,{})]})}export{he as default};
