import{j as e,w as M,m as b,k as j,S as w,n as T,B as N,p as i,z as O,b as P,q as E,r as s,h as n,C as A,s as B,t as m,R as F,v as H,H as z}from"./index-ZflU0TH8.js";import{d as U,e as W}from"./graveyard-fxAhsSf8.js";import{E as g}from"./empty-content-Oio1NjXf.js";import{C as _}from"./confirm-dialog-IuGVveKT.js";import{b as y,D as V,G as q,a as Q}from"./DataGrid-T9vfrXqW.js";import"./graveyard-details-carousel-Dacsizjj.js";import"./styles-fSQqGi-T.js";import"./DialogTitle-VBaLzGLI.js";import"./dialogTitleClasses-_5bE8Pqe.js";import"./DialogContent-e0C6WYOM.js";import"./DialogActions-SamtfVti.js";import"./index-54MLrqES.js";import"./Autocomplete-Fpb2-TpT.js";import"./Chip-SRcldNE2.js";import"./ClickAwayListener-6ifG-k6X.js";import"./Checkbox-fa7EzA2W.js";import"./SwitchBase-i_1dE2ee.js";import"./Switch-RJYk1xiQ.js";import"./Skeleton-eGmhvsbE.js";import"./TablePagination-D6KNtn0w.js";import"./FirstPage-rcPKPI73.js";import"./TableCell-ZJaHW_Up.js";import"./FormControlLabel-xlTpN8He.js";import"./use-light-box-1P-gj85r.js";import"./carousel-arrow-index-YSDMajtT.js";function $({params:o}){return e.jsx(M,{variant:"soft",color:o.row.approved&&"info"||"default",children:o.row.approved?"Approved":""})}function J({params:o}){return e.jsx(b,{primary:o.row.location,secondary:o.row.location,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function K({params:o}){const r=j(),a=l=>{r.push(i.fellesraad.graveyard.details(l))};return e.jsxs(w,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(T,{alt:o.row.name,src:o.row.coverUrl,variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(b,{disableTypography:!0,onClick:()=>a(`${o==null?void 0:o.id}`),secondary:e.jsx(N,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:o.row.name}),sx:{display:"flex",flexDirection:"column",cursor:"pointer"}})]})}const X=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],Y={category:!1},Z=["category","actions"];function ee(){const{enqueueSnackbar:o}=O(),r=P(),a=j(),l=E(),{graveyards:d,graveyardsLoading:c}=U(),[h,p]=s.useState([]),[u,C]=s.useState([]),[v,S]=s.useState(Y);s.useMemo(()=>{c||p(d)},[d,c]);const G=async t=>{try{if((await W(t)).success){const I=h.filter(L=>L.id!==t);o("Delete success!"),p(I)}}catch(f){console.error(f)}},D=s.useCallback(()=>{console.log("delete id")},[]),R=s.useCallback(t=>{a.push(i.fellesraad.graveyard.edit(t))},[a]),x=[{field:"name",headerName:"Graveyard",flex:1,minWidth:280,hideable:!1,renderCell:t=>e.jsx(K,{params:t})},{field:"location",headerName:"location",minWidth:280,renderCell:t=>e.jsx(J,{params:t})},{field:"publish",headerName:"Publish",width:110,type:"singleSelect",editable:!0,valueOptions:X,renderCell:t=>e.jsx($,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(y,{showInMenu:!0,icon:e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>G(t.row.id)}),e.jsx(y,{showInMenu:!0,icon:e.jsx(n,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>R(t.row.id)})]}],k=()=>x.filter(t=>!Z.includes(t.field)).map(t=>t.field);return e.jsxs(e.Fragment,{children:[e.jsxs(A,{maxWidth:l.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(B,{heading:"List",links:[{name:"Graveyard",href:i.dashboard.root},{name:"List"}],action:e.jsx(m,{component:F,href:i.fellesraad.graveyard.create,variant:"contained",startIcon:e.jsx(n,{icon:"mingcute:add-line"}),children:"New Graveyard"}),sx:{mb:{xs:3,md:5}}}),e.jsx(H,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:d&&e.jsx(V,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:h,columns:x,loading:c,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:t=>{C(t)},columnVisibilityModel:v,onColumnVisibilityModelChange:t=>S(t),slots:{toolbar:()=>e.jsx(e.Fragment,{children:e.jsxs(q,{children:[e.jsx(Q,{}),e.jsx(w,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:!!u.length&&e.jsxs(m,{size:"small",color:"error",startIcon:e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),onClick:r.onTrue,children:["Delete (",u.length,")"]})})]})}),noRowsOverlay:()=>e.jsx(g,{title:"No Data"}),noResultsOverlay:()=>e.jsx(g,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:k}}})})]}),e.jsx(_,{open:r.value,onClose:r.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete"," ",e.jsxs("strong",{children:[" ",u.length," "]})," items?"]}),action:e.jsx(m,{variant:"contained",color:"error",onClick:()=>{D(),r.onFalse()},children:"Delete"})})]})}function De(){return e.jsxs(e.Fragment,{children:[e.jsx(z,{children:e.jsx("title",{children:" Graveyard: List of the Graveyard"})}),e.jsx(ee,{})]})}export{De as default};
