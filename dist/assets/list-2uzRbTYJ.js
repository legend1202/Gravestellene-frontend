import{r as i,ac as X,bm as D,j as e,aa as L,y as te,l as se,ae as re,ah as le,ax as ne,bn as z,bo as E,bp as $,bq as W,a5 as S,az as ae,h as j,S as w,v as O,B as F,al as ie,x as ce,X as Y,aA as de,Y as ue,L as pe,Z as he,b as xe,k as be,G as me,t as fe,p as T,br as H,C as ge,J as Ce,R as je,K as we,H as ye}from"./index-HKvYvq3j.js";import"./_baseToString-Sg5xqm4i.js";import"./color-picker-5SlHDt91.js";import{a as ke}from"./product-OENWjYnx.js";import{E as U}from"./empty-content-ikLVFtYm.js";import{C as Pe}from"./confirm-dialog-h0wh8PUc.js";import{C as q}from"./Checkbox-vB-XJoJj.js";import{C as K}from"./Chip-0IbGJdtD.js";import{f as ve}from"./format-number-atgkyq5m.js";import{c as Se,d as Te}from"./format-time-nXOmxoul.js";import{u as Z,a as ee,b as G,g as oe,G as B,c as Re,d as Ie,e as Le,D as Fe,f as Ge}from"./DataGrid-DpAWUB_n.js";import{G as _}from"./GridActionsCellItem-LEzex8T7.js";import{G as De,a as Oe}from"./GridToolbarQuickFilter-hJ5G_Pju.js";import"./product-details-carousel-JZNguad0.js";import"./styles-8o45jqZe.js";import"./DialogTitle-FVFG90mx.js";import"./dialogTitleClasses-2bwivi4W.js";import"./DialogContent-KyTnZXMG.js";import"./DialogActions-FQcjn_My.js";import"./SwitchBase-dhyrm6Co.js";import"./index-6AoZoM6i.js";import"./Autocomplete-pGPdnYFd.js";import"./ClickAwayListener-ieEBWmID.js";import"./Switch-Hi_VICkA.js";import"./Skeleton-yXkKr8fp.js";import"./TablePagination-APv1Zc7q.js";import"./KeyboardArrowRight-bbyronaV.js";import"./FirstPage-DSIFeLwz.js";import"./TableCell-96gyKv7u.js";import"./FormControlLabel-AwOrzazp.js";import"./use-light-box-qy7CEV4w.js";import"./carousel-arrow-index-2QDXTQen.js";const Be=["onClick"],Ne=i.forwardRef(function(r,u){var x;const{onClick:c}=r,m=X(r,Be),b=D(),l=D(),s=Z(),a=ee(),p=G(s,oe),g=n=>{p.open&&p.openedPanelValue===B.columns?s.current.hidePreferences():s.current.showPreferences(B.columns,l,b),c==null||c(n)};if(a.disableColumnSelector)return null;const f=p.open&&p.panelId===l;return e.jsx(a.slots.baseButton,L({ref:u,id:b,size:"small","aria-label":s.current.getLocaleText("toolbarColumnsLabel"),"aria-haspopup":"menu","aria-expanded":f,"aria-controls":f?l:void 0,startIcon:e.jsx(a.slots.columnSelectorIcon,{})},m,{onClick:g},(x=a.slotProps)==null?void 0:x.baseButton,{children:s.current.getLocaleText("toolbarColumns")}))}),Ve=["componentsProps"],Ae=o=>{const{classes:r}=o;return re({root:["toolbarFilterList"]},Re,r)},_e=te("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(o,r)=>r.toolbarFilterList})(({theme:o})=>({margin:o.spacing(1,1,.5),padding:o.spacing(0,1)})),Me=i.forwardRef(function(r,u){var x,c;const{componentsProps:m={}}=r,b=X(r,Ve),l=m.button||{},s=Z(),a=ee(),p=G(s,Ie),g=G(s,Le),f=G(s,oe),n=Ae(a),h=D(),k=D(),R=i.useMemo(()=>{if(f.open)return s.current.getLocaleText("toolbarFiltersTooltipHide");if(p.length===0)return s.current.getLocaleText("toolbarFiltersTooltipShow");const P=d=>g[d.field].filterOperators.find(C=>C.value===d.operator).label||s.current.getLocaleText(`filterOperator${le(d.operator)}`).toString(),y=d=>{const{getValueAsString:C}=g[d.field].filterOperators.find(V=>V.value===d.operator);return C?C(d.value):d.value};return e.jsxs("div",{children:[s.current.getLocaleText("toolbarFiltersTooltipActive")(p.length),e.jsx(_e,{className:n.root,ownerState:a,children:p.map((d,C)=>L({},g[d.field]&&e.jsx("li",{children:`${g[d.field].headerName||d.field}
                  ${P(d)}
                  ${d.value!=null?y(d):""}`},C)))})]})},[s,a,f.open,p,g,n]),N=P=>{var y;const{open:d,openedPanelValue:C}=f;d&&C===B.filters?s.current.hidePreferences():s.current.showPreferences(B.filters,k,h),(y=l.onClick)==null||y.call(l,P)};if(a.disableColumnFilter)return null;const I=f.open&&f.panelId===k;return e.jsx(a.slots.baseTooltip,L({title:R,enterDelay:1e3},b,(x=a.slotProps)==null?void 0:x.baseTooltip,{children:e.jsx(a.slots.baseButton,L({ref:u,id:h,size:"small","aria-label":s.current.getLocaleText("toolbarFiltersLabel"),"aria-controls":I?k:void 0,"aria-expanded":I,"aria-haspopup":!0,startIcon:e.jsx(se,{badgeContent:p.length,color:"primary",children:e.jsx(a.slots.openFilterButtonIcon,{})})},l,{onClick:N},(c=a.slotProps)==null?void 0:c.baseButton,{children:s.current.getLocaleText("toolbarFilters")}))}))});function ze({filters:o,onFilters:r,stockOptions:u,publishOptions:x}){const c=ne(),[m,b]=i.useState(o.stock),[l,s]=i.useState(o.publish),a=i.useCallback(n=>{const{target:{value:h}}=n;b(typeof h=="string"?h.split(","):h)},[]),p=i.useCallback(n=>{const{target:{value:h}}=n;s(typeof h=="string"?h.split(","):h)},[]),g=i.useCallback(()=>{r("stock",m)},[r,m]),f=i.useCallback(()=>{r("publish",l)},[r,l]);return e.jsxs(e.Fragment,{children:[e.jsxs(z,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(E,{children:"Stock"}),e.jsx($,{multiple:!0,value:m,onChange:a,input:e.jsx(W,{label:"Stock"}),renderValue:n=>n.map(h=>h).join(", "),onClose:g,sx:{textTransform:"capitalize"},children:u.map(n=>e.jsxs(S,{value:n.value,children:[e.jsx(q,{disableRipple:!0,size:"small",checked:m.includes(n.value)}),n.label]},n.value))})]}),e.jsxs(z,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(E,{children:"Publish"}),e.jsx($,{multiple:!0,value:l,onChange:p,input:e.jsx(W,{label:"Publish"}),renderValue:n=>n.map(h=>h).join(", "),onClose:f,sx:{textTransform:"capitalize"},children:x.map(n=>e.jsxs(S,{value:n.value,children:[e.jsx(q,{disableRipple:!0,size:"small",checked:l.includes(n.value)}),n.label]},n.value))})]}),e.jsxs(ae,{open:c.open,onClose:c.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(S,{onClick:()=>{c.onClose()},children:[e.jsx(j,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(S,{onClick:()=>{c.onClose()},children:[e.jsx(j,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(S,{onClick:()=>{c.onClose()},children:[e.jsx(j,{icon:"solar:export-bold"}),"Export"]})]})]})}function Ee({filters:o,onFilters:r,onResetFilters:u,results:x,...c}){const m=i.useCallback(l=>{const s=o.stock.filter(a=>a!==l);r("stock",s)},[o.stock,r]),b=i.useCallback(l=>{const s=o.publish.filter(a=>a!==l);r("publish",s)},[o.publish,r]);return e.jsxs(w,{spacing:1.5,...c,children:[e.jsxs(O,{sx:{typography:"body2"},children:[e.jsx("strong",{children:x}),e.jsx(O,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(w,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!o.stock.length&&e.jsx(J,{label:"Stock:",children:o.stock.map(l=>e.jsx(K,{label:l,size:"small",onDelete:()=>m(l)},l))}),!!o.publish.length&&e.jsx(J,{label:"Publish:",children:o.publish.map(l=>e.jsx(K,{label:l,size:"small",onDelete:()=>b(l)},l))}),e.jsx(F,{color:"error",onClick:u,startIcon:e.jsx(j,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}function J({label:o,children:r,sx:u,...x}){return e.jsxs(w,{component:ie,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...u},...x,children:[e.jsx(O,{component:"span",sx:{typography:"subtitle2"},children:o}),e.jsx(w,{spacing:1,direction:"row",flexWrap:"wrap",children:r})]})}function $e({params:o}){return e.jsx(e.Fragment,{children:ve(o.row.price)})}function We({params:o}){return e.jsx(ce,{variant:"soft",color:o.row.publish==="published"&&"info"||"default",children:o.row.publish})}function He({params:o}){return e.jsx(Y,{primary:Se(o.row.createdAt),secondary:Te(o.row.createdAt),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function Ue({params:o}){return e.jsxs(w,{sx:{typography:"caption",color:"text.secondary"},children:[e.jsx(de,{value:o.row.available*100/o.row.quantity,variant:"determinate",color:o.row.inventoryType==="out of stock"&&"error"||o.row.inventoryType==="low stock"&&"warning"||"success",sx:{mb:1,height:6,maxWidth:80}}),!!o.row.available&&o.row.available," ",o.row.inventoryType]})}function qe({params:o}){return e.jsxs(w,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(ue,{alt:o.row.name,src:o.row.coverUrl,variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(Y,{disableTypography:!0,primary:e.jsx(pe,{noWrap:!0,color:"inherit",variant:"subtitle2",onClick:o.row.onViewRow,sx:{cursor:"pointer"},children:o.row.name}),secondary:e.jsx(O,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:o.row.category}),sx:{display:"flex",flexDirection:"column"}})]})}const Q=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],M={publish:[],stock:[]},Ke={category:!1},Je=["category","actions"];function Qe(){const{enqueueSnackbar:o}=he(),r=xe(),u=be(),x=me(),{products:c,productsLoading:m}=ke(),[b,l]=i.useState([]),[s,a]=i.useState(M),[p,g]=i.useState([]),[f,n]=i.useState(Ke);i.useEffect(()=>{c.length&&l(c)},[c]);const h=Xe({inputData:b,filters:s}),k=!fe(M,s),R=i.useCallback((t,v)=>{a(A=>({...A,[t]:v}))},[]),N=i.useCallback(()=>{a(M)},[]),I=i.useCallback(t=>{const v=b.filter(A=>A.id!==t);o("Delete success!"),l(v)},[o,b]),P=i.useCallback(()=>{const t=b.filter(v=>!p.includes(v.id));o("Delete success!"),l(t)},[o,p,b]),y=i.useCallback(t=>{u.push(T.dashboard.product.edit(t))},[u]),d=i.useCallback(t=>{u.push(T.dashboard.product.details(t))},[u]),C=[{field:"category",headerName:"Category",filterable:!1},{field:"name",headerName:"Product",flex:1,minWidth:360,hideable:!1,renderCell:t=>e.jsx(qe,{params:t})},{field:"createdAt",headerName:"Create at",width:160,renderCell:t=>e.jsx(He,{params:t})},{field:"inventoryType",headerName:"Stock",width:160,type:"singleSelect",valueOptions:H,renderCell:t=>e.jsx(Ue,{params:t})},{field:"price",headerName:"Price",width:140,editable:!0,renderCell:t=>e.jsx($e,{params:t})},{field:"publish",headerName:"Publish",width:110,type:"singleSelect",editable:!0,valueOptions:Q,renderCell:t=>e.jsx(We,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(_,{showInMenu:!0,icon:e.jsx(j,{icon:"solar:eye-bold"}),label:"View",onClick:()=>d(t.row.id)}),e.jsx(_,{showInMenu:!0,icon:e.jsx(j,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>y(t.row.id)}),e.jsx(_,{showInMenu:!0,icon:e.jsx(j,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>{I(t.row.id)},sx:{color:"error.main"}})]}],V=()=>C.filter(t=>!Je.includes(t.field)).map(t=>t.field);return e.jsxs(e.Fragment,{children:[e.jsxs(ge,{maxWidth:x.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(Ce,{heading:"List",links:[{name:"Dashboard",href:T.dashboard.root},{name:"Product",href:T.dashboard.product.root},{name:"List"}],action:e.jsx(F,{component:je,href:T.dashboard.product.new,variant:"contained",startIcon:e.jsx(j,{icon:"mingcute:add-line"}),children:"New Product"}),sx:{mb:{xs:3,md:5}}}),e.jsx(we,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:e.jsx(Fe,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:h,columns:C,loading:m,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:t=>{g(t)},columnVisibilityModel:f,onColumnVisibilityModelChange:t=>n(t),slots:{toolbar:()=>e.jsxs(e.Fragment,{children:[e.jsxs(De,{children:[e.jsx(ze,{filters:s,onFilters:R,stockOptions:H,publishOptions:Q}),e.jsx(Oe,{}),e.jsxs(w,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[!!p.length&&e.jsxs(F,{size:"small",color:"error",startIcon:e.jsx(j,{icon:"solar:trash-bin-trash-bold"}),onClick:r.onTrue,children:["Delete (",p.length,")"]}),e.jsx(Ne,{}),e.jsx(Me,{}),e.jsx(Ge,{})]})]}),k&&e.jsx(Ee,{filters:s,onFilters:R,onResetFilters:N,results:h.length,sx:{p:2.5,pt:0}})]}),noRowsOverlay:()=>e.jsx(U,{title:"No Data"}),noResultsOverlay:()=>e.jsx(U,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:V}}})})]}),e.jsx(Pe,{open:r.value,onClose:r.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",p.length," "]})," items?"]}),action:e.jsx(F,{variant:"contained",color:"error",onClick:()=>{P(),r.onFalse()},children:"Delete"})})]})}function Xe({inputData:o,filters:r}){const{stock:u,publish:x}=r;return u.length&&(o=o.filter(c=>u.includes(c.inventoryType))),x.length&&(o=o.filter(c=>x.includes(c.publish))),o}function Fo(){return e.jsxs(e.Fragment,{children:[e.jsx(ye,{children:e.jsx("title",{children:" Dashboard: Product List"})}),e.jsx(Qe,{})]})}export{Fo as default};
