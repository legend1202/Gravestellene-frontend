import{i as Z,aM as K,w as Q,r as l,c as y,b as j,dY as k,dp as w,dr as F,d as X,o as J,p as P,j as e,_ as o,T as p,y as C,X as L,S as x,B as f,e as n,dZ as u,d_ as ee,d$ as se,e0 as ae,bl as ie,a8 as le,F as ne,I as v,h as me}from"./index-Unum9nVw.js";import{R as oe}from"./rhf-upload-huAJjG2x.js";import{R as pe,a as I}from"./rhf-select-2zl-CXb9.js";import{a as xe}from"./rhf-checkbox-DerD4J4T.js";import{R as O}from"./rhf-switch-IcmT-wIY.js";import{R as te}from"./rhf-editor-79znWYyS.js";import{R as he}from"./rhf-autocomplete-sO5TDcgO.js";import{C as be}from"./Chip-uoK_dvre.js";import{F as D}from"./FormControlLabel-GN7LW6HO.js";import{S as A}from"./Switch-NmZnwyWJ.js";function Te({currentProduct:s}){const E=Z(),t=K("up","md"),{enqueueSnackbar:U}=Q(),[g,_]=l.useState(!1),N=y().shape({name:j().required("Name is required"),images:k().min(1,"Images is required"),tags:k().min(2,"Must have at least 2 tags"),category:j().required("Category is required"),price:w().moreThan(0,"Price should not be $0.00"),description:j().required("Description is required"),taxes:w(),newLabel:y().shape({enabled:F(),content:j()}),saleLabel:y().shape({enabled:F(),content:j()})}),S=l.useMemo(()=>({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",subDescription:(s==null?void 0:s.subDescription)||"",images:(s==null?void 0:s.images)||[],code:(s==null?void 0:s.code)||"",sku:(s==null?void 0:s.sku)||"",price:(s==null?void 0:s.price)||0,quantity:(s==null?void 0:s.quantity)||0,priceSale:(s==null?void 0:s.priceSale)||0,tags:(s==null?void 0:s.tags)||[],taxes:(s==null?void 0:s.taxes)||0,gender:(s==null?void 0:s.gender)||"",category:(s==null?void 0:s.category)||"",colors:(s==null?void 0:s.colors)||[],sizes:(s==null?void 0:s.sizes)||[],newLabel:(s==null?void 0:s.newLabel)||{enabled:!1,content:""},saleLabel:(s==null?void 0:s.saleLabel)||{enabled:!1,content:""}}),[s]),T=X({resolver:J(N),defaultValues:S}),{reset:R,watch:q,setValue:m,handleSubmit:r,formState:{isSubmitting:H}}=T,h=q();l.useEffect(()=>{s&&R(S)},[s,S,R]),l.useEffect(()=>{g?m("taxes",0):m("taxes",(s==null?void 0:s.taxes)||0)},[s==null?void 0:s.taxes,g,m]);const $=r(async a=>{try{await new Promise(i=>setTimeout(i,500)),R(),U(s?"Update success!":"Create success!"),E.push(P.dashboard.product.root),console.info("DATA",a)}catch(i){console.error(i)}}),G=l.useCallback(a=>{const i=h.images||[],b=a.map(d=>Object.assign(d,{preview:URL.createObjectURL(d)}));m("images",[...i,...b],{shouldValidate:!0})},[m,h.images]),z=l.useCallback(a=>{var b;const i=h.images&&((b=h.images)==null?void 0:b.filter(d=>d!==a));m("images",i)},[m,h.images]),M=l.useCallback(()=>{m("images",[])},[m]),c=l.useCallback(a=>{_(a.target.checked)},[]),B=e.jsxs(e.Fragment,{children:[t&&e.jsxs(o,{md:4,children:[e.jsx(p,{variant:"h6",sx:{mb:.5},children:"Details"}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"Title, short description, image..."})]}),e.jsx(o,{xs:12,md:8,children:e.jsxs(C,{children:[!t&&e.jsx(L,{title:"Details"}),e.jsxs(x,{spacing:3,sx:{p:3},children:[e.jsx(n,{name:"name",label:"Product Name"}),e.jsx(n,{name:"subDescription",label:"Sub Description",multiline:!0,rows:4}),e.jsxs(x,{spacing:1.5,children:[e.jsx(p,{variant:"subtitle2",children:"Content"}),e.jsx(te,{simple:!0,name:"description"})]}),e.jsxs(x,{spacing:1.5,children:[e.jsx(p,{variant:"subtitle2",children:"Images"}),e.jsx(oe,{multiple:!0,thumbnail:!0,name:"images",maxSize:3145728,onDrop:G,onRemove:z,onRemoveAll:M,onUpload:()=>console.info("ON UPLOAD")})]})]})]})})]}),V=e.jsxs(e.Fragment,{children:[t&&e.jsxs(o,{md:4,children:[e.jsx(p,{variant:"h6",sx:{mb:.5},children:"Properties"}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"Additional functions and attributes..."})]}),e.jsx(o,{xs:12,md:8,children:e.jsxs(C,{children:[!t&&e.jsx(L,{title:"Properties"}),e.jsxs(x,{spacing:3,sx:{p:3},children:[e.jsxs(f,{columnGap:2,rowGap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(n,{name:"code",label:"Product Code"}),e.jsx(n,{name:"sku",label:"Product SKU"}),e.jsx(n,{name:"quantity",label:"Quantity",placeholder:"0",type:"number",InputLabelProps:{shrink:!0}}),e.jsx(pe,{native:!0,name:"category",label:"Category",InputLabelProps:{shrink:!0},children:u.map(a=>e.jsx("optgroup",{label:a.group,children:a.classify.map(i=>e.jsx("option",{value:i,children:i},i))},a.group))}),e.jsx(I,{checkbox:!0,name:"colors",label:"Colors",options:ee}),e.jsx(I,{checkbox:!0,name:"sizes",label:"Sizes",options:se})]}),e.jsx(he,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,options:ae.map(a=>a),getOptionLabel:a=>a,renderOption:(a,i)=>l.createElement("li",{...a,key:i},i),renderTags:(a,i)=>a.map((b,d)=>l.createElement(be,{...i({index:d}),key:b,label:b,size:"small",color:"info",variant:"soft"}))}),e.jsxs(x,{spacing:1,children:[e.jsx(p,{variant:"subtitle2",children:"Gender"}),e.jsx(xe,{row:!0,name:"gender",spacing:2,options:ie})]}),e.jsx(le,{sx:{borderStyle:"dashed"}}),e.jsxs(x,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(O,{name:"saleLabel.enabled",label:null,sx:{m:0}}),e.jsx(n,{name:"saleLabel.content",label:"Sale Label",fullWidth:!0,disabled:!h.saleLabel.enabled})]}),e.jsxs(x,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(O,{name:"newLabel.enabled",label:null,sx:{m:0}}),e.jsx(n,{name:"newLabel.content",label:"New Label",fullWidth:!0,disabled:!h.newLabel.enabled})]})]})]})})]}),W=e.jsxs(e.Fragment,{children:[t&&e.jsxs(o,{md:4,children:[e.jsx(p,{variant:"h6",sx:{mb:.5},children:"Pricing"}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"Price related inputs"})]}),e.jsx(o,{xs:12,md:8,children:e.jsxs(C,{children:[!t&&e.jsx(L,{title:"Pricing"}),e.jsxs(x,{spacing:3,sx:{p:3},children:[e.jsx(n,{name:"price",label:"Regular Price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(f,{component:"span",sx:{color:"text.disabled"},children:"$"})})}}),e.jsx(n,{name:"priceSale",label:"Sale Price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(f,{component:"span",sx:{color:"text.disabled"},children:"$"})})}}),e.jsx(D,{control:e.jsx(A,{checked:g,onChange:c}),label:"Price includes taxes"}),!g&&e.jsx(n,{name:"taxes",label:"Tax (%)",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(f,{component:"span",sx:{color:"text.disabled"},children:"%"})})}})]})]})})]}),Y=e.jsxs(e.Fragment,{children:[t&&e.jsx(o,{md:4}),e.jsxs(o,{xs:12,md:8,sx:{display:"flex",alignItems:"center"},children:[e.jsx(D,{control:e.jsx(A,{defaultChecked:!0}),label:"Publish",sx:{flexGrow:1,pl:3}}),e.jsx(me,{type:"submit",variant:"contained",size:"large",loading:H,children:s?"Save Changes":"Create Product"})]})]});return e.jsx(ne,{methods:T,onSubmit:$,children:e.jsxs(o,{container:!0,spacing:3,children:[B,V,W,Y]})})}export{Te as P};
