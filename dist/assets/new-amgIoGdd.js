import{j as e,aD as F,g as G,S as t,T as y,aA as S,I as L,d as M,l as N,a6 as A,eK as R,a as E,r as b,h as B,b as H,C as W,G as _,H as z}from"./index-tWxiFnGS.js";import"./index-BmPCeV31.js";import"./_baseToString-x3HkMGK8.js";import"./image-IKMP3f3C.js";import"./color-picker-RuxaPuRd.js";import{c as U,a as r}from"./mui-one-time-password-input.es-gTOf3O1q.js";import"./styles-XJdAXeAG.js";import"./product-details-carousel-vyxyBYTn.js";import"./styles-FUtiznR6.js";import{u as V,F as $,o as K,R as i}from"./rhf-text-field-aVwXywRy.js";import{E as Q}from"./empty-content-EWjBl_hc.js";import{f as X}from"./index-2fNjG7Ft.js";import{S as f}from"./Skeleton-ZFpo9lRw.js";import{T as J}from"./TextField-uP2c0lAh.js";import{d as O}from"./graveyard-dPDcOkmn.js";import{c as Y}from"./gravestone-kwQ-G5Zv.js";import{L as Z}from"./LoadingButton-IJmnI-vK.js";import"./use-light-box-n6xFkBAS.js";import"./carousel-arrow-index-O0BijrEu.js";import"./CircularProgress-u_0a79Ly.js";function P({mail:a,selected:s,sx:d,...c}){return e.jsxs(F,{sx:{p:1,mb:.5,borderRadius:1,...s&&{bgcolor:"action.selected"},...d},...c,children:[e.jsx(G,{primary:a.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"},secondary:"Graveyard Location",secondaryTypographyProps:{noWrap:!0,component:"span",variant:"body2",color:"text.secondary"}}),e.jsx(t,{alignItems:"flex-end",sx:{ml:2,height:44},children:e.jsx(y,{noWrap:!0,variant:"body2",component:"span",sx:{mb:1.5,fontSize:12,color:"text.disabled"},children:a.cratedAt&&X(new Date(a.cratedAt),{addSuffix:!1})})})]})}function ee({sx:a,...s}){return e.jsxs(t,{spacing:2,direction:"row",alignItems:"center",sx:{py:1,...a},...s,children:[e.jsx(f,{variant:"circular",sx:{width:40,height:40}}),e.jsxs(t,{spacing:1,flexGrow:1,children:[e.jsx(f,{sx:{width:.75,height:10}}),e.jsx(f,{sx:{width:.5,height:10}})]})]})}function ae({loading:a,mails:s,openMail:d,onCloseMail:c,onClickMail:x,selectedLabelId:u,selectedMailId:h}){const l=S("up","md"),j=e.jsx(e.Fragment,{children:[...Array(8)].map((n,o)=>e.jsx(ee,{},o))}),m=e.jsx(e.Fragment,{children:s&&s.map((n,o)=>e.jsx(P,{mail:n,selected:h===n.id,onClick:()=>{x(n.id)}},o))}),p=e.jsxs(e.Fragment,{children:[e.jsx(t,{sx:{p:2},children:l?e.jsx(J,{placeholder:"Search...",InputProps:{startAdornment:e.jsx(L,{position:"start",children:e.jsx(M,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}):e.jsx(y,{variant:"h6",sx:{textTransform:"capitalize"},children:u})}),e.jsxs(N,{sx:{px:2},children:[a&&j,s&&!!s.length&&m]})]});return l?e.jsx(t,{sx:{width:320,flexShrink:0,borderRadius:1.5,bgcolor:"background.default"},children:p}):e.jsx(A,{open:d,onClose:c,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},children:p})}const se="inbox";function re({currentProduct:a}){R();const{graveyards:s,graveyardsLoading:d}=O(),x=E().get("label")||se,[u,h]=b.useState(""),l=S("up","md"),j=B(),m=H(),p=U().shape({graveyardId:r().required("graveyardId is required"),name:r().required("name is required"),gender:r().required("gender is required"),birthday:r().required("birthday is required"),deceasedDate:r().required("deceasedDate is required"),buriedDate:r().required("buriedDate is required"),quarter:r().required("quarter is required"),graveSite:r().required("graveSite is required"),homeTown:r().required("homeTown is required"),graveSiteNumber:r().required("graveSiteNumber is required")}),n=b.useMemo(()=>({graveyardId:a?a.graveyardId:"",name:a?a.name:"",gender:a?a.gender:"",birthday:a?a.birthday:"",deceasedDate:a?a.deceasedDate:"",buriedDate:a?a.buriedDate:"",quarter:a?a.quarter:"",graveSite:a?a.graveSite:"",homeTown:a?a.homeTown:"",graveSiteNumber:a?a.graveSiteNumber:""}),[a]),o=V({resolver:K(p),defaultValues:n}),{reset:ie,handleSubmit:q,formState:{isSubmitting:w}}=o,D=b.useCallback(g=>{console.log(g),h(g)},[m,x,l]);b.useEffect(()=>{s&&s.length>0&&s[0].id&&h(s[0].id)},[s]);const C=q(async g=>{try{const v=Y(g);console.log(v)}catch(v){console.error(v)}}),I=e.jsx(ae,{mails:s,loading:d,openMail:m.value,onCloseMail:m.onFalse,onClickMail:D,selectedLabelId:x,selectedMailId:u}),T=e.jsx(e.Fragment,{children:s?e.jsxs(t,{spacing:3,sx:{p:1,flex:1,justifyContent:"space-between"},children:[e.jsx(i,{name:"name",label:"Last Name and First Name"}),e.jsx(i,{name:"birthday",label:"Birthday"}),e.jsx(i,{name:"deceasedDate",label:"Deceased Date"}),e.jsx(i,{name:"buriedDate",label:"Buried Date"}),e.jsx(i,{name:"quarter",label:"Quarter"}),e.jsx(i,{name:"graveSite",label:"Grave Site"}),e.jsx(i,{name:"hometown",label:"Hometown"}),e.jsx(i,{name:"graveSiteNumber",label:"Gravesite Number"})]}):e.jsx(Q,{imgUrl:"/assets/icons/empty/ic_email_disabled.svg",sx:{borderRadius:1.5,bgcolor:"background.default",...!l&&{display:"none"}}})}),k=e.jsx(_,{xs:12,md:12,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",p:1},children:e.jsx(Z,{type:"submit",variant:"contained",size:"large",loading:w,children:a?"Save Changes":"Create Product"})});return e.jsx($,{methods:o,onSubmit:C,children:e.jsxs(W,{maxWidth:j.themeStretch?!1:"xl",children:[e.jsx(y,{variant:"h4",sx:{mb:{xs:3,md:5}},children:"Gravestone"}),e.jsxs(t,{spacing:1,sx:{p:1,borderRadius:2,overflow:"hidden",position:"relative",bgcolor:"background.neutral"},children:[e.jsxs(t,{spacing:1,direction:"row",sx:{minHeight:{md:720},height:{xs:800,md:"72vh"}},children:[I,T]}),k]})]})})}function De(){return e.jsxs(e.Fragment,{children:[e.jsx(z,{children:e.jsx("title",{children:" Dashboard: Create a new gravestone"})}),e.jsx(re,{})]})}export{De as default};
