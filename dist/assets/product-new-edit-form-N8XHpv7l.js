import{k as Z,b2 as Q,Z as Y,r as l,c as y,d,bs as T,bj as w,bt as F,e as J,o as X,p as P,j as e,M as o,T as p,K as C,ai as v,S as x,v as f,f as n,bu as u,bv as ee,bw as se,bx as ae,by as ie,m as le,F as ne,I as L,i as me}from"./index-F58UWM6d.js";import{R as oe}from"./rhf-upload-w6ayJQZC.js";import{R as pe,a as I}from"./rhf-select-CZ3P8hHA.js";import{R as xe}from"./rhf-checkbox-McPdbg24.js";import{R as O}from"./rhf-switch-YeEpfKUe.js";import{R as te}from"./rhf-editor-BduiPwIF.js";import{R as be}from"./rhf-autocomplete-FL3X_1RD.js";import{C as he}from"./Chip-Bf9OfEDF.js";import{F as D}from"./FormControlLabel-yEUOmb-6.js";import{S as A}from"./Switch-mI38wMsz.js";function ke({currentProduct:s}){const E=Z(),t=Q("up","md"),{enqueueSnackbar:U}=Y(),[g,N]=l.useState(!1),q=y().shape({name:d().required("Name is required"),images:T().min(1,"Images is required"),tags:T().min(2,"Must have at least 2 tags"),category:d().required("Category is required"),price:w().moreThan(0,"Price should not be $0.00"),description:d().required("Description is required"),taxes:w(),newLabel:y().shape({enabled:F(),content:d()}),saleLabel:y().shape({enabled:F(),content:d()})}),R=l.useMemo(()=>({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",subDescription:(s==null?void 0:s.subDescription)||"",images:(s==null?void 0:s.images)||[],code:(s==null?void 0:s.code)||"",sku:(s==null?void 0:s.sku)||"",price:(s==null?void 0:s.price)||0,quantity:(s==null?void 0:s.quantity)||0,priceSale:(s==null?void 0:s.priceSale)||0,tags:(s==null?void 0:s.tags)||[],taxes:(s==null?void 0:s.taxes)||0,gender:(s==null?void 0:s.gender)||"",category:(s==null?void 0:s.category)||"",colors:(s==null?void 0:s.colors)||[],sizes:(s==null?void 0:s.sizes)||[],newLabel:(s==null?void 0:s.newLabel)||{enabled:!1,content:""},saleLabel:(s==null?void 0:s.saleLabel)||{enabled:!1,content:""}}),[s]),k=J({resolver:X(q),defaultValues:R}),{reset:S,watch:_,setValue:m,handleSubmit:H,formState:{isSubmitting:r}}=k,b=_();l.useEffect(()=>{s&&S(R)},[s,R,S]),l.useEffect(()=>{g?m("taxes",0):m("taxes",(s==null?void 0:s.taxes)||0)},[s==null?void 0:s.taxes,g,m]);const G=H(async a=>{try{await new Promise(i=>setTimeout(i,500)),S(),U(s?"Update success!":"Create success!"),E.push(P.dashboard.product.root),console.info("DATA",a)}catch(i){console.error(i)}}),$=l.useCallback(a=>{const i=b.images||[],h=a.map(j=>Object.assign(j,{preview:URL.createObjectURL(j)}));m("images",[...i,...h],{shouldValidate:!0})},[m,b.images]),z=l.useCallback(a=>{var h;const i=b.images&&((h=b.images)==null?void 0:h.filter(j=>j!==a));m("images",i)},[m,b.images]),M=l.useCallback(()=>{m("images",[])},[m]),c=l.useCallback(a=>{N(a.target.checked)},[]),V=e.jsxs(e.Fragment,{children:[t&&e.jsxs(o,{md:4,children:[e.jsx(p,{variant:"h6",sx:{mb:.5},children:"Details"}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"Title, short description, image..."})]}),e.jsx(o,{xs:12,md:8,children:e.jsxs(C,{children:[!t&&e.jsx(v,{title:"Details"}),e.jsxs(x,{spacing:3,sx:{p:3},children:[e.jsx(n,{name:"name",label:"Product Name"}),e.jsx(n,{name:"subDescription",label:"Sub Description",multiline:!0,rows:4}),e.jsxs(x,{spacing:1.5,children:[e.jsx(p,{variant:"subtitle2",children:"Content"}),e.jsx(te,{simple:!0,name:"description"})]}),e.jsxs(x,{spacing:1.5,children:[e.jsx(p,{variant:"subtitle2",children:"Images"}),e.jsx(oe,{multiple:!0,thumbnail:!0,name:"images",maxSize:3145728,onDrop:$,onRemove:z,onRemoveAll:M,onUpload:()=>console.info("ON UPLOAD")})]})]})]})})]}),B=e.jsxs(e.Fragment,{children:[t&&e.jsxs(o,{md:4,children:[e.jsx(p,{variant:"h6",sx:{mb:.5},children:"Properties"}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"Additional functions and attributes..."})]}),e.jsx(o,{xs:12,md:8,children:e.jsxs(C,{children:[!t&&e.jsx(v,{title:"Properties"}),e.jsxs(x,{spacing:3,sx:{p:3},children:[e.jsxs(f,{columnGap:2,rowGap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(n,{name:"code",label:"Product Code"}),e.jsx(n,{name:"sku",label:"Product SKU"}),e.jsx(n,{name:"quantity",label:"Quantity",placeholder:"0",type:"number",InputLabelProps:{shrink:!0}}),e.jsx(pe,{native:!0,name:"category",label:"Category",InputLabelProps:{shrink:!0},children:u.map(a=>e.jsx("optgroup",{label:a.group,children:a.classify.map(i=>e.jsx("option",{value:i,children:i},i))},a.group))}),e.jsx(I,{checkbox:!0,name:"colors",label:"Colors",options:ee}),e.jsx(I,{checkbox:!0,name:"sizes",label:"Sizes",options:se})]}),e.jsx(be,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,options:ae.map(a=>a),getOptionLabel:a=>a,renderOption:(a,i)=>l.createElement("li",{...a,key:i},i),renderTags:(a,i)=>a.map((h,j)=>l.createElement(he,{...i({index:j}),key:h,label:h,size:"small",color:"info",variant:"soft"}))}),e.jsxs(x,{spacing:1,children:[e.jsx(p,{variant:"subtitle2",children:"Gender"}),e.jsx(xe,{row:!0,name:"gender",spacing:2,options:ie})]}),e.jsx(le,{sx:{borderStyle:"dashed"}}),e.jsxs(x,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(O,{name:"saleLabel.enabled",label:null,sx:{m:0}}),e.jsx(n,{name:"saleLabel.content",label:"Sale Label",fullWidth:!0,disabled:!b.saleLabel.enabled})]}),e.jsxs(x,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(O,{name:"newLabel.enabled",label:null,sx:{m:0}}),e.jsx(n,{name:"newLabel.content",label:"New Label",fullWidth:!0,disabled:!b.newLabel.enabled})]})]})]})})]}),K=e.jsxs(e.Fragment,{children:[t&&e.jsxs(o,{md:4,children:[e.jsx(p,{variant:"h6",sx:{mb:.5},children:"Pricing"}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"Price related inputs"})]}),e.jsx(o,{xs:12,md:8,children:e.jsxs(C,{children:[!t&&e.jsx(v,{title:"Pricing"}),e.jsxs(x,{spacing:3,sx:{p:3},children:[e.jsx(n,{name:"price",label:"Regular Price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(L,{position:"start",children:e.jsx(f,{component:"span",sx:{color:"text.disabled"},children:"$"})})}}),e.jsx(n,{name:"priceSale",label:"Sale Price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(L,{position:"start",children:e.jsx(f,{component:"span",sx:{color:"text.disabled"},children:"$"})})}}),e.jsx(D,{control:e.jsx(A,{checked:g,onChange:c}),label:"Price includes taxes"}),!g&&e.jsx(n,{name:"taxes",label:"Tax (%)",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(L,{position:"start",children:e.jsx(f,{component:"span",sx:{color:"text.disabled"},children:"%"})})}})]})]})})]}),W=e.jsxs(e.Fragment,{children:[t&&e.jsx(o,{md:4}),e.jsxs(o,{xs:12,md:8,sx:{display:"flex",alignItems:"center"},children:[e.jsx(D,{control:e.jsx(A,{defaultChecked:!0}),label:"Publish",sx:{flexGrow:1,pl:3}}),e.jsx(me,{type:"submit",variant:"contained",size:"large",loading:r,children:s?"Save Changes":"Create Product"})]})]});return e.jsx(ne,{methods:k,onSubmit:G,children:e.jsxs(o,{container:!0,spacing:3,children:[V,B,K,W]})})}export{ke as P};
