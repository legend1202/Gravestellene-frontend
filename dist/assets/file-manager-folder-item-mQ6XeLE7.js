import{r as t,aY as V,j as e,A as q,g as _,a7 as se,i as f,d as n,aZ as H,a_ as I,D as B,o as Y,I as ne,l as Z,bS as re,b,S as x,c as D,B as y,bk as ae,dy as ie,T as E,a6 as te,cE as le,R as ce,dv as de,dq as xe,n as he}from"./index-HEM2xdHc.js";import{d as $}from"./format-number-0aaGh0k1.js";import{C as pe}from"./confirm-dialog-viPcqQqR.js";import{L as me}from"./ListItem-t83Ln-CH.js";import{D as J}from"./DialogTitle-XdDiqew4.js";import{D as K}from"./DialogContent-oN3wsUnm.js";import{T as G}from"./TextField-DOFcuTEw.js";import{D as Q}from"./DialogActions--8Prrcva.js";import{A as ue}from"./Autocomplete-nfl7kZsU.js";import{C as je}from"./Chip-W86oBTKz.js";import{C as U}from"./Checkbox-3V1OYX2a.js";import{U as ge}from"./upload-_Z4fP9x_.js";import"./image-RWBVwfhF.js";import{A as ve}from"./AvatarGroup-W0ByXwx_.js";function fe(){const[o,r]=t.useState(null);return{copiedText:o,copy:async s=>{if(!(navigator!=null&&navigator.clipboard))return console.warn("Clipboard not supported"),!1;try{return await navigator.clipboard.writeText(s),r(s),!0}catch(i){return console.warn("Copy failed",i),r(null),!1}}}}function X({person:o}){const[r,l]=t.useState(o.permission),s=V(),i=t.useCallback(h=>{l(h)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(me,{sx:{px:0,py:1},children:[e.jsx(q,{alt:o.name,src:o.avatarUrl,sx:{mr:2}}),e.jsx(_,{primary:o.name,secondary:e.jsx(se,{title:o.email,children:e.jsx("span",{children:o.email})}),primaryTypographyProps:{noWrap:!0,typography:"subtitle2"},secondaryTypographyProps:{noWrap:!0,component:"span"},sx:{flexGrow:1,pr:1}}),e.jsxs(f,{size:"small",color:"inherit",endIcon:e.jsx(n,{width:20,icon:s.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:-1}}),onClick:s.onOpen,sx:{flexShrink:0,...s.open&&{bgcolor:"action.selected"}},children:["Can ",r]})]}),e.jsx(H,{open:s.open,onClose:s.onClose,sx:{width:160},children:e.jsxs(e.Fragment,{children:[e.jsxs(I,{selected:r==="view",onClick:()=>{s.onClose(),i("view")},children:[e.jsx(n,{icon:"solar:eye-bold"}),"Can view"]}),e.jsxs(I,{selected:r==="edit",onClick:()=>{s.onClose(),i("edit")},children:[e.jsx(n,{icon:"solar:pen-bold"}),"Can edit"]}),e.jsx(B,{sx:{borderStyle:"dashed"}}),e.jsxs(I,{onClick:()=>{s.onClose()},sx:{color:"error.main"},children:[e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),"Remove"]})]})})]})}function ee({shared:o,inviteEmail:r,onCopyLink:l,onChangeInvite:s,open:i,onClose:h,...g}){const v=o&&!!o.length;return e.jsxs(Y,{fullWidth:!0,maxWidth:"xs",open:i,onClose:h,...g,children:[e.jsx(J,{children:" Invite "}),e.jsxs(K,{sx:{overflow:"unset"},children:[s&&e.jsx(G,{fullWidth:!0,value:r,placeholder:"Email",onChange:s,InputProps:{endAdornment:e.jsx(ne,{position:"end",children:e.jsx(f,{color:"inherit",variant:"contained",disabled:!r,sx:{mr:-.75},children:"Send Invite"})})},sx:{mb:2}}),v&&e.jsx(Z,{sx:{maxHeight:60*6},children:e.jsx(re,{disablePadding:!0,children:o.map(p=>e.jsx(X,{person:p},p.id))})})]}),e.jsxs(Q,{sx:{justifyContent:"space-between"},children:[l&&e.jsx(f,{startIcon:e.jsx(n,{icon:"eva:link-2-fill"}),onClick:l,children:"Copy link"}),h&&e.jsx(f,{variant:"outlined",color:"inherit",onClick:h,children:"Close"})]})]})}function Ce({item:o,open:r,favorited:l,onFavorite:s,onCopyLink:i,onClose:h,onDelete:g,...v}){const{name:p,size:C,url:T,type:w,shared:u,modifiedAt:k}=o,j=u&&!!u.length,c=b(!0),m=b(),F=b(!0),[S,A]=t.useState(""),[R,P]=t.useState(o.tags.slice(0,3)),L=t.useCallback(a=>{A(a.target.value)},[]),W=t.useCallback(a=>{P(a)},[]),M=e.jsxs(x,{spacing:1.5,children:[e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Tags",e.jsx(D,{size:"small",onClick:c.onToggle,children:e.jsx(n,{icon:c.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),c.value&&e.jsx(ue,{multiple:!0,freeSolo:!0,options:o.tags.map(a=>a),getOptionLabel:a=>a,defaultValue:o.tags.slice(0,3),value:R,onChange:(a,d)=>{W(d)},renderOption:(a,d)=>t.createElement("li",{...a,key:d},d),renderTags:(a,d)=>a.map((N,oe)=>t.createElement(je,{...d({index:oe}),size:"small",variant:"soft",label:N,key:N})),renderInput:a=>e.jsx(G,{...a,placeholder:"#Add a tags"})})]}),O=e.jsxs(x,{spacing:1.5,children:[e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Properties",e.jsx(D,{size:"small",onClick:F.onToggle,children:e.jsx(n,{icon:F.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),F.value&&e.jsxs(e.Fragment,{children:[e.jsxs(x,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(y,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Size"}),$(C)]}),e.jsxs(x,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(y,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Modified"}),ae(k)]}),e.jsxs(x,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(y,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Type"}),ie(w)]})]})]}),z=e.jsxs(e.Fragment,{children:[e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(E,{variant:"subtitle2",children:" File Share With "}),e.jsx(D,{size:"small",color:"primary",onClick:m.onTrue,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(n,{icon:"mingcute:add-line"})})]}),j&&e.jsx(y,{sx:{pl:2.5,pr:1},children:u.map(a=>e.jsx(X,{person:a},a.id))})]});return e.jsxs(e.Fragment,{children:[e.jsxs(te,{open:r,onClose:h,anchor:"right",slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},...v,children:[e.jsxs(Z,{sx:{height:1},children:[e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(E,{variant:"h6",children:" Info "}),e.jsx(U,{color:"warning",icon:e.jsx(n,{icon:"eva:star-outline"}),checkedIcon:e.jsx(n,{icon:"eva:star-fill"}),checked:l,onChange:s})]}),e.jsxs(x,{spacing:2.5,justifyContent:"center",sx:{p:2.5,bgcolor:"background.neutral"},children:[e.jsx(le,{imageView:!0,file:w==="folder"?w:T,sx:{width:64,height:64},imgSx:{borderRadius:1}}),e.jsx(E,{variant:"subtitle1",sx:{wordBreak:"break-all"},children:p}),e.jsx(B,{sx:{borderStyle:"dashed"}}),M,O]}),z]}),e.jsx(y,{sx:{p:2.5},children:e.jsx(f,{fullWidth:!0,variant:"soft",color:"error",size:"large",startIcon:e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),onClick:g,children:"Delete"})})]}),e.jsx(ee,{open:m.value,shared:u,inviteEmail:S,onChangeInvite:L,onCopyLink:i,onClose:()=>{m.onFalse(),A("")}})]})}function We({title:o,subTitle:r,link:l,onOpen:s,collapse:i,onCollapse:h,sx:g,...v}){return e.jsxs(x,{direction:"row",alignItems:"center",sx:{mb:3,...g},...v,children:[e.jsxs(x,{flexGrow:1,children:[e.jsxs(x,{direction:"row",alignItems:"center",spacing:1,flexGrow:1,children:[e.jsxs(E,{variant:"h6",children:[" ",o," "]}),e.jsx(D,{size:"small",color:"primary",onClick:s,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(n,{icon:"mingcute:add-line"})})]}),e.jsx(y,{sx:{typography:"body2",color:"text.disabled",mt:.5},children:r})]}),l&&e.jsx(f,{href:l,component:ce,size:"small",color:"inherit",endIcon:e.jsx(n,{icon:"eva:arrow-ios-forward-fill",width:18,sx:{ml:-.5}}),children:"View All"}),h&&e.jsx(D,{onClick:h,children:e.jsx(n,{icon:i?"eva:arrow-ios-downward-fill":"eva:arrow-ios-upward-fill"})})]})}function be({title:o="Upload Files",open:r,onClose:l,onCreate:s,onUpdate:i,folderName:h,onChangeFolderName:g,...v}){const[p,C]=t.useState([]);t.useEffect(()=>{r||C([])},[r]);const T=t.useCallback(j=>{const c=j.map(m=>Object.assign(m,{preview:URL.createObjectURL(m)}));C([...p,...c])},[p]),w=()=>{l(),console.info("ON UPLOAD")},u=j=>{const c=p.filter(m=>m!==j);C(c)},k=()=>{C([])};return e.jsxs(Y,{fullWidth:!0,maxWidth:"sm",open:r,onClose:l,...v,children:[e.jsxs(J,{sx:{p:j=>j.spacing(3,3,2,3)},children:[" ",o," "]}),e.jsxs(K,{dividers:!0,sx:{pt:1,pb:0,border:"none"},children:[(s||i)&&e.jsx(G,{fullWidth:!0,label:"Folder name",value:h,onChange:g,sx:{mb:3}}),e.jsx(ge,{multiple:!0,files:p,onDrop:T,onRemove:u})]}),e.jsxs(Q,{children:[e.jsx(f,{variant:"contained",startIcon:e.jsx(n,{icon:"eva:cloud-upload-fill"}),onClick:w,children:"Upload"}),!!p.length&&e.jsx(f,{variant:"outlined",color:"inherit",onClick:k,children:"Remove all"}),(s||i)&&e.jsx(x,{direction:"row",justifyContent:"flex-end",flexGrow:1,children:e.jsx(f,{variant:"soft",onClick:s||i,children:i?"Save":"Create"})})]})]})}function Me({folder:o,selected:r,onSelect:l,onDelete:s,sx:i,...h}){var z,a;const{enqueueSnackbar:g}=de(),{copy:v}=fe(),[p,C]=t.useState(""),[T,w]=t.useState(o.name),u=b(),k=b(),j=b(),c=V(),m=b(),F=b(),S=b(o.isFavorited),A=t.useCallback(d=>{C(d.target.value)},[]),R=t.useCallback(d=>{w(d.target.value)},[]),P=t.useCallback(()=>{g("Copied!"),v(o.url)},[v,g,o.url]),L=e.jsxs(x,{direction:"row",alignItems:"center",sx:{top:8,right:8,position:"absolute"},children:[e.jsx(U,{color:"warning",icon:e.jsx(n,{icon:"eva:star-outline"}),checkedIcon:e.jsx(n,{icon:"eva:star-fill"}),checked:S.value,onChange:S.onToggle}),e.jsx(D,{color:c.open?"inherit":"default",onClick:c.onOpen,children:e.jsx(n,{icon:"eva:more-vertical-fill"})})]}),W=(k.value||r)&&l?e.jsx(U,{size:"medium",checked:r,onClick:l,icon:e.jsx(n,{icon:"eva:radio-button-off-fill"}),checkedIcon:e.jsx(n,{icon:"eva:checkmark-circle-2-fill"}),sx:{p:.75}}):e.jsx(y,{component:"img",src:"/assets/icons/files/ic_folder.svg",sx:{width:36,height:36}}),M=e.jsx(_,{onClick:F.onTrue,primary:o.name,secondary:e.jsxs(e.Fragment,{children:[$(o.size),e.jsx(y,{component:"span",sx:{mx:.75,width:2,height:2,borderRadius:"50%",bgcolor:"currentColor"}}),o.totalFiles," files"]}),primaryTypographyProps:{noWrap:!0,typography:"subtitle1"},secondaryTypographyProps:{mt:.5,component:"span",alignItems:"center",typography:"caption",color:"text.disabled",display:"inline-flex"}}),O=e.jsx(ve,{max:3,sx:{[`& .${xe.avatar}`]:{width:24,height:24,"&:first-of-type":{fontSize:12}}},children:(z=o.shared)==null?void 0:z.map(d=>e.jsx(q,{alt:d.name,src:d.avatarUrl},d.id))});return e.jsxs(e.Fragment,{children:[e.jsxs(x,{component:he,variant:"outlined",spacing:1,alignItems:"flex-start",sx:{p:2.5,maxWidth:222,borderRadius:2,bgcolor:"unset",cursor:"pointer",position:"relative",...(k.value||r)&&{bgcolor:"background.paper",boxShadow:d=>d.customShadows.z20},...i},...h,children:[e.jsx(y,{onMouseEnter:k.onTrue,onMouseLeave:k.onFalse,children:W}),L,M,!!((a=o==null?void 0:o.shared)!=null&&a.length)&&O]}),e.jsxs(H,{open:c.open,onClose:c.onClose,arrow:"right-top",sx:{width:160},children:[e.jsxs(I,{onClick:()=>{c.onClose(),P()},children:[e.jsx(n,{icon:"eva:link-2-fill"}),"Copy Link"]}),e.jsxs(I,{onClick:()=>{c.onClose(),j.onTrue()},children:[e.jsx(n,{icon:"solar:share-bold"}),"Share"]}),e.jsxs(I,{onClick:()=>{c.onClose(),u.onTrue()},children:[e.jsx(n,{icon:"solar:pen-bold"}),"Edit"]}),e.jsx(B,{sx:{borderStyle:"dashed"}}),e.jsxs(I,{onClick:()=>{m.onTrue(),c.onClose()},sx:{color:"error.main"},children:[e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(Ce,{item:o,favorited:S.value,onFavorite:S.onToggle,onCopyLink:P,open:F.value,onClose:F.onFalse,onDelete:()=>{F.onFalse(),s()}}),e.jsx(ee,{open:j.value,shared:o.shared,inviteEmail:p,onChangeInvite:A,onCopyLink:P,onClose:()=>{j.onFalse(),C("")}}),e.jsx(be,{open:u.value,onClose:u.onFalse,title:"Edit Folder",onUpdate:()=>{u.onFalse(),w(T),console.info("UPDATE FOLDER",T)},folderName:T,onChangeFolderName:R}),e.jsx(pe,{open:m.value,onClose:m.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(f,{variant:"contained",color:"error",onClick:s,children:"Delete"})})]})}export{Ce as F,ee as a,We as b,Me as c,be as d,fe as u};
