import{j as e,S as C,Z as B,Y as n,_ as O,t as A,a as H,i as _,J as z,r as s,c as V,b as q,d as U,o as Q,p as $,g as m,C as J,F as Y,a6 as Z,M as K,B as b,H as X}from"./index-olWG5rmW.js";import{b as ee}from"./graveyard-GKlh6lSI.js";import{G as re,d as te}from"./gravestone-iXLZbXPO.js";import{E as j}from"./empty-content-aEHGwk1d.js";import{C as ae}from"./confirm-dialog-rQQ6bPlu.js";import{R as oe}from"./rhf-select-c25tOyEz.js";import{G as w}from"./GridActionsCellItem-yab85Fz2.js";import{D as se}from"./DataGrid-zjjvXiyR.js";import{G as ne,a as ie}from"./GridToolbarQuickFilter-5GVOfxvI.js";import"./DialogTitle-sc_Wkfa0.js";import"./dialogTitleClasses-yhiXE3Vf.js";import"./DialogContent-fD_e1gAJ.js";import"./DialogActions-MaAplMwD.js";import"./Checkbox-B_BJ-Hb5.js";import"./SwitchBase-OXsTXBdw.js";import"./Chip-8rx4JbJF.js";import"./index-AAfoef_5.js";import"./Autocomplete-gEJAXnqc.js";import"./ClickAwayListener-FzzntR-4.js";import"./Switch-mwadsWX6.js";import"./Skeleton-utUioUnt.js";import"./TablePagination-45LyRSw3.js";import"./FirstPage-xOxBUGGE.js";import"./TableCell-ImqvOK7-.js";import"./FormControlLabel-YKJ5ioYh.js";function le({params:t}){return e.jsxs(C,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(B,{alt:t.row.name,src:t.row.coverUrl,variant:"rounded",sx:{width:24,height:24,mr:2}}),e.jsx(n,{primary:t.row.name,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})]})}function de({params:t}){return e.jsx(n,{primary:t.row.birthday,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function pe({params:t}){return e.jsx(n,{primary:t.row.deceasedDate,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function ce({params:t}){return e.jsx(n,{primary:t.row.ageOnDeath,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function me({params:t}){return e.jsx(n,{primary:t.row.field,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function ye({params:t}){return e.jsx(n,{primary:t.row.row,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function he({params:t}){return e.jsx(n,{primary:t.row.place,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function ue({params:t}){return e.jsx(n,{primary:t.row.burriedWith,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}const ge={category:!1},xe=["category","actions"];function fe(){const{enqueueSnackbar:t}=O(),{t:a}=A(),l=H(),y=_(),T=z(),{graveyards:h,graveyardsLoading:u}=ee(),[d,g]=s.useState([]),[D,p]=s.useState(!1),[c,P]=s.useState([]),[R,S]=s.useState(ge),G=V().shape({id:q().required("Please select Graveyard!")}),W=s.useMemo(()=>({id:""}),[]),x=U({resolver:Q(G),defaultValues:W}),{watch:v}=x,o=v();s.useEffect(()=>{p(u)},[u]),s.useEffect(()=>{o!=null&&o.id&&M(o==null?void 0:o.id)},[o==null?void 0:o.id]);const N=async r=>{try{if((await te(r)).success){const E=d.filter(F=>F.id!==r);t("Delete success!"),g(E)}}catch(i){console.error(i)}},I=s.useCallback(()=>{console.log("delete id")},[]),k=s.useCallback(r=>{y.push($.fellesraad.gravestone.edit(r))},[y]),f=[{field:"name",headerName:a("Name"),flex:1,minWidth:220,hideable:!1,renderCell:r=>e.jsx(le,{params:r})},{field:"birthday",headerName:a("Birthday"),minWidth:150,renderCell:r=>e.jsx(de,{params:r})},{field:"deceasedDate",headerName:a("deceased_date"),minWidth:150,renderCell:r=>e.jsx(pe,{params:r})},{field:"buriedDate",headerName:a("Death Age"),minWidth:150,renderCell:r=>e.jsx(ce,{params:r})},{field:"homeTown",headerName:a("Field"),minWidth:180,renderCell:r=>e.jsx(me,{params:r})},{field:"graveSiteNumber",headerName:a("Row"),minWidth:110,renderCell:r=>e.jsx(ye,{params:r})},{field:"quarter",headerName:a("Place"),minWidth:110,renderCell:r=>e.jsx(he,{params:r})},{field:"buriedWith",headerName:a("Buried With"),minWidth:280,renderCell:r=>e.jsx(ue,{params:r})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",minWidth:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:r=>[e.jsx(w,{showInMenu:!0,icon:e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>N(r.row.id)}),e.jsx(w,{showInMenu:!0,icon:e.jsx(m,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>k(r.row.id)})]}],M=async r=>{p(!0);const i=await re(r);i&&g(i==null?void 0:i.gravestones),p(!1)},L=()=>f.filter(r=>!xe.includes(r.field)).map(r=>r.field);return e.jsxs(e.Fragment,{children:[e.jsxs(J,{maxWidth:T.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[h&&e.jsx(Y,{methods:x,children:e.jsx(oe,{fullWidth:!0,name:"id",label:a("Graveyard"),InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},sx:{mb:1},children:h.map(r=>(r==null?void 0:r.approved)&&e.jsx(Z,{value:r==null?void 0:r.id,children:r==null?void 0:r.name},r.id))})}),e.jsx(K,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:d&&e.jsx(se,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:d,columns:f,loading:D,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:r=>{P(r)},columnVisibilityModel:R,onColumnVisibilityModelChange:r=>S(r),slots:{toolbar:()=>e.jsxs(ne,{children:[e.jsx(ie,{}),e.jsx(C,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:!!c.length&&e.jsxs(b,{size:"small",color:"error",startIcon:e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),onClick:l.onTrue,children:["Delete (",c.length,")"]})})]}),noRowsOverlay:()=>e.jsx(j,{title:"No Data"}),noResultsOverlay:()=>e.jsx(j,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:L}}})})]}),e.jsx(ae,{open:l.value,onClose:l.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",c.length," "]})," items?"]}),action:e.jsx(b,{variant:"contained",color:"error",onClick:()=>{I(),l.onFalse()},children:"Delete"})})]})}function Ve(){return e.jsxs(e.Fragment,{children:[e.jsx(X,{children:e.jsx("title",{children:" Dashboard: Gravestone List"})}),e.jsx(fe,{})]})}export{Ve as default};
