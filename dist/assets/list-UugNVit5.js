import{j as e,E as T,t as y,S as b,B as E,y as N,w as j,b as O,k as P,x as B,u as _,G as A,r as i,p as c,h as l,C as H,z as W,J as x,R as z,D as V,M as F,H as U}from"./index-Ai7WBed9.js";import{E as f}from"./empty-content-UxxF0rT4.js";import{f as $}from"./format-number-MVByUr1X.js";import{b as g,D as q,G as J,a as Q}from"./DataGrid-t_zOT0XT.js";import"./index-aEol1cJN.js";import"./Autocomplete-JEHmlUt8.js";import"./Chip-ZcR-KSZs.js";import"./ClickAwayListener-SabWFJsc.js";import"./Checkbox-te7qU-XE.js";import"./SwitchBase-aDzKqP7k.js";import"./Switch-NjMVebH_.js";import"./Skeleton-VEDJMMU1.js";import"./TablePagination-Jkpqhja2.js";import"./FirstPage-05ItheTm.js";import"./TableCell-LO4OfV7U.js";import"./FormControlLabel-T6TgLX-i.js";function K({params:s}){return e.jsx(e.Fragment,{children:$(s.row.price)})}function X({params:s}){return e.jsx(T,{variant:"soft",color:s.row.approved&&"info"||"default",children:s.row.approved?"Approved":""})}function Y({params:s}){return e.jsx(y,{primary:s.row.description,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function Z({params:s}){return e.jsx(b,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:e.jsx(y,{disableTypography:!0,primary:e.jsx(E,{component:"div",sx:{typography:"subtitle2"},children:s.row.name}),sx:{display:"flex",flexDirection:"column"}})})}const ee=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],te={category:!1},se=["category","actions"];function re(){const{enqueueSnackbar:s}=N(),{t:r}=j(),C=O(),d=P(),w=B(),{user:o}=_();console.log(o);const{services:n,servicesLoading:v}=A(o==null?void 0:o.userId),[a,u]=i.useState([]),[p,S]=i.useState([]),[R,I]=i.useState(te),D=i.useCallback(t=>{d.push(c.fellesraad.service.edit(t))},[d]);i.useEffect(()=>{n&&n.length>0&&u(n)},[n]);const G=async t=>{try{if((await F(t)).success){const k=a.filter(M=>M.id!==t);u(k),s("Delete success!")}}catch(h){console.error(h)}},m=[{field:"name",headerName:r("service_name"),flex:1,minWidth:100,hideable:!1,renderCell:t=>e.jsx(Z,{params:t})},{field:"description",headerName:r("description"),minWidth:280,renderCell:t=>e.jsx(Y,{params:t})},{field:"price",headerName:r("price"),minWidth:280,renderCell:t=>e.jsx(K,{params:t})},{field:"publish",headerName:r("publish"),width:110,type:"singleSelect",editable:!0,valueOptions:ee,renderCell:t=>e.jsx(X,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(g,{showInMenu:!0,icon:e.jsx(l,{icon:"solar:trash-bin-trash-bold"}),label:r("delete"),onClick:()=>G(t.row.id)}),e.jsx(g,{showInMenu:!0,icon:e.jsx(l,{icon:"solar:pen-bold"}),label:r("edit"),onClick:()=>D(t.row.id)})]}],L=()=>m.filter(t=>!se.includes(t.field)).map(t=>t.field);return e.jsxs(H,{maxWidth:w.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(W,{heading:"List",links:[{name:r("service"),href:c.fellesraad.service.root},{name:r("list")}],action:e.jsx(x,{component:z,href:c.fellesraad.service.create,variant:"contained",startIcon:e.jsx(l,{icon:"mingcute:add-line"}),children:r("new_service")}),sx:{mb:{xs:3,md:5}}}),e.jsx(V,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:a&&a.length>0&&e.jsx(q,{disableRowSelectionOnClick:!0,rows:a,columns:m,loading:v,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:t=>{S(t)},columnVisibilityModel:R,onColumnVisibilityModelChange:t=>I(t),slots:{toolbar:()=>e.jsxs(J,{children:[e.jsx(Q,{}),e.jsx(b,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:!!p.length&&e.jsxs(x,{size:"small",color:"error",startIcon:e.jsx(l,{icon:"solar:trash-bin-trash-bold"}),onClick:C.onTrue,children:["Delete (",p.length,")"]})})]}),noRowsOverlay:()=>e.jsx(f,{title:"No Data"}),noResultsOverlay:()=>e.jsx(f,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:L}}})})]})}function je(){const{t:s}=j();return e.jsxs(e.Fragment,{children:[e.jsx(U,{children:e.jsxs("title",{children:[" ",`${s("services")}: ${s("list_of_services")}`]})}),e.jsx(re,{})]})}export{je as default};
