import{aY as K,r,j as e,a_ as g,aZ as Y,d as p,S as j,B as y,i as k,n as Z,k as J,g as V,aQ as X,bq as $,A as ee,L as te,dv as se,b as oe,e as le,h as re,aa as ae,p as w,C as ne,R as ie,dA as ce,H as de}from"./index-GLB0-COv.js";import"./index-1u5g4BxH.js";import"./_baseToString-d_3E78dc.js";import"./image-sa1WTJbO.js";import"./color-picker-B6JcCeFC.js";import"./index.esm-bFz1mbUk.js";import"./mui-one-time-password-input.es-zG04MA5Y.js";import"./styles-RrkxVDFU.js";import"./product-details-carousel-esCmvCDG.js";import"./styles-QfMYE2Gk.js";import{u as ue}from"./product-VI7G4ZFT.js";import{E as I}from"./empty-content-AJBVFXhe.js";import{C as he}from"./confirm-dialog-Tmm4Uygk.js";import{C as pe}from"./custom-breadcrumbs-y7vEq1Mg.js";import{a as N,b as O,S as L,O as F}from"./TextField-zEGoGrFA.js";import{C as E}from"./Checkbox-qhg1k3Um.js";import{C as A}from"./Chip-V8hE5y9x.js";import{f as xe}from"./format-number-shkRvLbp.js";import{C as me}from"./Card-oKMzPwWo.js";import{b as D,D as be,G as fe,a as je,c as Ce}from"./DataGrid-2_fBHAjv.js";import{G as ge,a as we}from"./GridToolbarFilterButton-9kgEbrqf.js";import"./use-light-box-8bpDk3QL.js";import"./carousel-arrow-index-FkFQIEnJ.js";import"./DialogTitle-KNN7PWDE.js";import"./dialogTitleClasses-DnmgYCVd.js";import"./DialogContent-HjkuCL9J.js";import"./DialogActions-AHBFdKUJ.js";import"./SwitchBase-dYFpV_N7.js";import"./index-Kx7fbXlQ.js";import"./Autocomplete-MXq7iC3V.js";import"./Close-h_sQMOZo.js";import"./ClickAwayListener-QalEK9aC.js";import"./Switch-MCTQfwpv.js";import"./Skeleton-bP74q55a.js";import"./CircularProgress-gdFe3tcU.js";import"./TablePagination-FvF2tGor.js";import"./FirstPage-cVUcAsjB.js";import"./TableCell-C7TN4rRp.js";import"./FormControlLabel-NMuNkhR8.js";function ke({filters:s,onFilters:a,stockOptions:c,publishOptions:d}){const n=K(),[x,h]=r.useState(s.stock),[o,u]=r.useState(s.publish),m=r.useCallback(l=>{const{target:{value:i}}=l;h(typeof i=="string"?i.split(","):i)},[]),b=r.useCallback(l=>{const{target:{value:i}}=l;u(typeof i=="string"?i.split(","):i)},[]),v=r.useCallback(()=>{a("stock",x)},[a,x]),S=r.useCallback(()=>{a("publish",o)},[a,o]);return e.jsxs(e.Fragment,{children:[e.jsxs(N,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(O,{children:"Stock"}),e.jsx(L,{multiple:!0,value:x,onChange:m,input:e.jsx(F,{label:"Stock"}),renderValue:l=>l.map(i=>i).join(", "),onClose:v,sx:{textTransform:"capitalize"},children:c.map(l=>e.jsxs(g,{value:l.value,children:[e.jsx(E,{disableRipple:!0,size:"small",checked:x.includes(l.value)}),l.label]},l.value))})]}),e.jsxs(N,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(O,{children:"Publish"}),e.jsx(L,{multiple:!0,value:o,onChange:b,input:e.jsx(F,{label:"Publish"}),renderValue:l=>l.map(i=>i).join(", "),onClose:S,sx:{textTransform:"capitalize"},children:d.map(l=>e.jsxs(g,{value:l.value,children:[e.jsx(E,{disableRipple:!0,size:"small",checked:o.includes(l.value)}),l.label]},l.value))})]}),e.jsxs(Y,{open:n.open,onClose:n.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(g,{onClick:()=>{n.onClose()},children:[e.jsx(p,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(g,{onClick:()=>{n.onClose()},children:[e.jsx(p,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(g,{onClick:()=>{n.onClose()},children:[e.jsx(p,{icon:"solar:export-bold"}),"Export"]})]})]})}function ye({filters:s,onFilters:a,onResetFilters:c,results:d,...n}){const x=r.useCallback(o=>{const u=s.stock.filter(m=>m!==o);a("stock",u)},[s.stock,a]),h=r.useCallback(o=>{const u=s.publish.filter(m=>m!==o);a("publish",u)},[s.publish,a]);return e.jsxs(j,{spacing:1.5,...n,children:[e.jsxs(y,{sx:{typography:"body2"},children:[e.jsx("strong",{children:d}),e.jsx(y,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(j,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!s.stock.length&&e.jsx(B,{label:"Stock:",children:s.stock.map(o=>e.jsx(A,{label:o,size:"small",onDelete:()=>x(o)},o))}),!!s.publish.length&&e.jsx(B,{label:"Publish:",children:s.publish.map(o=>e.jsx(A,{label:o,size:"small",onDelete:()=>h(o)},o))}),e.jsx(k,{color:"error",onClick:c,startIcon:e.jsx(p,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}function B({label:s,children:a,sx:c,...d}){return e.jsxs(j,{component:Z,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...c},...d,children:[e.jsx(y,{component:"span",sx:{typography:"subtitle2"},children:s}),e.jsx(j,{spacing:1,direction:"row",flexWrap:"wrap",children:a})]})}function f({params:s}){return e.jsx(e.Fragment,{children:xe(s.row.price)})}function ve({params:s}){return e.jsx(J,{variant:"soft",color:s.row.publish==="published"&&"info"||"default",children:s.row.publish})}function Se({params:s}){return e.jsx(V,{primary:X(s.row.createdAt),secondary:$(s.row.createdAt),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function Re({params:s}){return e.jsxs(j,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(ee,{alt:s.row.name,src:s.row.coverUrl,variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(V,{disableTypography:!0,primary:e.jsx(te,{noWrap:!0,color:"inherit",variant:"subtitle2",onClick:s.row.onViewRow,sx:{cursor:"pointer"},children:s.row.name}),secondary:e.jsx(y,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:s.row.category}),sx:{display:"flex",flexDirection:"column"}})]})}const M=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],P={publish:[],stock:[]},De={category:!1},Pe=["category","actions"];function Te(){const{enqueueSnackbar:s}=se(),a=oe(),c=le(),d=re(),{products:n,productsLoading:x}=ue(),[h,o]=r.useState([]),[u,m]=r.useState(P),[b,v]=r.useState([]),[S,l]=r.useState(De);r.useEffect(()=>{n.length&&o(n)},[n]);const i=Ge({inputData:h,filters:u}),z=!ae(P,u),T=r.useCallback((t,C)=>{m(R=>({...R,[t]:C}))},[]),_=r.useCallback(()=>{m(P)},[]),H=r.useCallback(t=>{const C=h.filter(R=>R.id!==t);s("Delete success!"),o(C)},[s,h]),W=r.useCallback(()=>{const t=h.filter(C=>!b.includes(C.id));s("Delete success!"),o(t)},[s,b,h]),U=r.useCallback(t=>{c.push(w.dashboard.product.edit(t))},[c]),q=r.useCallback(t=>{c.push(w.dashboard.product.details(t))},[c]),G=[{field:"category",headerName:"Category",filterable:!1},{field:"name",headerName:"Gravestone",flex:1,minWidth:160,hideable:!1,renderCell:t=>e.jsx(Re,{params:t})},{field:"gender",headerName:"gender",width:140,editable:!0,renderCell:t=>e.jsx(f,{params:t})},{field:"birthday",headerName:"Birthday",width:140,editable:!0,renderCell:t=>e.jsx(f,{params:t})},{field:"deceasedDate",headerName:"Deceased Date",width:140,editable:!0,renderCell:t=>e.jsx(f,{params:t})},{field:"buriedDate",headerName:"Buried Date",width:140,editable:!0,renderCell:t=>e.jsx(f,{params:t})},{field:"quarter",headerName:"Quarter",width:140,editable:!0,renderCell:t=>e.jsx(f,{params:t})},{field:"graveSite",headerName:"Grave Site",width:140,editable:!0,renderCell:t=>e.jsx(f,{params:t})},{field:"publish",headerName:"Publish",width:110,type:"singleSelect",editable:!0,valueOptions:M,renderCell:t=>e.jsx(ve,{params:t})},{field:"createdAt",headerName:"Create at",width:160,renderCell:t=>e.jsx(Se,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(D,{showInMenu:!0,icon:e.jsx(p,{icon:"solar:eye-bold"}),label:"View",onClick:()=>q(t.row.id)}),e.jsx(D,{showInMenu:!0,icon:e.jsx(p,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>U(t.row.id)}),e.jsx(D,{showInMenu:!0,icon:e.jsx(p,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>{H(t.row.id)},sx:{color:"error.main"}})]}],Q=()=>G.filter(t=>!Pe.includes(t.field)).map(t=>t.field);return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{maxWidth:d.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(pe,{heading:"List",links:[{name:"Dashboard",href:w.dashboard.root},{name:"Gravestone",href:w.fellesraad.gravestone.root},{name:"List"}],action:e.jsx(k,{component:ie,href:w.fellesraad.gravestone.create,variant:"contained",startIcon:e.jsx(p,{icon:"mingcute:add-line"}),children:"New Gravestone"}),sx:{mb:{xs:3,md:5}}}),e.jsx(me,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:e.jsx(be,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:i,columns:G,loading:x,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:t=>{v(t)},columnVisibilityModel:S,onColumnVisibilityModelChange:t=>l(t),slots:{toolbar:()=>e.jsxs(e.Fragment,{children:[e.jsxs(fe,{children:[e.jsx(ke,{filters:u,onFilters:T,stockOptions:ce,publishOptions:M}),e.jsx(je,{}),e.jsxs(j,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[!!b.length&&e.jsxs(k,{size:"small",color:"error",startIcon:e.jsx(p,{icon:"solar:trash-bin-trash-bold"}),onClick:a.onTrue,children:["Delete (",b.length,")"]}),e.jsx(ge,{}),e.jsx(we,{}),e.jsx(Ce,{})]})]}),z&&e.jsx(ye,{filters:u,onFilters:T,onResetFilters:_,results:i.length,sx:{p:2.5,pt:0}})]}),noRowsOverlay:()=>e.jsx(I,{title:"No Data"}),noResultsOverlay:()=>e.jsx(I,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:Q}}})})]}),e.jsx(he,{open:a.value,onClose:a.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete"," ",e.jsxs("strong",{children:[" ",b.length," "]})," items?"]}),action:e.jsx(k,{variant:"contained",color:"error",onClick:()=>{W(),a.onFalse()},children:"Delete"})})]})}function Ge({inputData:s,filters:a}){const{stock:c,publish:d}=a;return c.length&&(s=s.filter(n=>c.includes(n.inventoryType))),d.length&&(s=s.filter(n=>d.includes(n.publish))),s}function bt(){return e.jsxs(e.Fragment,{children:[e.jsx(de,{children:e.jsx("title",{children:" Dashboard: Gravestone List"})}),e.jsx(Te,{})]})}export{bt as default};
