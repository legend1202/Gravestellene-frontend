import{k as M,l as A,r as i,m as g,n as D,j as e,q as y,S as E,s as I,B as N,t as U,v as k,w as G,C as T,x as O,p as V,y as v,g as d,H as P}from"./index-Unum9nVw.js";import{E as f}from"./empty-content-GbU2eJBU.js";import{D as z}from"./DataGrid-112SPRAP.js";import{G as F,a as H}from"./GridToolbarQuickFilter-PKHF53dr.js";import{G as c}from"./GridActionsCellItem-JC287emv.js";import"./index-A_uBhfh0.js";import"./Autocomplete-kZdvQqmE.js";import"./Chip-uoK_dvre.js";import"./ClickAwayListener-hQ_7BUJb.js";import"./Checkbox-2ExRgTd_.js";import"./SwitchBase-blZAzLa7.js";import"./Switch-NmZnwyWJ.js";import"./Skeleton-GalYOJVZ.js";import"./TablePagination-PX_PrpBe.js";import"./FirstPage-gcIcBaif.js";import"./TableCell-cPFwLuUe.js";import"./FormControlLabel-GN7LW6HO.js";function W(){const o=g.admin.userList,{data:s,isLoading:a,error:r,isValidating:n}=M(o,A);return i.useMemo(()=>({users:s==null?void 0:s.result.users,usersLoading:a,usersError:r,usersValidating:n}),[s==null?void 0:s.result,r,a,n])}const B=async o=>{const s=await D.put(g.admin.userRoleUpdate,{user:o});return{data:(s==null?void 0:s.data)||[]}};function _({params:o}){return e.jsx(y,{primary:o.row.role,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function q({params:o}){return e.jsxs(E,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(I,{alt:o.row.name,src:o.row.coverUrl,variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(y,{disableTypography:!0,primary:e.jsx(N,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:o.row.name})})]})}const Y={category:!1},Q=["category","actions"];function J(){const{t:o}=U(),s=k(),{enqueueSnackbar:a}=G(),{users:r,usersLoading:n}=W(),[p,x]=i.useState([]),[b,j]=i.useState(!1),[C,w]=i.useState(Y);i.useEffect(()=>{r&&x(r)},[r]);const l=async(t,S)=>{const u=await B({id:t,role:S});if(u.data.success){a(o("update_success"));const R=r.map(m=>m.id===u.data.result.id?{...m,role:u.data.result.role}:m);x([...R]),j(!b)}else a("Update did not success")},h=[{field:"name",headerName:"Name",flex:1,minWidth:280,hideable:!1,renderCell:t=>e.jsx(q,{params:t})},{field:"role",headerName:"Role",minWidth:280,renderCell:t=>e.jsx(_,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(c,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:eye-bold"}),label:"ADMIN",onClick:()=>l(t.row.id,"ADMIN")}),e.jsx(c,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"FELLESRAAD",onClick:()=>l(t.row.id,"FELLESRAAD")}),e.jsx(c,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"COMPANY",onClick:()=>l(t.row.id,"COMPANY")}),e.jsx(c,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"CLIENT",onClick:()=>l(t.row.id,"CLIENT")})]}],L=()=>h.filter(t=>!Q.includes(t.field)).map(t=>t.field);return e.jsxs(T,{maxWidth:s.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(O,{heading:"List",links:[{name:"User",href:V.dashboard.root},{name:"List"}],sx:{mb:{xs:3,md:5}}}),e.jsx(v,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:e.jsx(z,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:p,columns:h,loading:n,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},columnVisibilityModel:C,onColumnVisibilityModelChange:t=>w(t),slots:{toolbar:()=>e.jsx(e.Fragment,{children:e.jsx(F,{children:e.jsx(H,{})})}),noRowsOverlay:()=>e.jsx(f,{title:"No Data"}),noResultsOverlay:()=>e.jsx(f,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:L}}})})]})}function xe(){return e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx("title",{children:" Admin: List of Users"})}),e.jsx(J,{})]})}export{xe as default};
