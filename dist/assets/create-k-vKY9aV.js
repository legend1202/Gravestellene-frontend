import{l as g,m as A,r as c,e as E,p as b,j as s,G as d,S as I,I as B,B as D,h as H,C as R,H as $}from"./index-tv0ZIiTC.js";import{C as v}from"./custom-breadcrumbs-wU-A5DZv.js";import{c as G,a as l}from"./index.esm-VBvqitsX.js";import{u as L,F as M}from"./form-provider-k-FKKLvB.js";import{o as N}from"./yup-THP-HfC-.js";import{a as T,c as V}from"./service-d8XT3PVm.js";import"./image-tVn7ll4O.js";import"./mui-one-time-password-input.es-YbC1owsP.js";import"./styles-9eCz8YsQ.js";import{R as p}from"./rhf-text-field-Jv5-AM0T.js";import{C as z}from"./Card-fEhE4FGy.js";import{C as W}from"./CardHeader-BwadA8Aj.js";import{L as J}from"./LoadingButton-CKt2mL1s.js";import{A as K}from"./Alert-5iRykT7g.js";import"./TextField-MR0F-eFr.js";import"./CircularProgress-m_JQi2ZX.js";import"./Close--UPeKSTc.js";function O({currentService:e}){const{t}=g(),{enqueueSnackbar:x}=A(),[h,o]=c.useState(""),C=E(),_=G().shape({name:l().required("Name is required"),description:l().required("Description is required"),price:l().required("Price is required")}),n=c.useMemo(()=>({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",price:(e==null?void 0:e.price)||""}),[e]),u=L({resolver:N(_),defaultValues:n}),{reset:i,watch:y,handleSubmit:w,formState:{isSubmitting:q}}=u,m=y();c.useEffect(()=>{e&&i(n)},[e,n,i]);const F=w(async U=>{var f,j;try{if(e){const r={...e,...m},a=await T(r);(f=a.searchResults)!=null&&f.success?(i(),x(t("update_success"))):o(a==null?void 0:a.message)}else{console.log(m);const r={...m,unit:"$"},a=await V(r);(j=a.searchResults)!=null&&j.success?(i(),x(t("create_success"))):o(a==null?void 0:a.message)}C.push(b.fellesraad.service.list)}catch(r){o(r==null?void 0:r.message),console.error(r)}}),P=s.jsx(d,{xs:12,md:12,children:s.jsxs(z,{children:[s.jsx(W,{title:t("details")}),s.jsxs(I,{spacing:3,sx:{p:3},children:[s.jsx(p,{name:"name",label:t("service_name")}),s.jsx(p,{name:"description",label:t("service_description")}),s.jsx(p,{name:"price",label:t("service_price"),placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(D,{component:"span",sx:{color:"text.disabled"},children:"$"})})}})]})]})}),k=s.jsx(d,{xs:12,md:12,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:s.jsx(J,{type:"submit",variant:"contained",size:"large",loading:q,children:t(e?"save_changes":"create_service")})});return s.jsx(M,{methods:u,onSubmit:F,children:s.jsxs(d,{container:!0,spacing:3,children:[!!h&&s.jsx(K,{severity:"error",sx:{mb:3},children:h}),P,k]})})}function Q(){const{t:e}=g(),t=H();return s.jsxs(R,{maxWidth:t.themeStretch?!1:"lg",children:[s.jsx(v,{heading:e("create_my_service"),links:[{name:e("service"),href:b.fellesraad.service.root},{name:e("new_service")}],sx:{mb:{xs:3,md:5}}}),s.jsx(O,{})]})}function xs(){return s.jsxs(s.Fragment,{children:[s.jsx($,{children:s.jsx("title",{children:" Service: Create a new Service"})}),s.jsx(Q,{})]})}export{xs as default};
