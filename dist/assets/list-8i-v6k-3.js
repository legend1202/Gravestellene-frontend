import{r as i,az as X,bO as G,j as e,ax as L,$ as te,ak as se,aC as le,bt as re,bc as ne,c1 as M,c3 as E,c2 as $,dW as W,Q as S,bd as ae,g as j,S as w,B as O,J as F,a2 as ie,z as ce,q as Y,b4 as de,dD as ue,aS as pe,s as he,L as xe,w as be,a as me,i as fe,v as ge,aq as Ce,p as T,dX as H,C as je,x as we,R as ye,y as ke,H as Pe}from"./index-JGGUJxTa.js";import"./_baseToString-1Q8NEKav.js";import"./color-picker-EFwQR95t.js";import{u as ve}from"./product-msMDgPnv.js";import{E as U}from"./empty-content-M6RskY8h.js";import{C as Se}from"./confirm-dialog-msuNFFeT.js";import{C as q}from"./Checkbox-knf4fuN6.js";import{C as Q}from"./Chip-8vmzDimG.js";import{f as Te}from"./format-number-7uu69HrW.js";import{a as Z,u as ee,b as D,d as oe,G as B,g as Re,e as Ie,f as Le,D as Fe,h as De}from"./DataGrid-S15przbM.js";import{G as z}from"./GridActionsCellItem-bFPeXFUq.js";import{G as Ge,a as Oe}from"./GridToolbarQuickFilter-p9qYLHB8.js";import"./incrementer-button-MihjcQ_N.js";import"./product-details-carousel-7hj7UacD.js";import"./styles-_6htcQjI.js";import"./DialogTitle-GoYSdL04.js";import"./dialogTitleClasses-MNKwat2m.js";import"./DialogContent-I9aPqMht.js";import"./DialogActions-X2Ez_hXE.js";import"./SwitchBase-BlNstvD5.js";import"./index-OQBkFM31.js";import"./Autocomplete-bGY3qg-r.js";import"./ClickAwayListener-wsQln6jz.js";import"./Switch-3tzVvzRP.js";import"./Skeleton-zn8oggDq.js";import"./TablePagination-WpIltiJT.js";import"./FirstPage-bg88TicR.js";import"./TableCell-anRfX08j.js";import"./FormControlLabel-ky2qaCet.js";import"./use-light-box-BLB9u_VA.js";import"./carousel-arrow-index-QGW6sfLc.js";const Be=["onClick"],Ne=i.forwardRef(function(l,u){var x;const{onClick:c}=l,m=X(l,Be),b=G(),r=G(),s=Z(),a=ee(),p=D(s,oe),g=n=>{p.open&&p.openedPanelValue===B.columns?s.current.hidePreferences():s.current.showPreferences(B.columns,r,b),c==null||c(n)};if(a.disableColumnSelector)return null;const f=p.open&&p.panelId===r;return e.jsx(a.slots.baseButton,L({ref:u,id:b,size:"small","aria-label":s.current.getLocaleText("toolbarColumnsLabel"),"aria-haspopup":"menu","aria-expanded":f,"aria-controls":f?r:void 0,startIcon:e.jsx(a.slots.columnSelectorIcon,{})},m,{onClick:g},(x=a.slotProps)==null?void 0:x.baseButton,{children:s.current.getLocaleText("toolbarColumns")}))}),Ve=["componentsProps"],_e=o=>{const{classes:l}=o;return le({root:["toolbarFilterList"]},Re,l)},ze=te("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(o,l)=>l.toolbarFilterList})(({theme:o})=>({margin:o.spacing(1,1,.5),padding:o.spacing(0,1)})),Ae=i.forwardRef(function(l,u){var x,c;const{componentsProps:m={}}=l,b=X(l,Ve),r=m.button||{},s=Z(),a=ee(),p=D(s,Ie),g=D(s,Le),f=D(s,oe),n=_e(a),h=G(),k=G(),R=i.useMemo(()=>{if(f.open)return s.current.getLocaleText("toolbarFiltersTooltipHide");if(p.length===0)return s.current.getLocaleText("toolbarFiltersTooltipShow");const P=d=>g[d.field].filterOperators.find(C=>C.value===d.operator).label||s.current.getLocaleText(`filterOperator${re(d.operator)}`).toString(),y=d=>{const{getValueAsString:C}=g[d.field].filterOperators.find(V=>V.value===d.operator);return C?C(d.value):d.value};return e.jsxs("div",{children:[s.current.getLocaleText("toolbarFiltersTooltipActive")(p.length),e.jsx(ze,{className:n.root,ownerState:a,children:p.map((d,C)=>L({},g[d.field]&&e.jsx("li",{children:`${g[d.field].headerName||d.field}
                  ${P(d)}
                  ${d.value!=null?y(d):""}`},C)))})]})},[s,a,f.open,p,g,n]),N=P=>{var y;const{open:d,openedPanelValue:C}=f;d&&C===B.filters?s.current.hidePreferences():s.current.showPreferences(B.filters,k,h),(y=r.onClick)==null||y.call(r,P)};if(a.disableColumnFilter)return null;const I=f.open&&f.panelId===k;return e.jsx(a.slots.baseTooltip,L({title:R,enterDelay:1e3},b,(x=a.slotProps)==null?void 0:x.baseTooltip,{children:e.jsx(a.slots.baseButton,L({ref:u,id:h,size:"small","aria-label":s.current.getLocaleText("toolbarFiltersLabel"),"aria-controls":I?k:void 0,"aria-expanded":I,"aria-haspopup":!0,startIcon:e.jsx(se,{badgeContent:p.length,color:"primary",children:e.jsx(a.slots.openFilterButtonIcon,{})})},r,{onClick:N},(c=a.slotProps)==null?void 0:c.baseButton,{children:s.current.getLocaleText("toolbarFilters")}))}))});function Me({filters:o,onFilters:l,stockOptions:u,publishOptions:x}){const c=ne(),[m,b]=i.useState(o.stock),[r,s]=i.useState(o.publish),a=i.useCallback(n=>{const{target:{value:h}}=n;b(typeof h=="string"?h.split(","):h)},[]),p=i.useCallback(n=>{const{target:{value:h}}=n;s(typeof h=="string"?h.split(","):h)},[]),g=i.useCallback(()=>{l("stock",m)},[l,m]),f=i.useCallback(()=>{l("publish",r)},[l,r]);return e.jsxs(e.Fragment,{children:[e.jsxs(M,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(E,{children:"Stock"}),e.jsx($,{multiple:!0,value:m,onChange:a,input:e.jsx(W,{label:"Stock"}),renderValue:n=>n.map(h=>h).join(", "),onClose:g,sx:{textTransform:"capitalize"},children:u.map(n=>e.jsxs(S,{value:n.value,children:[e.jsx(q,{disableRipple:!0,size:"small",checked:m.includes(n.value)}),n.label]},n.value))})]}),e.jsxs(M,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(E,{children:"Publish"}),e.jsx($,{multiple:!0,value:r,onChange:p,input:e.jsx(W,{label:"Publish"}),renderValue:n=>n.map(h=>h).join(", "),onClose:f,sx:{textTransform:"capitalize"},children:x.map(n=>e.jsxs(S,{value:n.value,children:[e.jsx(q,{disableRipple:!0,size:"small",checked:r.includes(n.value)}),n.label]},n.value))})]}),e.jsxs(ae,{open:c.open,onClose:c.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(S,{onClick:()=>{c.onClose()},children:[e.jsx(j,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(S,{onClick:()=>{c.onClose()},children:[e.jsx(j,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(S,{onClick:()=>{c.onClose()},children:[e.jsx(j,{icon:"solar:export-bold"}),"Export"]})]})]})}function Ee({filters:o,onFilters:l,onResetFilters:u,results:x,...c}){const m=i.useCallback(r=>{const s=o.stock.filter(a=>a!==r);l("stock",s)},[o.stock,l]),b=i.useCallback(r=>{const s=o.publish.filter(a=>a!==r);l("publish",s)},[o.publish,l]);return e.jsxs(w,{spacing:1.5,...c,children:[e.jsxs(O,{sx:{typography:"body2"},children:[e.jsx("strong",{children:x}),e.jsx(O,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(w,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!o.stock.length&&e.jsx(J,{label:"Stock:",children:o.stock.map(r=>e.jsx(Q,{label:r,size:"small",onDelete:()=>m(r)},r))}),!!o.publish.length&&e.jsx(J,{label:"Publish:",children:o.publish.map(r=>e.jsx(Q,{label:r,size:"small",onDelete:()=>b(r)},r))}),e.jsx(F,{color:"error",onClick:u,startIcon:e.jsx(j,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}function J({label:o,children:l,sx:u,...x}){return e.jsxs(w,{component:ie,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...u},...x,children:[e.jsx(O,{component:"span",sx:{typography:"subtitle2"},children:o}),e.jsx(w,{spacing:1,direction:"row",flexWrap:"wrap",children:l})]})}function $e({params:o}){return e.jsx(e.Fragment,{children:Te(o.row.price)})}function We({params:o}){return e.jsx(ce,{variant:"soft",color:o.row.publish==="published"&&"info"||"default",children:o.row.publish})}function He({params:o}){return e.jsx(Y,{primary:de(o.row.createdAt),secondary:ue(o.row.createdAt),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function Ue({params:o}){return e.jsxs(w,{sx:{typography:"caption",color:"text.secondary"},children:[e.jsx(pe,{value:o.row.available*100/o.row.quantity,variant:"determinate",color:o.row.inventoryType==="out of stock"&&"error"||o.row.inventoryType==="low stock"&&"warning"||"success",sx:{mb:1,height:6,maxWidth:80}}),!!o.row.available&&o.row.available," ",o.row.inventoryType]})}function qe({params:o}){return e.jsxs(w,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(he,{alt:o.row.name,src:o.row.coverUrl,variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(Y,{disableTypography:!0,primary:e.jsx(xe,{noWrap:!0,color:"inherit",variant:"subtitle2",onClick:o.row.onViewRow,sx:{cursor:"pointer"},children:o.row.name}),secondary:e.jsx(O,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:o.row.category}),sx:{display:"flex",flexDirection:"column"}})]})}const K=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],A={publish:[],stock:[]},Qe={category:!1},Je=["category","actions"];function Ke(){const{enqueueSnackbar:o}=be(),l=me(),u=fe(),x=ge(),{products:c,productsLoading:m}=ve(),[b,r]=i.useState([]),[s,a]=i.useState(A),[p,g]=i.useState([]),[f,n]=i.useState(Qe);i.useEffect(()=>{c.length&&r(c)},[c]);const h=Xe({inputData:b,filters:s}),k=!Ce(A,s),R=i.useCallback((t,v)=>{a(_=>({..._,[t]:v}))},[]),N=i.useCallback(()=>{a(A)},[]),I=i.useCallback(t=>{const v=b.filter(_=>_.id!==t);o("Delete success!"),r(v)},[o,b]),P=i.useCallback(()=>{const t=b.filter(v=>!p.includes(v.id));o("Delete success!"),r(t)},[o,p,b]),y=i.useCallback(t=>{u.push(T.dashboard.product.edit(t))},[u]),d=i.useCallback(t=>{u.push(T.dashboard.product.details(t))},[u]),C=[{field:"category",headerName:"Category",filterable:!1},{field:"name",headerName:"Product",flex:1,minWidth:360,hideable:!1,renderCell:t=>e.jsx(qe,{params:t})},{field:"createdAt",headerName:"Create at",width:160,renderCell:t=>e.jsx(He,{params:t})},{field:"inventoryType",headerName:"Stock",width:160,type:"singleSelect",valueOptions:H,renderCell:t=>e.jsx(Ue,{params:t})},{field:"price",headerName:"Price",width:140,editable:!0,renderCell:t=>e.jsx($e,{params:t})},{field:"publish",headerName:"Publish",width:110,type:"singleSelect",editable:!0,valueOptions:K,renderCell:t=>e.jsx(We,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(z,{showInMenu:!0,icon:e.jsx(j,{icon:"solar:eye-bold"}),label:"View",onClick:()=>d(t.row.id)}),e.jsx(z,{showInMenu:!0,icon:e.jsx(j,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>y(t.row.id)}),e.jsx(z,{showInMenu:!0,icon:e.jsx(j,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>{I(t.row.id)},sx:{color:"error.main"}})]}],V=()=>C.filter(t=>!Je.includes(t.field)).map(t=>t.field);return e.jsxs(e.Fragment,{children:[e.jsxs(je,{maxWidth:x.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(we,{heading:"List",links:[{name:"Dashboard",href:T.dashboard.root},{name:"Product",href:T.dashboard.product.root},{name:"List"}],action:e.jsx(F,{component:ye,href:T.dashboard.product.new,variant:"contained",startIcon:e.jsx(j,{icon:"mingcute:add-line"}),children:"New Product"}),sx:{mb:{xs:3,md:5}}}),e.jsx(ke,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:e.jsx(Fe,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:h,columns:C,loading:m,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:t=>{g(t)},columnVisibilityModel:f,onColumnVisibilityModelChange:t=>n(t),slots:{toolbar:()=>e.jsxs(e.Fragment,{children:[e.jsxs(Ge,{children:[e.jsx(Me,{filters:s,onFilters:R,stockOptions:H,publishOptions:K}),e.jsx(Oe,{}),e.jsxs(w,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[!!p.length&&e.jsxs(F,{size:"small",color:"error",startIcon:e.jsx(j,{icon:"solar:trash-bin-trash-bold"}),onClick:l.onTrue,children:["Delete (",p.length,")"]}),e.jsx(Ne,{}),e.jsx(Ae,{}),e.jsx(De,{})]})]}),k&&e.jsx(Ee,{filters:s,onFilters:R,onResetFilters:N,results:h.length,sx:{p:2.5,pt:0}})]}),noRowsOverlay:()=>e.jsx(U,{title:"No Data"}),noResultsOverlay:()=>e.jsx(U,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:V}}})})]}),e.jsx(Se,{open:l.value,onClose:l.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",p.length," "]})," items?"]}),action:e.jsx(F,{variant:"contained",color:"error",onClick:()=>{P(),l.onFalse()},children:"Delete"})})]})}function Xe({inputData:o,filters:l}){const{stock:u,publish:x}=l;return u.length&&(o=o.filter(c=>u.includes(c.inventoryType))),x.length&&(o=o.filter(c=>x.includes(c.publish))),o}function Lo(){return e.jsxs(e.Fragment,{children:[e.jsx(Pe,{children:e.jsx("title",{children:" Dashboard: Product List"})}),e.jsx(Ke,{})]})}export{Lo as default};
