import{k as M,l as A,r as i,m as f,n as D,j as e,q as y,S as E,s as I,B as N,t as U,v as k,w as T,C as G,x as O,p as V,y as v,g as d,H as P}from"./index-HVmlIZYv.js";import{E as g}from"./empty-content-J0vuGcwT.js";import{D as z,G as F,a as H,b as c}from"./DataGrid-z0EVE2U0.js";import"./index-WptKgvAm.js";import"./Autocomplete-WNTy16pS.js";import"./Chip-yi7Wa9Nd.js";import"./ClickAwayListener-_jfQIiHS.js";import"./Checkbox-m4MeutVJ.js";import"./SwitchBase-hsBiV9_9.js";import"./Switch-f6XRvqtI.js";import"./Skeleton-R_VnUK7w.js";import"./TablePagination-qo-oKBHm.js";import"./FirstPage-lXeDo4YM.js";import"./TableCell-DndY-2IM.js";import"./FormControlLabel-o9IPCE2V.js";function W(){const o=f.admin.userList,{data:t,isLoading:a,error:r,isValidating:n}=M(o,A);return i.useMemo(()=>({users:t==null?void 0:t.result.users,usersLoading:a,usersError:r,usersValidating:n}),[t==null?void 0:t.result,r,a,n])}const B=async o=>{const t=await D.put(f.admin.userRoleUpdate,{user:o});return{data:(t==null?void 0:t.data)||[]}};function _({params:o}){return e.jsx(y,{primary:o.row.role,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function q({params:o}){return e.jsxs(E,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(I,{alt:o.row.name,src:o.row.coverUrl,variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(y,{disableTypography:!0,primary:e.jsx(N,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:o.row.name})})]})}const Y={category:!1},Q=["category","actions"];function J(){const{t:o}=U(),t=k(),{enqueueSnackbar:a}=T(),{users:r,usersLoading:n}=W(),[p,x]=i.useState([]),[b,j]=i.useState(!1),[C,w]=i.useState(Y);i.useEffect(()=>{r&&x(r)},[r]);const l=async(s,S)=>{const u=await B({id:s,role:S});if(u.data.success){a(o("update_success"));const R=r.map(m=>m.id===u.data.result.id?{...m,role:u.data.result.role}:m);x([...R]),j(!b)}else a("Update did not success")},h=[{field:"name",headerName:"Name",flex:1,minWidth:280,hideable:!1,renderCell:s=>e.jsx(q,{params:s})},{field:"role",headerName:"Role",minWidth:280,renderCell:s=>e.jsx(_,{params:s})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:s=>[e.jsx(c,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:eye-bold"}),label:"ADMIN",onClick:()=>l(s.row.id,"ADMIN")}),e.jsx(c,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"FELLESRAAD",onClick:()=>l(s.row.id,"FELLESRAAD")}),e.jsx(c,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"COMPANY",onClick:()=>l(s.row.id,"COMPANY")}),e.jsx(c,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"CLIENT",onClick:()=>l(s.row.id,"CLIENT")})]}],L=()=>h.filter(s=>!Q.includes(s.field)).map(s=>s.field);return e.jsxs(G,{maxWidth:t.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(O,{heading:"List",links:[{name:"User",href:V.dashboard.root},{name:"List"}],sx:{mb:{xs:3,md:5}}}),e.jsx(v,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:e.jsx(z,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:p,columns:h,loading:n,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},columnVisibilityModel:C,onColumnVisibilityModelChange:s=>w(s),slots:{toolbar:()=>e.jsx(e.Fragment,{children:e.jsx(F,{children:e.jsx(H,{})})}),noRowsOverlay:()=>e.jsx(g,{title:"No Data"}),noResultsOverlay:()=>e.jsx(g,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:L}}})})]})}function me(){return e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx("title",{children:" Admin: List of Users"})}),e.jsx(J,{})]})}export{me as default};
