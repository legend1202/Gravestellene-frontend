import{j as e,k as M,g as b,e as j,S as C,A as T,B as N,p as n,m as O,b as P,h as A,r as i,d as a,C as E,i as p,R as B,H as F}from"./index-UlQdJV1P.js";import{d as H,e as U}from"./graveyard-KG1nYXXt.js";import{E as g}from"./empty-content-TElefgFK.js";import{C as W}from"./confirm-dialog-q2Bhvwfr.js";import{C as _}from"./custom-breadcrumbs-sp1nC4LS.js";import{C as z}from"./Card-Tpk2mypx.js";import{b as y,D as V,G as q,a as Q}from"./DataGrid-NY4D8fUM.js";import"./index-xGZjqk4p.js";import"./index.esm-cAEu_E74.js";import"./image-kA5iJbJO.js";import"./mui-one-time-password-input.es-0dNzvKac.js";import"./styles-OE_XmRMH.js";import"./graveyard-details-carousel-hwLeRh5V.js";import"./styles-Uvy3AcfI.js";import"./DialogTitle-lGKvSnvn.js";import"./dialogTitleClasses-LVz3yyIl.js";import"./DialogContent-e-FUrFvI.js";import"./DialogActions-xz-JuFxE.js";import"./TextField-M4MWmVkb.js";import"./index-N8KUOoSV.js";import"./Autocomplete-hMRniSwq.js";import"./Close-F2EcKiHd.js";import"./Chip-hqq7RYII.js";import"./ClickAwayListener-kSdOyzLj.js";import"./Checkbox-g7nGrg15.js";import"./SwitchBase-JJhgFmTd.js";import"./Switch-6V727Xap.js";import"./Skeleton-IS74jL-o.js";import"./CircularProgress-Hl3FIq0g.js";import"./TablePagination-_QzenAap.js";import"./FirstPage-2i9KtIEj.js";import"./TableCell--CNQwk2c.js";import"./FormControlLabel--JVKjt2-.js";import"./use-light-box-J1WERXN1.js";import"./carousel-arrow-index-3yOoPIz6.js";function $({params:o}){return e.jsx(M,{variant:"soft",color:o.row.approved&&"info"||"default",children:o.row.approved?"Approved":""})}function J({params:o}){return e.jsx(b,{primary:o.row.location,secondary:o.row.location,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function K({params:o}){const r=j(),s=l=>{r.push(n.fellesraad.graveyard.details(l))};return e.jsxs(C,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(T,{alt:o.row.name,src:o.row.coverUrl,variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(b,{disableTypography:!0,onClick:()=>s(`${o==null?void 0:o.id}`),secondary:e.jsx(N,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:o.row.name}),sx:{display:"flex",flexDirection:"column",cursor:"pointer"}})]})}const X=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],Y={category:!1},Z=["category","actions"];function ee(){const{enqueueSnackbar:o}=O(),r=P(),s=j(),l=A(),{graveyards:d,graveyardsLoading:c}=H(),[u,h]=i.useState([]),[m,w]=i.useState([]),[v,S]=i.useState(Y);i.useMemo(()=>{c||h(d)},[d,c]);const G=async t=>{try{if((await U(t)).success){const I=u.filter(L=>L.id!==t);o("Delete success!"),h(I)}}catch(f){console.error(f)}},D=i.useCallback(()=>{console.log("delete id")},[]),R=i.useCallback(t=>{s.push(n.fellesraad.graveyard.edit(t))},[s]),x=[{field:"name",headerName:"Graveyard",flex:1,minWidth:280,hideable:!1,renderCell:t=>e.jsx(K,{params:t})},{field:"location",headerName:"location",minWidth:280,renderCell:t=>e.jsx(J,{params:t})},{field:"publish",headerName:"Publish",width:110,type:"singleSelect",editable:!0,valueOptions:X,renderCell:t=>e.jsx($,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(y,{showInMenu:!0,icon:e.jsx(a,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>G(t.row.id)}),e.jsx(y,{showInMenu:!0,icon:e.jsx(a,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>R(t.row.id)})]}],k=()=>x.filter(t=>!Z.includes(t.field)).map(t=>t.field);return e.jsxs(e.Fragment,{children:[e.jsxs(E,{maxWidth:l.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(_,{heading:"List",links:[{name:"Graveyard",href:n.dashboard.root},{name:"List"}],action:e.jsx(p,{component:B,href:n.fellesraad.graveyard.create,variant:"contained",startIcon:e.jsx(a,{icon:"mingcute:add-line"}),children:"New Graveyard"}),sx:{mb:{xs:3,md:5}}}),e.jsx(z,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:d&&e.jsx(V,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:u,columns:x,loading:c,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:t=>{w(t)},columnVisibilityModel:v,onColumnVisibilityModelChange:t=>S(t),slots:{toolbar:()=>e.jsx(e.Fragment,{children:e.jsxs(q,{children:[e.jsx(Q,{}),e.jsx(C,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:!!m.length&&e.jsxs(p,{size:"small",color:"error",startIcon:e.jsx(a,{icon:"solar:trash-bin-trash-bold"}),onClick:r.onTrue,children:["Delete (",m.length,")"]})})]})}),noRowsOverlay:()=>e.jsx(g,{title:"No Data"}),noResultsOverlay:()=>e.jsx(g,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:k}}})})]}),e.jsx(W,{open:r.value,onClose:r.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete"," ",e.jsxs("strong",{children:[" ",m.length," "]})," items?"]}),action:e.jsx(p,{variant:"contained",color:"error",onClick:()=>{D(),r.onFalse()},children:"Delete"})})]})}function Ae(){return e.jsxs(e.Fragment,{children:[e.jsx(F,{children:e.jsx("title",{children:" Graveyard: List of the Graveyard"})}),e.jsx(ee,{})]})}export{Ae as default};
