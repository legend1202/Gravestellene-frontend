import{j as e,k as I,g as y,S as b,A as M,L as T,B as N,m as O,b as P,e as A,h as E,r,p as d,d as n,C as B,i as c,R as F,H}from"./index-tv0ZIiTC.js";import{d as W,e as U}from"./graveyard-lkQ1F3CD.js";import{E as f}from"./empty-content-a0ZHI6oX.js";import{C as V}from"./confirm-dialog-X7HGHnE_.js";import{C as _}from"./custom-breadcrumbs-wU-A5DZv.js";import{C as z}from"./Card-fEhE4FGy.js";import{b as g,D as q,G as Q,a as $}from"./DataGrid-cai3K9_h.js";import"./index-oYV4_ElG.js";import"./index.esm-VBvqitsX.js";import"./image-tVn7ll4O.js";import"./mui-one-time-password-input.es-YbC1owsP.js";import"./styles-9eCz8YsQ.js";import"./graveyard-details-carousel-FhV68bM2.js";import"./styles-Pl_iOln8.js";import"./DialogTitle-uDbN0tw-.js";import"./dialogTitleClasses-47Jk6PmQ.js";import"./DialogContent-l4Y2lTg9.js";import"./DialogActions-C1UtG1Hl.js";import"./TextField-MR0F-eFr.js";import"./index-D-rNU0hp.js";import"./Autocomplete-J0YW4wEt.js";import"./Close--UPeKSTc.js";import"./Chip-EkmsCEpD.js";import"./ClickAwayListener-wtSf9s9a.js";import"./Checkbox-KewZpZB7.js";import"./SwitchBase-13kQQb6r.js";import"./Switch-shtlxAjk.js";import"./Skeleton-LzH7r1Lc.js";import"./CircularProgress-m_JQi2ZX.js";import"./TablePagination-NVXoWdCj.js";import"./FirstPage-sFACmvNK.js";import"./TableCell--Pegy-Kt.js";import"./FormControlLabel-SC4RdDd1.js";import"./use-light-box-D-_zTE4T.js";import"./carousel-arrow-index-9c3WNDBg.js";function J({params:o}){return e.jsx(I,{variant:"soft",color:o.row.approved&&"info"||"default",children:o.row.approved?"Approved":""})}function K({params:o}){return e.jsx(y,{primary:o.row.location,secondary:o.row.location,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function X({params:o}){return e.jsxs(b,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(M,{alt:o.row.name,src:o.row.coverUrl,variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(y,{disableTypography:!0,primary:e.jsx(T,{noWrap:!0,color:"inherit",variant:"subtitle2",onClick:o.row.onViewRow,href:`${o==null?void 0:o.id}`,sx:{cursor:"pointer"},children:o.row.name}),secondary:e.jsx(N,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:o.row.category}),sx:{display:"flex",flexDirection:"column"}})]})}const Y=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],Z={category:!1},ee=["category","actions"];function te(){const{enqueueSnackbar:o}=O(),i=P(),m=A(),j=E(),{graveyards:s,graveyardsLoading:a}=W(),[p,u]=r.useState([]),[l,w]=r.useState([]),[C,v]=r.useState(Z);r.useMemo(()=>{a||u(s)},[s,a]);const S=async t=>{try{if((await U(t)).success){const k=p.filter(L=>L.id!==t);o("Delete success!"),u(k)}}catch(x){console.error(x)}},G=r.useCallback(()=>{console.log("delete id")},[]),R=r.useCallback(t=>{m.push(d.fellesraad.graveyard.edit(t))},[m]),h=[{field:"name",headerName:"Graveyard",flex:1,minWidth:280,hideable:!1,renderCell:t=>e.jsx(X,{params:t})},{field:"location",headerName:"location",minWidth:280,renderCell:t=>e.jsx(K,{params:t})},{field:"publish",headerName:"Publish",width:110,type:"singleSelect",editable:!0,valueOptions:Y,renderCell:t=>e.jsx(J,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(g,{showInMenu:!0,icon:e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>S(t.row.id)}),e.jsx(g,{showInMenu:!0,icon:e.jsx(n,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>R(t.row.id)})]}],D=()=>h.filter(t=>!ee.includes(t.field)).map(t=>t.field);return e.jsxs(e.Fragment,{children:[e.jsxs(B,{maxWidth:j.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(_,{heading:"List",links:[{name:"Graveyard",href:d.dashboard.root},{name:"List"}],action:e.jsx(c,{component:F,href:d.fellesraad.graveyard.create,variant:"contained",startIcon:e.jsx(n,{icon:"mingcute:add-line"}),children:"New Graveyard"}),sx:{mb:{xs:3,md:5}}}),e.jsx(z,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:s&&e.jsx(q,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:p,columns:h,loading:a,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:t=>{w(t)},columnVisibilityModel:C,onColumnVisibilityModelChange:t=>v(t),slots:{toolbar:()=>e.jsx(e.Fragment,{children:e.jsxs(Q,{children:[e.jsx($,{}),e.jsx(b,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:!!l.length&&e.jsxs(c,{size:"small",color:"error",startIcon:e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),onClick:i.onTrue,children:["Delete (",l.length,")"]})})]})}),noRowsOverlay:()=>e.jsx(f,{title:"No Data"}),noResultsOverlay:()=>e.jsx(f,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:D}}})})]}),e.jsx(V,{open:i.value,onClose:i.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete"," ",e.jsxs("strong",{children:[" ",l.length," "]})," items?"]}),action:e.jsx(c,{variant:"contained",color:"error",onClick:()=>{G(),i.onFalse()},children:"Delete"})})]})}function Ee(){return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx("title",{children:" Graveyard: List of the Graveyard"})}),e.jsx(te,{})]})}export{Ee as default};
