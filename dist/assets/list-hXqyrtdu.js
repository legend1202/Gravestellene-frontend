import{j as e,w as M,m as y,S as b,B as N,z as O,y as j,b as P,k as E,q as B,u as _,x as A,r as o,p as c,h as l,C as H,s as W,t as x,R as z,v as V,D as F,H as U}from"./index-A5RRZfYH.js";import{E as f}from"./empty-content-GoFS-V4X.js";import{f as q}from"./format-number-PIDrlv5x.js";import{b as g,D as $,G as Q,a as J}from"./DataGrid-AGRPwxg2.js";import"./index-M5a9bCon.js";import"./Autocomplete-VAhUVX0s.js";import"./Chip-GbrFxrzK.js";import"./ClickAwayListener-zQSEaZY3.js";import"./Checkbox-8madvuHl.js";import"./SwitchBase-ob-QdZ06.js";import"./Switch-WUG4m-AU.js";import"./Skeleton-v5Il4nLo.js";import"./TablePagination-djLoe0oD.js";import"./FirstPage-0P5qewe6.js";import"./TableCell-rTsNt4im.js";import"./FormControlLabel-doWXY1Ro.js";function K({params:s}){return e.jsx(e.Fragment,{children:q(s.row.price)})}function X({params:s}){return e.jsx(M,{variant:"soft",color:s.row.approved&&"info"||"default",children:s.row.approved?"Approved":""})}function Y({params:s}){return e.jsx(y,{primary:s.row.description,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function Z({params:s}){return e.jsx(b,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:e.jsx(y,{disableTypography:!0,primary:e.jsx(N,{component:"div",sx:{typography:"subtitle2"},children:s.row.name}),sx:{display:"flex",flexDirection:"column"}})})}const ee=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],te={category:!1},se=["category","actions"];function ie(){const{enqueueSnackbar:s}=O(),{t:i}=j(),C=P(),d=E(),w=B(),{user:r}=_(),{services:n,servicesLoading:v}=A((r==null?void 0:r.userId)||(r==null?void 0:r.id)),[a,p]=o.useState([]),[u,S]=o.useState([]),[R,I]=o.useState(te),D=o.useCallback(t=>{d.push(c.fellesraad.service.edit(t))},[d]);o.useEffect(()=>{n&&n.length>0&&p(n)},[n]);const L=async t=>{try{if((await F(t)).success){const G=a.filter(T=>T.id!==t);p(G),s("Delete success!")}}catch(h){console.error(h)}},m=[{field:"name",headerName:i("service_name"),flex:1,minWidth:100,hideable:!1,renderCell:t=>e.jsx(Z,{params:t})},{field:"description",headerName:i("description"),minWidth:280,renderCell:t=>e.jsx(Y,{params:t})},{field:"price",headerName:i("price"),minWidth:280,renderCell:t=>e.jsx(K,{params:t})},{field:"publish",headerName:i("publish"),width:110,type:"singleSelect",editable:!0,valueOptions:ee,renderCell:t=>e.jsx(X,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(g,{showInMenu:!0,icon:e.jsx(l,{icon:"solar:trash-bin-trash-bold"}),label:i("delete"),onClick:()=>L(t.row.id)}),e.jsx(g,{showInMenu:!0,icon:e.jsx(l,{icon:"solar:pen-bold"}),label:i("edit"),onClick:()=>D(t.row.id)})]}],k=()=>m.filter(t=>!se.includes(t.field)).map(t=>t.field);return e.jsxs(H,{maxWidth:w.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(W,{heading:"List",links:[{name:i("service"),href:c.fellesraad.service.root},{name:i("list")}],action:e.jsx(x,{component:z,href:c.fellesraad.service.create,variant:"contained",startIcon:e.jsx(l,{icon:"mingcute:add-line"}),children:i("new_service")}),sx:{mb:{xs:3,md:5}}}),e.jsx(V,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:a&&a.length>0&&e.jsx($,{disableRowSelectionOnClick:!0,rows:a,columns:m,loading:v,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:t=>{S(t)},columnVisibilityModel:R,onColumnVisibilityModelChange:t=>I(t),slots:{toolbar:()=>e.jsxs(Q,{children:[e.jsx(J,{}),e.jsx(b,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:!!u.length&&e.jsxs(x,{size:"small",color:"error",startIcon:e.jsx(l,{icon:"solar:trash-bin-trash-bold"}),onClick:C.onTrue,children:["Delete (",u.length,")"]})})]}),noRowsOverlay:()=>e.jsx(f,{title:"No Data"}),noResultsOverlay:()=>e.jsx(f,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:k}}})})]})}function je(){const{t:s}=j();return e.jsxs(e.Fragment,{children:[e.jsx(U,{children:e.jsxs("title",{children:[" ",`${s("services")}: ${s("list_of_services")}`]})}),e.jsx(ie,{})]})}export{je as default};
