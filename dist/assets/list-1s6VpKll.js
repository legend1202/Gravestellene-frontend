import{O as H,j as e,S as h,w as z,L as Y,R as X,B as y,v as D,p as K,h as S,as as M,aY as J,bi as Z,t as N,bj as ee,bk as re,k as ne,bl as se,bm as te,M as oe,I as ae,bn as ie,bo as le,r as g,n as ce,T as R,aq as E,ar as de,K as pe,N as xe,g as G,bp as he,aB as Q,bq as me,X as ue,q as ge,b as je,av as be,aw as fe,ax as Ce,ay as ye,az as Re,br as ve,C as Se,H as ke}from"./index-HNXcBFmK.js";import{o as T}from"./orderBy-qj-3AKgd.js";import{u as we}from"./use-debounce-6yITaZUy.js";import{u as Pe,a as Ie}from"./product-kJ7XcVIO.js";import{E as Oe}from"./empty-content-U1gD0OQx.js";import{f as _}from"./format-number-CyLv55jy.js";import{C as Te}from"./color-picker-iXk3C1N0.js";import{C as Be}from"./color-preview-jm4ZSER3.js";import{F as Ae}from"./Fab-LGfK-TeH.js";import{P as Fe}from"./product-skeleton-RCIUeyqK.js";import{P as Le,p as We}from"./Pagination-_e_R5hex.js";import{C as $e}from"./cart-icon-TE-SV7Jk.js";import{A as Ne}from"./Autocomplete-GN7x_yCw.js";import{F as U}from"./FormControlLabel-lt5zSUTX.js";import{C as ze}from"./Checkbox-Ym_NGexD.js";import{R as Ee}from"./Radio-usAzyCwv.js";import{S as Ge}from"./Slider-ypuB8_KM.js";import{R as _e}from"./Rating-15JHtWe-.js";import{C as I}from"./Chip-3avuppyl.js";import"./_baseToString-9_B3_dNw.js";import"./incrementer-button-PxJ81buY.js";import"./product-details-carousel-dIMSU7Pp.js";import"./styles-YnmLUlb4.js";import"./_baseIteratee-Jya-825R.js";import"./_baseEach-ryiSa7WG.js";import"./Skeleton-sNk2is3Y.js";import"./FirstPage-YanvF_fQ.js";import"./SwitchBase-jg6lkq6c.js";import"./visuallyHidden-DVicuktI.js";import"./use-light-box-tRNVtoY0.js";import"./carousel-arrow-index-ooFGQhEN.js";function Ue({product:r}){const{onAddToCart:c}=H(),{id:o,name:n,coverUrl:s,price:x,colors:a,available:u,sizes:i,priceSale:l,newLabel:d,saleLabel:p}=r,m=K.product.details(o),j=async()=>{const f={id:o,name:n,coverUrl:s,available:u,price:x,colors:[a[0]],size:i[0],quantity:1};try{c(f)}catch(v){console.error(v)}},k=(d.enabled||p.enabled)&&e.jsxs(h,{direction:"row",alignItems:"center",spacing:1,sx:{position:"absolute",zIndex:9,top:16,right:16},children:[d.enabled&&e.jsx(z,{variant:"filled",color:"info",children:d.content}),p.enabled&&e.jsx(z,{variant:"filled",color:"error",children:p.content})]}),w=e.jsxs(y,{sx:{position:"relative",p:1},children:[!!u&&e.jsx(Ae,{color:"warning",size:"medium",className:"add-cart-btn",onClick:j,sx:{right:16,bottom:16,zIndex:9,opacity:0,position:"absolute",transition:f=>f.transitions.create("all",{easing:f.transitions.easing.easeInOut,duration:f.transitions.duration.shorter})},children:e.jsx(S,{icon:"solar:cart-plus-bold",width:24})}),e.jsx(M,{title:!u&&"Out of stock",placement:"bottom-end",children:e.jsx(J,{alt:n,src:s,ratio:"1/1",sx:{borderRadius:1.5,...!u&&{opacity:.48,filter:"grayscale(1)"}}})})]}),P=e.jsxs(h,{spacing:2.5,sx:{p:3,pt:2},children:[e.jsx(Y,{component:X,href:m,color:"inherit",variant:"subtitle2",noWrap:!0,children:n}),e.jsxs(h,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Be,{colors:a}),e.jsxs(h,{direction:"row",spacing:.5,sx:{typography:"subtitle1"},children:[l&&e.jsx(y,{component:"span",sx:{color:"text.disabled",textDecoration:"line-through"},children:_(l)}),e.jsx(y,{component:"span",children:_(x)})]})]})]});return e.jsxs(D,{sx:{"&:hover .add-cart-btn":{opacity:1}},children:[k,w,P]})}function qe({products:r,loading:c,...o}){const n=e.jsx(e.Fragment,{children:[...Array(16)].map((x,a)=>e.jsx(Fe,{},a))}),s=e.jsx(e.Fragment,{children:r.map(x=>e.jsx(Ue,{product:x},x.id))});return e.jsxs(e.Fragment,{children:[e.jsx(y,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},...o,children:c?n:s}),r.length>8&&e.jsx(Le,{count:8,sx:{mt:8,[`& .${We.ul}`]:{justifyContent:"center"}}})]})}function He({sort:r,onSort:c,sortOptions:o}){var x;const n=Z(),s=(x=o.find(a=>a.value===r))==null?void 0:x.label;return e.jsxs(e.Fragment,{children:[e.jsxs(N,{disableRipple:!0,color:"inherit",onClick:n.onOpen,endIcon:e.jsx(S,{icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold"},children:["Sort By:",e.jsx(y,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:s})]}),e.jsx(ee,{open:n.open,onClose:n.onClose,sx:{width:140},children:o.map(a=>e.jsx(re,{selected:a.value===r,onClick:()=>{n.onClose(),c(a.value)},children:a.label},a.value))})]})}function Ke({query:r,results:c,onSearch:o,hrefItem:n,loading:s}){const x=ne(),a=i=>{x.push(n(i))},u=i=>{if(r&&i.key==="Enter"){const l=c.filter(d=>d.name===r)[0];a(l.id)}};return e.jsx(Ne,{sx:{width:{xs:1,sm:260}},loading:s,autoHighlight:!0,popupIcon:null,options:c,onInputChange:(i,l)=>o(l),getOptionLabel:i=>i.name,noOptionsText:e.jsx(se,{query:r,sx:{bgcolor:"unset"}}),isOptionEqualToValue:(i,l)=>i.id===l.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${te.option}`]:{pl:.75}}}},renderInput:i=>e.jsx(oe,{...i,placeholder:"Search...",onKeyUp:u,InputProps:{...i.InputProps,startAdornment:e.jsx(ae,{position:"start",children:e.jsx(S,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[s?e.jsx(S,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,i.InputProps.endAdornment]})}}),renderOption:(i,l,{inputValue:d})=>{const p=ie(l.name,d),m=le(l.name,p);return g.createElement(y,{component:"li",...i,onClick:()=>a(l.id),key:l.id},e.jsx(ce,{alt:l.name,src:l.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},l.id),e.jsx("div",{children:m.map((j,k)=>e.jsx(R,{component:"span",color:j.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:j.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:j.text},k))},d))}})}function Me({open:r,onOpen:c,onClose:o,filters:n,onFilters:s,canReset:x,onResetFilters:a,colorOptions:u,genderOptions:i,ratingOptions:l,categoryOptions:d}){const p=[...Array(21)].map((t,C)=>{const b=C*10,W=C===0?`$${b}`:`${b}`;return{value:b,label:C%4?"":W}}),m=g.useCallback(t=>{const C=n.gender.includes(t)?n.gender.filter(b=>b!==t):[...n.gender,t];s("gender",C)},[n.gender,s]),j=g.useCallback(t=>{s("category",t)},[s]),k=g.useCallback(t=>{s("colors",t)},[s]),w=g.useCallback((t,C)=>{s("priceRange",C)},[s]),P=g.useCallback(t=>{s("rating",t)},[s]),f=e.jsxs(h,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{py:2,pr:1,pl:2.5},children:[e.jsx(R,{variant:"h6",sx:{flexGrow:1},children:"Filters"}),e.jsx(M,{title:"Reset",children:e.jsx(G,{onClick:a,children:e.jsx(E,{color:"error",variant:"dot",invisible:!x,children:e.jsx(S,{icon:"solar:restart-bold"})})})}),e.jsx(G,{onClick:o,children:e.jsx(S,{icon:"mingcute:close-line"})})]}),v=e.jsxs(h,{children:[e.jsx(R,{variant:"subtitle2",sx:{mb:1},children:"Gender"}),i.map(t=>e.jsx(U,{control:e.jsx(ze,{checked:n.gender.includes(t.label),onClick:()=>m(t.label)}),label:t.label},t.value))]}),B=e.jsxs(h,{children:[e.jsx(R,{variant:"subtitle2",sx:{mb:1},children:"Category"}),d.map(t=>e.jsx(U,{control:e.jsx(Ee,{checked:t===n.category,onClick:()=>j(t)}),label:t,sx:{...t==="all"&&{textTransform:"capitalize"}}},t))]}),A=e.jsxs(h,{children:[e.jsx(R,{variant:"subtitle2",sx:{mb:1},children:"Color"}),e.jsx(Te,{selected:n.colors,onSelectColor:t=>k(t),colors:u,limit:6})]}),F=e.jsxs(h,{children:[e.jsx(R,{variant:"subtitle2",sx:{flexGrow:1},children:"Price"}),e.jsxs(h,{direction:"row",spacing:5,sx:{my:2},children:[e.jsx(q,{type:"min",value:n.priceRange,onFilters:s}),e.jsx(q,{type:"max",value:n.priceRange,onFilters:s})]}),e.jsx(Ge,{value:n.priceRange,onChange:w,step:10,min:0,max:200,marks:p,getAriaValueText:t=>`$${t}`,valueLabelFormat:t=>`$${t}`,sx:{alignSelf:"center",width:"calc(100% - 24px)"}})]}),L=e.jsxs(h,{spacing:2,alignItems:"flex-start",children:[e.jsx(R,{variant:"subtitle2",children:"Rating"}),l.map((t,C)=>e.jsxs(h,{direction:"row",onClick:()=>P(t),sx:{borderRadius:1,cursor:"pointer",typography:"body2","&:hover":{opacity:.48},...n.rating===t&&{pl:.5,pr:.75,py:.25,bgcolor:"action.selected"}},children:[e.jsx(_e,{readOnly:!0,value:4-C,sx:{mr:1}})," & Up"]},t))]});return e.jsxs(e.Fragment,{children:[e.jsx(N,{disableRipple:!0,color:"inherit",endIcon:e.jsx(E,{color:"error",variant:"dot",invisible:!x,children:e.jsx(S,{icon:"ic:round-filter-list"})}),onClick:c,children:"Filters"}),e.jsxs(de,{anchor:"right",open:r,onClose:o,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:280}},children:[f,e.jsx(pe,{}),e.jsx(xe,{sx:{px:2.5,py:3},children:e.jsxs(h,{spacing:3,children:[v,B,A,F,L]})})]})]})}function q({type:r,value:c,onFilters:o}){const n=c[0],s=c[1],x=g.useCallback(()=>{n<0&&o("priceRange",[0,s]),n>200&&o("priceRange",[200,s]),s<0&&o("priceRange",[n,0]),s>200&&o("priceRange",[n,200])},[s,n,o]);return e.jsxs(h,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:1},children:[e.jsx(R,{variant:"caption",sx:{flexShrink:0,color:"text.disabled",textTransform:"capitalize",fontWeight:"fontWeightSemiBold"},children:`${r} ($)`}),e.jsx(he,{fullWidth:!0,value:r==="min"?n:s,onChange:a=>r==="min"?o("priceRange",[Number(a.target.value),s]):o("priceRange",[n,Number(a.target.value)]),onBlur:x,inputProps:{step:10,min:0,max:200,type:"number","aria-labelledby":"input-slider"},sx:{maxWidth:48,borderRadius:.75,bgcolor:a=>Q(a.palette.grey[500],.08),[`& .${me.input}`]:{pr:1,py:.75,textAlign:"right",typography:"body2"}}})]})}function Qe({filters:r,onFilters:c,canReset:o,onResetFilters:n,results:s,...x}){const a=p=>{const m=r.gender.filter(j=>j!==p);c("gender",m)},u=()=>{c("category","all")},i=p=>{const m=r.colors.filter(j=>j!==p);c("colors",m)},l=()=>{c("priceRange",[0,200])},d=()=>{c("rating","")};return e.jsxs(h,{spacing:1.5,...x,children:[e.jsxs(y,{sx:{typography:"body2"},children:[e.jsx("strong",{children:s}),e.jsx(y,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(h,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!r.gender.length&&e.jsx(O,{label:"Gender:",children:r.gender.map(p=>e.jsx(I,{label:p,size:"small",onDelete:()=>a(p)},p))}),r.category!=="all"&&e.jsx(O,{label:"Category:",children:e.jsx(I,{size:"small",label:r.category,onDelete:u})}),!!r.colors.length&&e.jsx(O,{label:"Colors:",children:r.colors.map(p=>e.jsx(I,{size:"small",label:e.jsx(y,{sx:{ml:-.5,width:18,height:18,bgcolor:p,borderRadius:"50%",border:m=>`solid 1px ${Q(m.palette.common.white,.24)}`}}),onDelete:()=>i(p)},p))}),(r.priceRange[0]!==0||r.priceRange[1]!==200)&&e.jsx(O,{label:"Price:",children:e.jsx(I,{size:"small",label:`$${r.priceRange[0]} - ${r.priceRange[1]}`,onDelete:l})}),!!r.rating&&e.jsx(O,{label:"Rating:",children:e.jsx(I,{size:"small",label:r.rating,onDelete:d})}),o&&e.jsx(N,{color:"error",onClick:n,startIcon:e.jsx(S,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}function O({label:r,children:c,sx:o,...n}){return e.jsxs(h,{component:ue,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...o},...n,children:[e.jsx(y,{component:"span",sx:{typography:"subtitle2"},children:r}),e.jsx(h,{spacing:1,direction:"row",flexWrap:"wrap",children:c})]})}const $={gender:[],colors:[],rating:"",category:"all",priceRange:[0,200]};function Ve(){const r=ge(),c=H(),o=je(),[n,s]=g.useState("featured"),[x,a]=g.useState(""),u=we(x),[i,l]=g.useState($),{products:d,productsLoading:p,productsEmpty:m}=Pe(),{searchResults:j,searchLoading:k}=Ie(u),w=g.useCallback((b,W)=>{l(V=>({...V,[b]:W}))},[]),P=g.useCallback(()=>{l($)},[]),f=Ye({inputData:d,filters:i,sortBy:n}),v=!be($,i),B=!f.length&&v,A=g.useCallback(b=>{s(b)},[]),F=g.useCallback(b=>{a(b)},[]),L=e.jsxs(h,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},children:[e.jsx(Ke,{query:u,results:j,onSearch:F,loading:k,hrefItem:b=>K.product.details(b)}),e.jsxs(h,{direction:"row",spacing:1,flexShrink:0,children:[e.jsx(Me,{open:o.value,onOpen:o.onTrue,onClose:o.onFalse,filters:i,onFilters:w,canReset:v,onResetFilters:P,colorOptions:fe,ratingOptions:Ce,genderOptions:ye,categoryOptions:["all",...Re]}),e.jsx(He,{sort:n,onSort:A,sortOptions:ve})]})]}),t=e.jsx(Qe,{filters:i,onFilters:w,canReset:v,onResetFilters:P,results:f.length}),C=e.jsx(Oe,{filled:!0,title:"No Data",sx:{py:10}});return e.jsxs(Se,{maxWidth:r.themeStretch?!1:"lg",sx:{mb:15},children:[e.jsx($e,{totalItems:c.totalItems}),e.jsx(R,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Shop"}),e.jsxs(h,{spacing:2.5,sx:{mb:{xs:3,md:5}},children:[L,v&&t]}),(B||m)&&C,e.jsx(qe,{products:f,loading:p})]})}function Ye({inputData:r,filters:c,sortBy:o}){const{gender:n,category:s,colors:x,priceRange:a,rating:u}=c,i=a[0],l=a[1];return o==="featured"&&(r=T(r,["totalSold"],["desc"])),o==="newest"&&(r=T(r,["createdAt"],["desc"])),o==="priceDesc"&&(r=T(r,["price"],["desc"])),o==="priceAsc"&&(r=T(r,["price"],["asc"])),n.length&&(r=r.filter(d=>n.includes(d.gender))),s!=="all"&&(r=r.filter(d=>d.category===s)),x.length&&(r=r.filter(d=>d.colors.some(p=>x.includes(p)))),(i!==0||l!==200)&&(r=r.filter(d=>d.price>=i&&d.price<=l)),u&&(r=r.filter(d=>{const p=m=>m==="up4Star"?4:m==="up3Star"?3:m==="up2Star"?2:1;return d.totalRatings>p(u)})),r}function Pr(){return e.jsxs(e.Fragment,{children:[e.jsx(ke,{children:e.jsx("title",{children:" Product: Shop"})}),e.jsx(Ve,{})]})}export{Pr as default};
